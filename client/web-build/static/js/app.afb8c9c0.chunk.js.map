{"version":3,"sources":["src/constants/Colors.js","src/Game/engine/utils/flatMaterial.js","src/Game/engine/entities/Gem.js","src/utils/getUserInfo.js","src/rematch/models.js","src/rematch/Gate.js","src/Game/engine/entities/Platform.js","src/Game/engine/entities/PlayerBall.js","src/constants/Settings.js","src/components/Game.js","src/Game/Game.js","src/Game/engine/entities/Lighting.js","src/Game/engine/entities/DoubleGem.js","src/Game/Circle.js","src/components/GraphicsView.js","src/components/ScoreMeta.js","src/components/TouchableView.web.js","src/components/LicensesListItem.js","src/components/Licenses.js","src/components/Song.js","src/screens/GameScreen.js","src/components/List/Footer.js","src/utils/addNth.js","src/components/Avatar.js","src/components/TimeAgo.js","src/components/List/Item.js","src/components/List/Separator.js","src/components/List/UserCell.js","src/components/List/index.js","src/screens/LeaderboardScreen.js","src/components/Button/EditPhoto.js","src/components/ProfileImage.js","src/components/ProfileMetaDataView.js","src/components/UpgradeAccountView.js","src/screens/ProfileScreen.js","src/components/ReportList/Header.js","src/components/ReportList/Item.js","src/components/ReportList/index.js","src/constants/Offenses.js","src/screens/ReportScreen.js","src/Navigation.js","src/App.js","src/hooks/useStoreReview.js","src/components/TouchableBounce.web.js","src/components/Button/Icon.js","src/components/Button/Leaderboard.js","src/components/Button/LicensesButton.js","src/components/Button/Rate.js","src/utils/storeUrl.js","src/components/Button/Share.js","src/components/Button/Sound.js","src/components/Footer.js","src/Game/Composer.js","src/Game/index.js","web-build/register-service-worker.js","src/assets/audio/button_in.wav","src/assets/audio/button_out.wav","src/assets/audio/song.mp3","src/ExpoParty/Secret.js","src/ExpoParty/Fire.js","src/assets/images/PILLAR.png","src/assets/images/VALLEY.png","src/assets/images/BEGIN.png","src/assets/icons/splash.png","src/assets/fonts/GothamNarrow-Book.ttf","src/Game/GameStates.js","src/Game/engine/core/GameObject.js","src/Game/engine/utils/randomRange.js","src/AudioManager.js"],"names":["Colors","red","yellow","white","brown","pink","brownDark","blue","green","purple","lightgreen","beige","gold","FlatMaterial","props","flatShading","MeshPhongMaterial","Gem","getGemGeometry","geometry","CylinderGeometry","vertices","length","y","verticesNeedUpdate","loadAsync","scene","a","async","add","gem","sat","hue","_animateColorTo","s","TweenMax","to","onUpdate","_platformMaterial","color","getMaterial","bind","getValue","pickup","global","GemMaterial","clone","this","destroy","canBeCollected","delta","time","rotation","v","scale","set","mesh","Mesh","position","multiplyScalar","Color","Math","floor","GameObject","getUserInfo","appOwnership","Constants","expoVersion","deviceId","deviceName","deviceYearClass","isDevice","platform","skins","state","reducers","setBest","best","increment","current","isBest","effects","sync","unlock","key","score","last","nextScore","max","_reset","reset","Settings","isFirebaseEnabled","isEveryScoreBest","dispatch","setHighScore","highScore","user","displayName","photoURL","console","log","_displayName","parseName","docRef","Fire","shared","doc","db","runTransaction","transaction","get","then","exists","Error","data","cloudHighScore","update","timestamp","Date","now","message","Alert","alert","currency","change","value","game","GameStates","Menu","play","Playing","menu","muted","toggle","screenshot","uri","updateAsync","ref","Dimensions","width","height","options","format","quality","result","takeSnapshotAsync","incrementDailyReward","Promise","res","rej","userDoc","lastRewardTimestamp","hours","abs","dailyVisits","newDailyVisits","catch","dailyStreak","rewardUser","streak","compareDaily","mergeInternal","uid","currentUser","otherUsers","inputName","backupName","name","trim","leaders","batchUpdate","users","nextData","clear","getPagedAsync","start","size","callback","collection","firebase","firestore","slug","where","orderBy","limit","startAfter","querySnapshot","forEach","_data","id","push","JSON","stringify","cursor","docs","noMore","error","getAsync","auth","nUser","rank","players","reduceFirebaseUser","nextUser","possibleUpdates","providerData","facebookData","fbuid","Object","keys","updateProfile","phoneNumber","lastLoginAt","isAnonymous","emailVerified","email","createdAt","logoutAsync","signOut","signInAnonymously","observeAuth","onAuthStateChanged","localUserData","nextLocalUserData","combinedUserData","firebaseAuthData","toJSON","warn","nextFirebaseAuthData","deviceInfo","getDeviceInfo","updates","undefined","setItemWithExpiration","shouldDelayFirebaseProfileSyncInMinutes","syncLocalToFirebase","mergeDataWithFirebase","merge","additionalUserInfo","credential","otherUserProps","setGameData","FacebookLoginTypes","deleteUserAsync","all","delete","facebook","setAuth","setGraphResults","graph","otherState","upgradeAccount","getToken","upgradeAccountWithToken","login","loginToFirebaseWithToken","Facebook","manifest","facebookAppId","facebookLoginProps","type","expires","token","_token","linkAndRetrieveDataWithToken","authorized","code","signInWithToken","callGraphWithToken","params","join","fetch","response","json","results","_user","FacebookAuthProvider","linkAndRetrieveDataWithCredential","signInAndRetrieveDataWithCredential","minutes","expireAt","getExpireDate","objectToStore","AsyncStorage","setItem","expireInMinutes","expireTime","setMinutes","getMinutes","persistPlugin","createRematchPersist","whiteList","version","storage","store","init","models","plugins","Gate","persistor","getPersistor","children","React","Component","radius","pointForGem","r","x","cos","sin","PlatformMesh","material","PlatformGeom","BoxBufferGeometry","_alpha","transparent","materials","map","opacity","traverse","child","Platform","lastAngle","updateDirection","direction","playerDirection","gems","gemCount","degrees","PI","subDiv","i","dir","ballDistance","z","_driftAngle","ensureGems","count","DoubleGem","showGems","alpha","delay","_scale","onComplete","animateGemsOut","becomeCurrent","becomeTarget","getEndPosition","randomRange","animateOut","animateIn","PlayerBall","PlayerBallGeom","CylinderBufferGeometry","PlayerBallMaterial","circle","Circle","resetCircle","visible","hide","duration","landed","perfection","circleEnabled","ease","Cubic","easeOut","permissions","isSimulator","isAutoStartEnabled","isScreenshotEnabled","isMotionMenuEnabled","isComposerEnabled","debug","__DEV__","rotationSpeed","epsilon","angleRange","visibleTargets","isCacheProfileUpdateActive","canEditPhoto","leaderPageSize","Game","onContextCreate","machine","onContextCreateAsync","onLoad","onLicensesPress","navigation","navigate","onLeaderboardPress","GameState","style","styles","container","pointerEvents","gameScreen","flex","backgroundColor","touchable","onTouchesBegan","gameRef","onRender","onResize","StyleSheet","create","overflow","distance","p1","p2","b","sqrt","renderer","balls","targets","offset","taps","observeMotion","RNPlatform","OS","DeviceMotion","setUpdateInterval","_subscribe","window","addEventListener","pageX","pageY","_subscription","addListener","accelerationIncludingGravity","_unsubscribe","remove","createScene","THREE","background","fog","createCameraAsync","camera","lookAt","ogPosition","generateDirection","round","loadMenu","topMaterial","loadTextureAsync","asset","image","makePillar","titleGroup","require","pillar","Back","pillarB","pillarC","ExpoEase","normalizer","pillars","loadGame","cachedRotationVelocity","steps","gameGroup","targetGroup","ballGroup","ballA","ballB","rotationAngle","mainBall","target","getVisibleTargetsCount","addTarget","startGame","playing","setGameState","changeBall","takeScreenshot","animateBackgroundColor","input","runHapticsWithValue","Haptics","Light","Medium","Heavy","valueForPerfection","testCollisionWithGem","loaded","distanceFromTarget","particles","impulse","shift","currentTarget","syncTargetsAlpha","gameOver","level","alphaForTarget","screenShotTaken","_width","_height","animate","startX","startZ","randomAngle","radians","degToRad","atan2","aspect","updateProjectionMatrix","_game","types","Lighting","promises","isFirst","minScale","speed","min","distanceX","distanceZ","collideGems","filter","_ballPosition","getWorldPosition","hemisphere","shadow","HemisphereLight","light","DirectionalLight","DoubleGemMaterial","moveTo","quadraticCurveTo","Shape","CircleMesh","shape","ShapeBufferGeometry","mat","explode","GraphicsView","appState","AppState","currentState","uuidv4","gl","nativeRef","cancelAnimationFrame","rafID","handleAppStateChangeAsync","nextAppState","match","onShouldReloadContext","setState","_saveNativeRef","_onLayout","nativeEvent","layout","PixelRatio","pixelRatio","_onContextCreate","invariant","drawingBufferWidth","drawingBufferHeight","render","getNow","lastFrameTime","requestAnimationFrame","endFrameEXP","removeEventListener","glviewStyle","isArEnabled","shouldIgnoreSafeGuards","onLayout","defaultProps","arRunningProps","arCameraProps","isShadowsEnabled","nativePerformanceNow","errorContainer","justifyContent","alignItems","connect","top","useSafeArea","flexDirection","text","marginHorizontal","userSelect","left","right","paddingLeft","paddingRight","fontFamily","fontSize","textAlign","marginRight","TouchableView","flatten","tabIndex","onKeyDown","e","keyCode","onMouseDown","onTouchStart","onTouchEnd","preventDefault","LicensesListItem","userUrl","username","licenses","repository","licenseUrl","title","parents","toLowerCase","View","cardShadow","card","TouchableOpacity","onPress","Linking","openURL","Image","source","underlayColor","item","maxWidth","url","FontAwesome","alignSelf","Link","numberOfLines","borderRadius","marginVertical","shadowColor","shadowOpacity","shadowOffset","shadowRadius","paddingVertical","paddingHorizontal","flexWrap","fontWeight","marginTop","Data","license","split","startsWith","components","string","pop","charAt","toUpperCase","slice","Licenses","bottom","FlatList","keyExtractor","contentContainerStyle","paddingBottom","renderItem","sort","AudioManager","pauseAsync","playAsync","stopAsync","absoluteFillObject","GameScreen","useState","loading","setLoading","Footer","TouchableHighlight","borderTopWidth","hairlineWidth","borderTopColor","nth","n","carrot","emerald","peterRiver","wisteria","alizarin","turquoise","midnightBlue","Avatar","userName","avatarName","sumChars","charCodeAt","colors","avatarColor","avatar","avatarStyle","textStyle","disabled","other","accessibilityTraits","renderAvatar","setAvatarColor","renderInitials","avatarTransparent","PureComponent","backgroundTransparent","TimeAgo","subtext","simple","Item","index","_rankValue","addNth","subtitle","Ionicons","minWidth","Separator","marginLeft","UserCell","List","userItem","onPressHeader","onPressFooter","headerButtonTitle","ListFooterComponent","footer","ItemSeparatorComponent","renderUserItem","footerProps","ConnectedProfile","values","showActionSheetWithOptions","setFilter","refreshing","setRefreshing","hasMore","setHasMore","lastKnownKey","setLast","useEffect","makeRemoteRequest","timeout","setTimeout","clearTimeout","_onPressItem","cancelButtonIndex","icons","buttonIndex","refreshControl","RefreshControl","tintColor","primaryColor","onRefresh","connectActionSheet","EditPhoto","MaterialIcons","ProfileImage","_getPermission","permission","Permissions","status","_takePhoto","ImagePicker","allowsEditing","cancelled","_setNewPhoto","_selectPhoto","_viewProfilePicture","isUser","sheetOptions","action","minHeight","avatarSize","ProfileMetaDataView","_name","paragraph","LogoutButton","forwardRef","Button","FacebookButton","UpgradeAccountView","canLogout","paddingTop","marginBottom","padding","row","reportButton","ASProfile","isSignedInWithFB","dispatchProps","ownProps","stateProps","route","Header","buttonTitle","link","borderBottomColor","borderBottomWidth","ListHeaderComponent","headerProps","offenses","offense","ReportScreen","header","ReportList","Offenses","submitComplaint","goBack","margin","AppTab","createMaterialTopTabNavigator","tabBarIcon","AppStack","createStackNavigator","linking","prefixes","config","Report","Social","screens","Leaderboard","Profile","NavigationContainer","Navigator","screenOptions","headerTintColor","headerStyle","headerTitleStyle","cardStyle","initialRouteName","Screen","component","TabNavigation","ProfileScreen","headerRight","Text","tabBarOptions","shifting","activeTintColor","inactiveTintColor","barStyle","mode","LeaderboardScreen","tabBarColor","App","Font","setupAsync","timeEnd","AppLoading","Navigation","useStoreReview","supportsStoreReview","setStoreReview","StoreReview","isAvailable","Icon","soundOut","soundIn","iconStyle","onPressIn","onPressOut","icon","maxHeight","borderColor","select","web","default","LeaderboardButton","LicensesButton","Rate","canReview","useMemo","cancelable","storeUrl","appStoreUrl","playStoreUrl","ShareButton","appName","Share","share","excludedActivityTypes","button","animation","views","Sound","unshift","view","_delay","useNativeDriver","easing","effectVignette","ShaderPass","VignetteShader","renderToScreen","composer","EffectComposer","addPass","RenderPass","Machine","Renderer","Composer","setSize","navigator","serviceWorker","register","scope","info","module","exports","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","googleAnalyticsTrackingId","collectionName","initializeApp","Secret","settings","timestampsInSnapshots","addCurrency","amount","newCurrency","targetUid","complaint","_loaded","_size","depth","objects","setAll","parent","destroyChild","object","indexOf","splice","dispatchEvent","objectIndex","isObject3D","box","setFromObject","getSize","center","random","sounds","isLooping","getState","soundObject","setPositionAsync","setIsLoopingAsync","volumeAsync","volume","setVolumeAsync","configureExperienceAudioAsync","Audio","setAudioModeAsync","playThroughEarpieceAndroid","allowsRecordingIOS","interruptionModeIOS","INTERRUPTION_MODE_IOS_DO_NOT_MIX","playsInSilentModeIOS","shouldDuckAndroid","interruptionModeAndroid","INTERRUPTION_MODE_ANDROID_DO_NOT_MIX","setupAudioAsync","assets","createAsync","sound","soundName","substr","lastIndexOf"],"mappings":"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","file":"static/js/app.afb8c9c0.chunk.js","sourcesContent":["// @flow\nconst Colors = {\n  red: 0xd0021b,\n  yellow: 0xf8e71c,\n  white: 0xf6e6e8,\n  brown: 0x8b4f39,\n  pink: 0xefacb4,\n  brownDark: 0x66401e,\n  blue: 0x4a90e2,\n  green: 0x7ed321,\n  purple: 0x9013fe,\n  lightgreen: 0xb8e986,\n  beige: 0xf0d799,\n  gold: 0xc5ad8b,\n};\n\nexport default Colors;\n","import { MeshPhongMaterial } from \"three\";\n\nexport default class FlatMaterial extends MeshPhongMaterial {\n  constructor(props) {\n    super({\n      flatShading: true,\n      ...props,\n    });\n  }\n}\n","import { TweenMax } from 'gsap';\nimport { Color, CylinderGeometry, Mesh, MeshPhongMaterial } from 'three';\n\nimport Colors from '../../../constants/Colors';\nimport GameObject from '../core/GameObject';\n\nexport default class Gem extends GameObject {\n  constructor(...props) {\n    super(...props);\n    this.getMaterial = this.getMaterial.bind(this);\n    this.getValue = this.getValue.bind(this);\n    this.pickup = this.pickup.bind(this);\n  }\n\n  getGemGeometry = () => {\n    const geometry = new CylinderGeometry(0.6, 1, 0.3, 7, 1);\n    geometry.vertices[geometry.vertices.length - 1].y = -1;\n    geometry.verticesNeedUpdate = true;\n    return geometry;\n  };\n\n  getValue() {\n    return 1;\n  }\n\n  getMaterial() {\n    global.GemMaterial =\n      global.GemMaterial ||\n      new MeshPhongMaterial({\n        color: Colors.blue,\n      });\n    return global.GemMaterial.clone();\n  }\n\n  set _scale(v) {\n    this.scale.set(v, v, v);\n  }\n  get _scale() {\n    return this.scale.y;\n  }\n\n  pickup() {\n    this.destroy();\n    // TODO: maybe particles??\n    this.canBeCollected = false;\n  }\n\n  get gem() {\n    const mesh = new Mesh(this.getGemGeometry(), this.getMaterial());\n    mesh.position.y = 10;\n\n    mesh.scale.multiplyScalar(10);\n    return mesh;\n  }\n\n  loadAsync = async scene => {\n    this.add(this.gem);\n    await super.loadAsync(scene);\n  };\n\n  sat = 0;\n  hue = 19;\n  get color() {\n    return new Color(`hsl(${this.hue}, ${Math.floor(this.sat)}%, 66%)`);\n  }\n\n  _animateColorTo = s => {\n    TweenMax.to(this, 0.5, {\n      sat: s,\n      onUpdate: () => {\n        this._platformMaterial.color = this.color;\n      },\n    });\n  };\n\n  update(delta, time) {\n    this.rotation.y += 4 * delta;\n    // this.rotation.x += 2 * delta;\n\n    // this.x = Math.sin(time * this.speed) * 100;\n    super.update(delta, time);\n  }\n\n  //   animateOut = () => {\n  //     TweenMax.to(this, randomRange(0.5, 0.7), {\n  //       alpha: 0,\n  //       delay: randomRange(0, 0.2),\n  //       y: this.getEndPosition(),\n  //       onComplete: () => this.destroy(),\n  //     });\n  //   };\n\n  //   animateIn = () => {\n  //     this.alpha = 0;\n  //     this.y = this.getEndPosition();\n  //     TweenMax.to(this, randomRange(0.5, 0.7), {\n  //       alpha: 1,\n  //       // delay: randomRange(0, 0.2),\n  //       y: -500,\n  //     });\n  //   };\n}\n","import Constants from 'expo-constants'; \n\nfunction getUserInfo() {\n  const {\n    appOwnership,\n    expoVersion,\n    deviceId,\n    deviceName,\n    deviceYearClass,\n    isDevice,\n    platform,\n  } = Constants;\n  return {\n    appOwnership,\n    expoVersion,\n    deviceId,\n    deviceName,\n    deviceYearClass,\n    isDevice,\n    // platform,\n  };\n}\nexport default getUserInfo;\n","import { dispatch } from \"@rematch/core\";\nimport firebase from \"firebase/app\";\nimport { Alert, AsyncStorage, Dimensions } from \"react-native\";\n\nimport Settings from \"../constants/Settings\";\nimport Fire from \"../ExpoParty/Fire\";\nimport GameStates from \"../Game/GameStates\";\nimport Constants from \"expo-constants\";\nimport * as Facebook from \"expo-facebook\";\nimport { takeSnapshotAsync } from \"expo\";\nimport getDeviceInfo from \"../utils/getUserInfo\";\n\nexport const skins = {\n  state: {},\n  reducers: {\n    setBest: (state, best) => ({ ...state, best }),\n    increment: ({ current, best, isBest, ...props }) => {},\n  },\n  effects: {\n    sync: () => {},\n    unlock: ({ key }, { skins }) => {\n      if (skins) {\n      }\n    },\n  },\n};\n\nexport const score = {\n  state: {\n    current: 0,\n    best: 0,\n    last: null,\n    isBest: false,\n  },\n  reducers: {\n    setBest: (state, best) => ({ ...state, best }),\n    increment: ({ current, best, isBest, ...props }) => {\n      const nextScore = current + 1;\n\n      return {\n        current: nextScore,\n        best: Math.max(nextScore, best),\n        isBest: nextScore > best,\n        ...props,\n      };\n    },\n    _reset: (state) => ({\n      ...state,\n      current: 0,\n      last: state.current,\n      isBest: false,\n    }),\n  },\n  effects: {\n    reset: (props, { score }) => {\n      if (Settings.isFirebaseEnabled) {\n        if (Settings.isEveryScoreBest) {\n          dispatch.score.setHighScore(score.current);\n        } else if (score.isBest) {\n          dispatch.score.setHighScore(score.best);\n        }\n      }\n      dispatch.score._reset();\n    },\n    setHighScore: async (highScore, { user: { displayName, photoURL } }) => {\n      console.log(\"set High score\", highScore);\n      const _displayName = parseName(displayName);\n      const docRef = Fire.shared.doc;\n      try {\n        await Fire.shared.db.runTransaction((transaction) =>\n          transaction.get(docRef).then((doc) => {\n            if (!doc.exists) {\n              throw new Error(\"Document does not exist!\");\n            }\n\n            const data = doc.data();\n            const cloudHighScore = data.score || 0;\n            console.log(\"cloud score\", cloudHighScore);\n            if (Settings.isEveryScoreBest || highScore > cloudHighScore) {\n              transaction.update(docRef, {\n                score: highScore,\n                timestamp: Date.now(),\n                displayName: _displayName,\n                photoURL: photoURL || \"\",\n              });\n            } else {\n              transaction.update(docRef, {\n                ...data,\n                displayName: _displayName,\n                photoURL: photoURL || \"\",\n              });\n              dispatch.score.setBest(cloudHighScore);\n            }\n          })\n        );\n        console.log(\"Successfully wrote score\");\n      } catch ({ message }) {\n        console.log(\"Failed to write score\", message);\n        Alert.alert(message);\n      }\n    },\n  },\n};\n\nexport const currency = {\n  state: {\n    current: 0,\n  },\n  reducers: {\n    change: ({ current, ...props }, value) => {\n      return {\n        current: current + value,\n        ...props,\n      };\n    },\n    _reset: (state) => ({\n      ...state,\n      current: 0,\n    }),\n  },\n  effects: {},\n};\n\nexport const game = {\n  state: GameStates.Menu,\n  reducers: {\n    play: () => GameStates.Playing,\n    menu: () => GameStates.Menu,\n  },\n  effects: {},\n};\n\nexport const muted = {\n  state: false,\n  reducers: {\n    toggle: (state) => !state,\n  },\n  effects: {},\n};\n\nexport const screenshot = {\n  state: null,\n  reducers: {\n    update: (state, uri) => uri,\n  },\n  effects: {\n    updateAsync: async ({ ref }) => {\n      const { width, height } = Dimensions.get(\"window\");\n      const options = {\n        format: \"jpg\",\n        quality: 0.3,\n        result: \"file\",\n        height,\n        width,\n      };\n      const uri = await takeSnapshotAsync(ref, options);\n      dispatch.screenshot.update(uri);\n    },\n  },\n};\n\nasync function incrementDailyReward() {\n  const timestamp = Date.now();\n  return new Promise((res, rej) => {\n    Fire.shared.db\n      .runTransaction((transaction) =>\n        transaction.get(Fire.shared.doc).then((userDoc) => {\n          console.log(\"Fire.shared.doc\", Fire.shared.doc);\n          if (!userDoc.exists) {\n            throw new Error(\"Document does not exist!\");\n          }\n\n          const data = userDoc.data();\n          const { lastRewardTimestamp } = data;\n\n          const hours = Math.abs(lastRewardTimestamp - timestamp) / 36e5; // 60000;\n\n          if (hours >= 24) {\n            if (hours >= 48) {\n              // console.log('More than a day');\n              // It has been more than 1 day since the last visit - break the streak\n              const newDailyVisits = 0;\n              transaction.update(Fire.shared.doc, {\n                dailyVisits: newDailyVisits,\n                lastRewardTimestamp: timestamp,\n              });\n              // / TODO:EVAN: save timestamp\n              // this.userData.lastRewardTimestamp = timestamp;\n              return newDailyVisits;\n            }\n            // console.log('You were here yesterday');\n            // Perfect! It has been 1 day since the last visit - increment streak and save current time\n\n            const dailyVisits = data.dailyVisits || 0;\n            const newDailyVisits = dailyVisits + 1;\n            transaction.update(Fire.shared.doc, {\n              dailyVisits: newDailyVisits,\n              lastRewardTimestamp: timestamp,\n            });\n            // / TODO:EVAN: save timestamp\n            // this.userData.lastRewardTimestamp = timestamp;\n            return newDailyVisits;\n          }\n          // console.log('Within day');\n          transaction.update(Fire.shared.doc, {\n            dailyVisits: data.dailyVisits || 0,\n            lastRewardTimestamp: data.lastRewardTimestamp || Date.now(),\n          });\n\n          // It hasn't been a day yet - do nothing\n\n          return data.dailyVisits || 0;\n        })\n      )\n      .then(res)\n      .catch(rej);\n  });\n}\n\nexport const dailyStreak = {\n  state: 0,\n  reducers: {\n    increment: (s) => s + 1,\n    set: (s, props) => props,\n    reset: () => 0,\n  },\n  effects: {\n    rewardUser: async (streak) => {\n      console.log(\"award\", streak);\n    },\n    compareDaily: async (props, { user }) => {\n      const dailyVisits = await incrementDailyReward();\n\n      if (dailyVisits !== user.dailyVisits) {\n        // console.log('Yay! You came back, your streak is now at: ' + dailyVisits);\n\n        dispatch.dailyStreak.set(dailyVisits);\n        if (dailyVisits > user.dailyVisits) {\n          dispatch.dailyStreak.rewardUser(dailyVisits);\n        }\n        dispatch.user.update({ dailyVisits });\n        // / Give reward!\n      } else {\n        // console.log('ummmm', dailyVisits);\n      }\n    },\n  },\n};\n\nfunction mergeInternal(state, { uid, user }) {\n  const { [uid]: currentUser, ...otherUsers } = state;\n  return {\n    ...otherUsers,\n    [uid]: { ...(currentUser || {}), ...user },\n  };\n}\n\nfunction parseName(inputName, backupName) {\n  let name = inputName || backupName || \"Markipillar\";\n  if (typeof name === \"string\") {\n    name = name.trim();\n  }\n  return name;\n}\n\nexport const leaders = {\n  state: {},\n  reducers: {\n    batchUpdate: (state, users) => {\n      let nextData = state;\n      for (const user of users) {\n        nextData = mergeInternal(nextData, user);\n      }\n      return nextData;\n    },\n    update: (state, { uid, user }) => mergeInternal(state, { uid, user }),\n    set: (state, { uid, user }) => {\n      const { [uid]: currentUser, ...otherUsers } = state;\n      return {\n        ...otherUsers,\n        [uid]: user,\n      };\n    },\n    clear: () => ({}),\n  },\n  effects: {\n    getPagedAsync: async ({ start, size, callback }) => {\n      // This is just a place holder to prevent constant updates in development\n      if (__DEV__) {\n        dispatch.leaders.batchUpdate([\n          {\n            uid: \"0oK50HoGt6PqXG1ApBTroS3IxR23\",\n            user: {\n              key: \"0oK50HoGt6PqXG1ApBTroS3IxR23\",\n              uid: \"0oK50HoGt6PqXG1ApBTroS3IxR23\",\n              displayName: \"Evan Bacon\",\n              dailyVisits: 1,\n              lastRewardTimestamp: 1531172844644,\n              photoURL: \"https://graph.facebook.com/10209775308018161/picture\",\n              rank: 999999,\n              score: 33,\n              timestamp: 1531019432478,\n            },\n          },\n          {\n            uid: \"R2XBuw9im3QBtpU6YYck2tdhpEI3\",\n            user: {\n              key: \"R2XBuw9im3QBtpU6YYck2tdhpEI3\",\n              uid: \"R2XBuw9im3QBtpU6YYck2tdhpEI3\",\n              displayName: \"Expo iPhone X\",\n              appOwnership: \"expo\",\n              dailyVisits: 0,\n              deviceId: \"9E917464-CF47-417B-AA41-07E52190F26A\",\n              deviceName: \"Expo iPhone X\",\n              deviceYearClass: 2017,\n              expoVersion: \"2.4.7.1013849\",\n              isDevice: true,\n              lastRewardTimestamp: 1524197897114,\n              platform: {\n                ios: {\n                  buildNumber: \"2.4.7.1013849\",\n                  model: \"iPhone X\",\n                  platform: \"iPhone10,6\",\n                  systemVersion: \"11.0.1\",\n                  userInterfaceIdiom: \"handset\",\n                },\n              },\n              score: 1,\n              slug: \"crossy-road\",\n            },\n          },\n        ]);\n        return;\n      }\n\n      const collection = firebase\n        .firestore()\n        .collection(Settings.slug)\n        .where(\"score\", \">\", 0);\n\n      let ref = collection.orderBy(\"score\", \"desc\").limit(size);\n      try {\n        if (start) {\n          ref = ref.startAfter(start);\n        }\n        const querySnapshot = await ref.get();\n\n        const data = [];\n        querySnapshot.forEach((doc) => {\n          if (!doc.exists) {\n            console.log(\"leaders.getPagedAsync(): Error: data doesn't exist\", {\n              size,\n              start,\n            });\n          } else {\n            const _data = doc.data();\n            const uid = doc.id;\n            data.push({\n              uid,\n              user: {\n                key: uid,\n                uid,\n                displayName: parseName(_data.displayName, _data.deviceName),\n                ..._data,\n              },\n            });\n          }\n        });\n        console.log(\"Batch update\", data.length, JSON.stringify(data));\n        // console.log(\"Batch update\", data.length, { data });\n        dispatch.leaders.batchUpdate(data);\n        const cursor = querySnapshot.docs[querySnapshot.docs.length - 1];\n        if (callback) callback({ data, cursor, noMore: data.length < size });\n        return;\n      } catch (error) {\n        console.error(\"Error getting documents: \", error);\n      }\n      if (callback) callback({});\n    },\n    getAsync: async ({ uid, callback }) => {\n      try {\n        const ref = firebase.firestore().collection(Settings.slug).doc(uid);\n        const doc = await ref.get();\n        if (!doc.exists) {\n          if (uid === Fire.shared.uid) {\n            const currentUser = firebase.auth().currentUser || {};\n\n            const _displayName = parseName(\n              currentUser.displayName,\n              Constants.deviceName\n            );\n\n            const nUser = {\n              rank: 999999,\n              displayName: _displayName,\n              photoURL: currentUser.photoURL || \"\",\n              score: 0,\n              timestamp: Date.now(),\n            };\n            ref.set(nUser);\n            if (callback) callback(nUser);\n            return;\n          }\n          console.log(`No document: leaders/${uid}`);\n        } else {\n          const user = doc.data();\n          console.log(\"got leader\", user);\n          dispatch.leaders.update({ uid, user });\n          if (callback) callback(user);\n          return;\n        }\n      } catch ({ message }) {\n        console.log(\"Error: leaders.get\", message);\n        alert(message);\n      }\n      if (callback) callback(null);\n    },\n  },\n};\n\nexport const players = {\n  state: {},\n  reducers: {\n    update: (state, { uid, user }) => {\n      const { [uid]: currentUser, ...otherUsers } = state;\n      return {\n        ...otherUsers,\n        [uid]: { ...(currentUser || {}), ...user },\n      };\n    },\n    set: (state, { uid, user }) => {\n      const { [uid]: currentUser, ...otherUsers } = state;\n      return {\n        ...otherUsers,\n        [uid]: user,\n      };\n    },\n    clear: () => ({}),\n  },\n  effects: {\n    getAsync: async ({ uid, callback }) => {\n      // DO NOTHING IN DEV\n      return;\n      try {\n        const ref = firebase.firestore().collection(\"players\").doc(uid);\n        const doc = await ref.get();\n        if (!doc.exists) {\n          console.log(`No document: players/${uid}`);\n          if (uid === Fire.shared.uid) {\n            const currentUser = firebase.auth().currentUser || {};\n            const _displayName = parseName(\n              currentUser.displayName,\n              Constants.deviceName\n            );\n\n            const user = {\n              rank: 999999,\n              displayName: _displayName,\n              score: 0,\n              timestamp: Date.now(),\n            };\n            if (currentUser.photoURL) {\n              user.photoURL = currentUser.photoURL;\n            }\n            ref.add(user);\n            dispatch.players.update({ uid, user });\n            if (callback) callback(user);\n          } else {\n            dispatch.leaders.getAsync({\n              uid,\n              callback: (user) => {\n                if (user) {\n                  dispatch.players.update({ uid, user });\n                }\n                if (callback) callback(user);\n              },\n            });\n          }\n        } else {\n          const user = doc.data();\n          console.log(\"got player\", user);\n          dispatch.players.update({ uid, user });\n          if (callback) callback(user);\n        }\n      } catch ({ message }) {\n        console.log(\"Error: players.get\", message);\n        Alert.alert(message);\n      }\n    },\n  },\n};\n\nfunction reduceFirebaseUser(user) {\n  const nextUser = user;\n  const possibleUpdates = {};\n\n  if (user.providerData && user.providerData.length > 0) {\n    const facebookData = user.providerData[0];\n    nextUser.fbuid = facebookData.uid;\n    const keysToCheck = [\"displayName\", \"photoURL\"];\n    for (const key of keysToCheck) {\n      if (!nextUser[key] && facebookData[key]) {\n        possibleUpdates[key] = facebookData[key];\n      }\n    }\n    if (Object.keys(possibleUpdates).length > 0) {\n      const user = firebase.auth().currentUser;\n      console.log({ possibleUpdates });\n      firebase.auth().currentUser.updateProfile(possibleUpdates);\n    }\n    // //DEBUG Clear\n    // firebase\n    //   .auth()\n    //   .currentUser.updateProfile({ displayName: null, photoURL: null });\n  }\n\n  const {\n    uid,\n    photoURL,\n    phoneNumber,\n    lastLoginAt,\n    isAnonymous,\n    fbuid,\n    displayName,\n    emailVerified,\n    email,\n    createdAt,\n  } = nextUser;\n\n  return {\n    uid,\n    photoURL: photoURL || \"\",\n    phoneNumber,\n    lastLoginAt,\n    isAnonymous,\n    fbuid,\n    displayName: displayName || Constants.deviceName,\n    emailVerified,\n    email,\n    createdAt,\n    ...possibleUpdates,\n\n    // stsTokenManager,\n    // redirectEventId,\n    // authDomain,\n    // appName,\n    // apiKey\n  };\n}\n\nexport const user = {\n  state: null,\n  reducers: {\n    update: (state, props) => ({ ...state, ...props }),\n    set: (state, props) => props,\n    clear: () => null,\n  },\n  effects: {\n    logoutAsync: async (props, { players }) => {\n      try {\n        const uid = firebase.auth().currentUser.uid;\n        await firebase.auth().signOut();\n        // dispatch.leaders.set({ uid, user: null });\n      } catch ({ message }) {\n        console.log(\"ERROR: user.logoutAsync: \", message);\n        Alert.alert(message);\n      }\n    },\n    signInAnonymously: () => {\n      try {\n        firebase.auth().signInAnonymously();\n      } catch ({ message }) {\n        console.log(\"Error: signInAnonymously\", message);\n        Alert.alert(message);\n      }\n    },\n    observeAuth: (props) => {\n      firebase.auth().onAuthStateChanged((user) => {\n        if (!user) {\n          // TODO: Evan: Y tho...\n          dispatch.user.clear();\n          dispatch.user.signInAnonymously();\n        } else {\n          dispatch.user.getAsync();\n          // DISABLED IN DEV\n          // dispatch.leaders.getAsync({ uid: user.uid });\n        }\n      });\n    },\n    getAsync: async (props, { user: localUserData }) => {\n      const nextLocalUserData = localUserData || {};\n      let combinedUserData = {};\n      const firebaseAuthData = firebase.auth().currentUser.toJSON();\n\n      if (firebaseAuthData == null) {\n        console.warn(\n          \"models: Shouldn't call user.getAsync until the user is authed\"\n        );\n        return;\n      }\n      const nextFirebaseAuthData = reduceFirebaseUser(firebaseAuthData);\n      const deviceInfo = getDeviceInfo();\n\n      combinedUserData = {\n        ...deviceInfo,\n        ...nextFirebaseAuthData,\n      };\n\n      const updates = {};\n      for (const key of Object.keys(combinedUserData)) {\n        if (\n          combinedUserData[key] != undefined &&\n          combinedUserData[key] !== nextLocalUserData[key]\n        ) {\n          updates[key] = combinedUserData[key];\n        }\n      }\n      if (Object.keys(updates).length > 0) {\n        dispatch.user.update(updates);\n      }\n      // dispatch.dailyStreak.compareDaily();\n      dispatch.players.update({\n        uid: combinedUserData.uid,\n        user: combinedUserData,\n      });\n      // THIS IS DEV ONLY\n      return;\n\n      if (Settings.isCacheProfileUpdateActive) {\n        const shouldUpdateKey = \"@PillarValley/shouldUpdateProfile\";\n        const something = await getItemWithExpiration(shouldUpdateKey);\n        if (!something) {\n          const some = await setItemWithExpiration(\n            shouldUpdateKey,\n            { update: true },\n            Settings.shouldDelayFirebaseProfileSyncInMinutes\n          );\n          dispatch.user.syncLocalToFirebase();\n        } else {\n          console.log(\"Prevent: syncLocalToFirebase\");\n        }\n      } else {\n        dispatch.user.syncLocalToFirebase();\n      }\n    },\n    mergeDataWithFirebase: async (props) => {\n      const doc = await firebase\n        .firestore()\n        .collection(\"players\")\n        .doc(Fire.shared.uid);\n      const setWithMerge = doc.set(props, { merge: true });\n    },\n    syncLocalToFirebase: async (\n      props,\n      { user: { additionalUserInfo, credential, user, ...otherUserProps } }\n    ) => {\n      console.log(\"syncLocalToFirebase\", otherUserProps);\n      const doc = await firebase\n        .firestore()\n        .collection(\"players\")\n        .doc(Fire.shared.uid);\n      const setWithMerge = doc.set(otherUserProps, { merge: true });\n    },\n    setGameData: (props) => {\n      const { uid, doc } = Fire.shared;\n      if (!uid) {\n        // todo: add error\n        return;\n      }\n      const setWithMerge = doc.set(props, { merge: true });\n    },\n  },\n};\n\nconst FacebookLoginTypes = {\n  Success: \"success\",\n  Cancel: \"cancel\",\n};\n\nfunction deleteUserAsync(uid) {\n  const db = firebase.firestore();\n\n  return Promise.all([\n    db.collection(Settings.slug).doc(uid).delete(),\n    db.collection(\"players\").doc(uid).delete(),\n  ]);\n}\n\nexport const facebook = {\n  state: null,\n  reducers: {\n    set: (state, props) => props,\n    setAuth: (state, props) => ({ ...(state || {}), auth: props }),\n    setGraphResults: (state = {}, props) => {\n      const { graph = {}, ...otherState } = state;\n      return {\n        ...otherState,\n        graph: {\n          ...graph,\n          ...props,\n        },\n      };\n    },\n  },\n  effects: {\n    upgradeAccount: () => {\n      dispatch.facebook.getToken(dispatch.facebook.upgradeAccountWithToken);\n    },\n    login: () => {\n      dispatch.facebook.getToken(dispatch.facebook.loginToFirebaseWithToken);\n    },\n    getToken: async (callback) => {\n      let auth;\n      try {\n        auth = await Facebook.logInWithReadPermissionsAsync(\n          Constants.manifest.facebookAppId,\n          Settings.facebookLoginProps\n        );\n      } catch ({ message }) {\n        alert(\"Facebook Login Error:\", message);\n      }\n      if (auth) {\n        const { type, expires, token } = auth;\n        if (type === FacebookLoginTypes.Success) {\n          dispatch.facebook.set({ expires, token });\n        } else if (type === FacebookLoginTypes.Cancel) {\n          // do nothing, user cancelled\n        } else {\n          // unknown type, this should never happen\n          alert(\"Failed to authenticate\", type);\n        }\n        if (callback) callback(token);\n      }\n    },\n    upgradeAccountWithToken: async (token, { facebook }) => {\n      if (!token && (!facebook || !facebook.token)) {\n        console.warn(\n          \"upgradeAccountWithToken: Can't upgrade account without a token\"\n        );\n        return;\n      }\n      const _token = token || facebook.token;\n      try {\n        const user = await linkAndRetrieveDataWithToken(_token);\n        console.log(\"upgradeAccountWithToken: Upgraded Successful\");\n        dispatch.facebook.authorized(user);\n      } catch ({ message, code, ...error }) {\n        if (code === \"auth/credential-already-in-use\") {\n          // Delete current account while signed in\n          // TODO: This wont work\n          const uid = Fire.shared.uid;\n          if (uid) {\n            console.log(\"Should delete:\", uid);\n            await deleteUserAsync(uid);\n            console.log(\"All deleted\");\n          } else {\n            console.log(\"??? do something:\", uid);\n          }\n          await dispatch.facebook.loginToFirebaseWithToken(_token);\n        } else {\n          // If the account is already linked this error will be thrown\n          console.log(\"Error: upgradeAccountWithToken\", message);\n          console.log(\"error\", code, error);\n          Alert.alert(message);\n        }\n      }\n    },\n    loginToFirebaseWithToken: async (token, { facebook }) => {\n      if (!token && (!facebook || !facebook.token)) {\n        console.warn(\n          \"loginToFirebaseWithToken: Can't login to firebase without a token\"\n        );\n        return;\n      }\n      const _token = token || facebook.token;\n      try {\n        const user = await signInWithToken(_token);\n        dispatch.facebook.authorized(user);\n      } catch ({ message }) {\n        console.log(\"Error: loginToFirebase\");\n        Alert.alert(message);\n      }\n    },\n    callGraphWithToken: async ({ token, params, callback }, { facebook }) => {\n      if (!token && (!facebook || !facebook.token)) {\n        console.warn(\n          \"callGraphWithToken: Can't call the Facebook graph API without a Facebook Auth token\"\n        );\n        return;\n      }\n      const _token = token || facebook.token;\n\n      const paramString = (params || [\"id\", \"name\", \"email\", \"picture\"]).join(\n        \",\"\n      );\n      let results;\n      try {\n        const response = await fetch(\n          `https://graph.facebook.com/me?access_token=${_token}&fields=${params.join(\n            \",\"\n          )}`\n        );\n        results = await response.json();\n        dispatch.facebook.setGraphResults(results);\n      } catch ({ message }) {\n        console.log(\"Error: callGraphWithToken\", message);\n        alert(message);\n      }\n      if (callback) callback(results);\n    },\n    authorized: (user, {}) => {\n      console.log(\"Authorized Facebook\", user);\n      // dispatch.facebook.setAuth(user);\n      let _user = user;\n      if (_user.toJSON) {\n        _user = user.toJSON();\n      }\n      dispatch.user.update(_user);\n    },\n  },\n};\n\nfunction linkAndRetrieveDataWithToken(token) {\n  const credential = firebase.auth.FacebookAuthProvider.credential(token);\n  return firebase\n    .auth()\n    .currentUser.linkAndRetrieveDataWithCredential(credential);\n}\n\nfunction signInWithToken(token) {\n  const credential = firebase.auth.FacebookAuthProvider.credential(token);\n  return firebase.auth().signInAndRetrieveDataWithCredential(credential);\n}\n\n/**\n *\n * @param urlAsKey\n * @param expireInMinutes\n * @returns {Promise.<*>}\n */\n\nasync function setItemWithExpiration(key, value, minutes) {\n  // set expire at\n  value = { value, expireAt: getExpireDate(minutes) };\n  // stringify object\n  const objectToStore = JSON.stringify(value);\n  // store object\n  return AsyncStorage.setItem(key, objectToStore);\n}\n\nasync function getItemWithExpiration(urlAsKey) {\n  let data;\n  await AsyncStorage.getItem(urlAsKey, async (err, value) => {\n    data = JSON.parse(value);\n\n    // there is data in cache && cache is expired\n    if (\n      data !== null &&\n      data.expireAt &&\n      new Date(data.expireAt) < new Date()\n    ) {\n      // clear cache\n      AsyncStorage.removeItem(urlAsKey);\n\n      // update res to be null\n      data = null;\n    } else {\n      console.log(\"read data from cache  \");\n    }\n  });\n  if (data) {\n    return data.value;\n  }\n}\n\nfunction getExpireDate(expireInMinutes) {\n  const now = new Date();\n  const expireTime = new Date(now);\n  expireTime.setMinutes(now.getMinutes() + expireInMinutes);\n  return expireTime;\n}\n","import { init } from '@rematch/core';\nimport createRematchPersist, { getPersistor } from '@rematch/persist';\nimport React from 'react';\nimport { AsyncStorage, View } from 'react-native';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/es/integration/react';\n\nimport * as models from './models';\n\nconst persistPlugin = createRematchPersist({\n  whiteList: ['score', 'user', 'currency'],\n  //   throttle: 5000,\n  version: 2,\n  storage: AsyncStorage,\n});\n\nexport const store = init({\n  models,\n  plugins: [persistPlugin],\n});\nclass Gate extends React.Component {\n\n  render() {\n    return (\n      <Provider store={store}>\n        <PersistGate persistor={getPersistor()}>{this.props.children}</PersistGate>\n      </Provider>\n    );\n  }\n}\n\nexport default Gate;\n","import { TweenMax } from \"gsap\";\n\nimport { Color, Mesh, BoxBufferGeometry } from \"three\";\nimport GameObject from \"../core/GameObject\";\nimport FlatMaterial from \"../utils/flatMaterial\";\nimport randomRange from \"../utils/randomRange\";\nimport Gem from \"./Gem\";\nimport Settings from \"../../../constants/Settings\";\nimport DoubleGem from \"./DoubleGem\";\n\nconst radius = 33.3333333;\n\nconst pointForGem = (r, a) => ({ x: r * Math.cos(a), y: r * Math.sin(a) });\n\nclass PlatformMesh extends Mesh {\n  constructor(material) {\n    global.PlatformGeom =\n      global.PlatformGeom || new BoxBufferGeometry(radius, 1000, radius);\n    super(global.PlatformGeom.clone(), material);\n  }\n\n  set y(y) {\n    this.position.y = y;\n  }\n  get y() {\n    return this.position.y;\n  }\n\n  _alpha = 1;\n  get alpha() {\n    return this._alpha;\n  }\n  set alpha(value) {\n    this._alpha = value;\n    const transparent = value !== 1;\n    if (this.materials) {\n      this.materials.map((material) => {\n        material.transparent = transparent;\n        material.opacity = value;\n      });\n    } else if (this.material) {\n      this.material.transparent = transparent;\n      this.material.opacity = value;\n    }\n\n    this.traverse((child) => {\n      if (child instanceof Mesh) {\n        if (child.materials) {\n          child.materials.map((material) => {\n            material.transparent = transparent;\n            material.opacity = value;\n          });\n        } else if (child.material) {\n          child.material.transparent = transparent;\n          child.material.opacity = value;\n        }\n      }\n    });\n  }\n}\n\nclass Platform extends GameObject {\n  loadAsync = async (scene) => {\n    const color = this.color;\n    global.PlatformGeom =\n      global.PlatformGeom || new BoxBufferGeometry(radius, 1000, radius);\n\n    this._platformMaterial = new FlatMaterial({ color });\n    this.mesh = new PlatformMesh(this._platformMaterial);\n    this.mesh.y = -500;\n    this.add(this.mesh);\n\n    await super.loadAsync(scene);\n  };\n\n  lastAngle = 0;\n\n  updateDirection = (direction) => {\n    this.playerDirection = direction;\n\n    if (this.playerDirection === undefined) return;\n\n    if (this.gems && this.gems.length) {\n      const gemCount = this.gems.length;\n      let degrees = Math.PI * 0.75;\n      if (this.playerDirection) degrees *= this.playerDirection;\n      const subDiv = degrees / gemCount;\n      for (let i = 0; i < gemCount; i += 1) {\n        const gem = this.gems[i];\n        const dir = this.lastAngle + subDiv * i;\n        const { x, y } = pointForGem(Settings.ballDistance, dir);\n        gem.position.x = x;\n        gem.position.z = y;\n        gem.position.y = 0;\n        gem._driftAngle = dir;\n      }\n    }\n  };\n\n  ensureGems = async (count) => {\n    if (!this.gems) this.gems = [];\n\n    while (this.gems.length < count) {\n      let gem;\n      if (count > 3 && this.gems.length === count - 1) {\n        gem = new DoubleGem();\n      } else {\n        gem = new Gem();\n      }\n      gem.scale.set(0.001, 0.001, 0.001);\n      this.gems.push(gem);\n      await this.add(gem);\n    }\n\n    this.updateDirection(this.playerDirection);\n  };\n\n  showGems = async (count) => {\n    if (count > 2) {\n      await this.ensureGems(count);\n\n      for (let i = 0; i < this.gems.length; i += 1) {\n        const gem = this.gems[i];\n        TweenMax.to(gem, 0.3, {\n          alpha: 1,\n          delay: (i + 1) * 0.1, // randomRange(0, 0.2),\n          _scale: 1,\n          y: 0,\n          onComplete: () => (gem.canBeCollected = true),\n        });\n      }\n    }\n  };\n  animateGemsOut = () => {\n    if (this.gems) {\n      for (let i = 0; i < this.gems.length; i += 1) {\n        const gem = this.gems[i];\n        const { x, y } = pointForGem(\n          Settings.ballDistance * 1.5,\n          gem._driftAngle\n        );\n        TweenMax.to(gem, 0.4, {\n          alpha: 0,\n          // delay: i * 0.2, //randomRange(0, 0.2),\n          x,\n          z: y,\n        });\n      }\n    }\n  };\n\n  sat = 0;\n  hue = 19;\n  get color() {\n    return new Color(`hsl(${this.hue}, ${Math.floor(this.sat)}%, 66%)`);\n  }\n\n  _animateColorTo = (s) => {\n    TweenMax.to(this, 0.5, {\n      sat: s,\n      onUpdate: () => {\n        this._platformMaterial.color = this.color;\n      },\n    });\n  };\n\n  becomeCurrent = () => {\n    this._animateColorTo(66);\n  };\n\n  becomeTarget = () => {\n    // this._animateColorTo(33);\n  };\n\n  getEndPosition = () => randomRange(-1500, -1000);\n\n  animateOut = () => {\n    this.animateGemsOut();\n    TweenMax.to(this.mesh, randomRange(0.5, 0.7), {\n      alpha: 0,\n      delay: randomRange(0, 0.2),\n      y: this.getEndPosition(),\n      onComplete: () => this.destroy(),\n    });\n  };\n\n  animateIn = () => {\n    this.mesh.alpha = 0;\n    this.mesh.y = this.getEndPosition();\n    TweenMax.to(this.mesh, randomRange(0.5, 0.7), {\n      alpha: 1,\n      // delay: randomRange(0, 0.2),\n      y: -500,\n    });\n  };\n}\n\nexport default Platform;\n","import { Mesh, CylinderBufferGeometry, MeshPhongMaterial } from \"three\";\n\nimport { Power2 as Cubic, TweenMax } from \"gsap\";\n\nimport Colors from \"../../../constants/Colors\";\nimport Circle from \"../../Circle\";\nimport GameObject from \"../core/GameObject\";\nimport Settings from \"../../../constants/Settings\";\n\nclass PlayerBall extends GameObject {\n  loadAsync = async (scene) => {\n    const radius = 26.6666667 / 2;\n\n    global.PlayerBallGeom =\n      global.PlayerBallGeom ||\n      new CylinderBufferGeometry(radius, radius, 9, 24);\n\n    global.PlayerBallMaterial = global.PlayerBallMaterial = new MeshPhongMaterial(\n      {\n        color: Colors.gold,\n      }\n    );\n    const mesh = new Mesh(\n      global.PlayerBallGeom.clone(),\n      global.PlayerBallMaterial.clone()\n    );\n    mesh.position.y = 4.5;\n    this.add(mesh);\n\n    const circle = new Circle({ radius: 5, color: 0xffffff });\n    circle.rotation.x = -Math.PI / 2;\n    circle.position.y = 10;\n    this.circle = circle;\n    this.resetCircle();\n    this.add(circle);\n\n    await super.loadAsync(scene);\n  };\n\n  resetCircle = () => {\n    this.circle.visible = false;\n    this.circle.scale.x = 0.001;\n    this.circle.scale.y = 0.001;\n    this.circle.alpha = 0.5;\n  };\n\n  hide = (props) => {\n    props = props || {};\n\n    this.resetCircle();\n    TweenMax.to(this, props.duration || 0.7, {\n      alpha: 0,\n      ...props,\n    });\n  };\n\n  landed = (perfection) => {\n    if (!Settings.circleEnabled) return;\n\n    this.circle.visible = true;\n\n    const duration = 0.7;\n    const scale = 5 + 15 * perfection; // randomRange(10, 20);\n\n    TweenMax.to(this.circle.scale, duration, {\n      x: scale,\n      y: scale,\n      ease: Cubic.easeOut,\n    });\n\n    TweenMax.to(this.circle, duration, {\n      alpha: 0,\n      ease: Cubic.easeOut,\n      onComplete: this.resetCircle,\n    });\n  };\n}\n\nexport default PlayerBall;\n","// @flow\nimport Constants from \"expo-constants\";\nimport { Dimensions, Platform } from \"react-native\";\n\nconst debug = __DEV__;\nconst Settings = {\n  facebookLoginProps: {\n    permissions: [\n      \"public_profile\",\n      \"email\",\n      // 'user_friends'\n    ],\n  },\n  circleEnabled: false,\n  isSimulator: !Constants.isDevice,\n  isFirebaseEnabled: false, // !debug || false,\n  isAutoStartEnabled: false, //! debug && true,\n  isScreenshotEnabled: false, //!debug || false,\n  isMotionMenuEnabled: !debug || true,\n  isComposerEnabled: false, //! debug || false,\n  debug,\n  ballDistance: 60,\n  rotationSpeed: 4,\n  epsilon: 15,\n  angleRange: [25, 155],\n  visibleTargets: 5,\n  slug: debug ? \"crossy-road\" : \"users\",\n  isEveryScoreBest: debug && false,\n  isCacheProfileUpdateActive: true, //!debug || false,\n  shouldDelayFirebaseProfileSyncInMinutes: 60,\n\n  canEditPhoto: false,\n  leaderPageSize: 25,\n};\n\nexport default Settings;\n","import React from \"react\";\nimport { StyleSheet, View } from \"react-native\";\n\nimport Settings from \"../constants/Settings\";\nimport GameState from \"../Game\";\nimport GraphicsView from \"./GraphicsView\";\nimport Footer from \"./Footer\";\nimport ScoreMeta from \"./ScoreMeta\";\nimport TouchableView from \"./TouchableView\";\n\nclass Game extends React.Component {\n  componentWillMount() {\n    if (!Settings.isSimulator) {\n      this.machine = new GameState();\n    }\n  }\n  componentWillUnmount() {\n    this.machine = null;\n  }\n\n  onContextCreate = async (props) => {\n    await this.machine.onContextCreateAsync(props);\n\n    this.props.onLoad();\n  };\n\n  onLicensesPress = () => {\n    this.props.navigation.navigate(\"Licenses\");\n  };\n  onLeaderboardPress = () => {\n    if (Settings.isFirebaseEnabled) {\n      this.props.navigation.navigate(\"Social\");\n    } else {\n      alert(\"Expo Online is disabled\");\n    }\n  };\n\n  get gameScreen() {\n    if (Settings.isSimulator) {\n      return <View style={{ flex: 1, backgroundColor: \"red\" }} />;\n    }\n    return (\n      <TouchableView\n        style={styles.touchable}\n        onTouchesBegan={this.machine.onTouchesBegan}\n      >\n        <GraphicsView\n          ref={(ref) => (global.gameRef = this.ref = ref)}\n          key=\"game\"\n          onContextCreate={this.onContextCreate}\n          onRender={this.machine.onRender}\n          onResize={this.machine.onResize}\n        />\n      </TouchableView>\n    );\n  }\n\n  render() {\n    return (\n      <View style={styles.container} pointerEvents=\"box-none\">\n        {this.gameScreen}\n        <ScoreMeta />\n        <Footer\n          onLeaderboardPress={this.onLeaderboardPress}\n          onLicensesPress={this.onLicensesPress}\n        />\n      </View>\n    );\n  }\n}\n\nexport default Game;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  touchable: {\n    flex: 1,\n    overflow: \"hidden\",\n  },\n});\n","// @flow\nimport { dispatch } from \"@rematch/core\";\nimport * as Haptics from \"expo-haptics\";\nimport { DeviceMotion } from \"expo-sensors\";\nimport { loadTextureAsync } from \"expo-three\";\nimport { Back, Expo as ExpoEase, TweenMax } from \"gsap\";\nimport { Dimensions, Platform as RNPlatform } from \"react-native\";\nimport * as THREE from \"three\";\n\nimport Settings from \"../constants/Settings\";\nimport GameObject from \"./engine/core/GameObject\";\nimport Lighting from \"./engine/entities/Lighting\";\nimport Platform from \"./engine/entities/Platform\";\nimport PlayerBall from \"./engine/entities/PlayerBall\";\nimport FlatMaterial from \"./engine/utils/flatMaterial\";\nimport randomRange from \"./engine/utils/randomRange\";\nimport GameStates from \"./GameStates\";\n\nfunction distance(p1, p2) {\n  const a = p1.x - p2.x;\n  const b = p1.z - p2.z;\n\n  return Math.sqrt(a * a + b * b);\n}\n\nclass Game extends GameObject {\n  state = GameStates.Menu;\n\n  balls = [];\n  targets = [];\n  offset = { x: 0, z: 0 };\n  taps = 0;\n  hue = 19;\n\n  constructor(width, height, renderer) {\n    super();\n    this._game = this;\n    this.renderer = renderer;\n    this._width = width;\n    this._height = height;\n\n    if (Settings.isAutoStartEnabled) {\n      this.setGameState(GameStates.Playing);\n    }\n\n    this.observeMotion();\n  }\n\n  observeMotion = () => {\n    if (!Settings.isMotionMenuEnabled) {\n      return;\n    }\n\n    if (RNPlatform.OS !== \"web\") DeviceMotion.setUpdateInterval(30);\n\n    this._subscribe();\n  };\n\n  _subscribe = () => {\n    if (RNPlatform.OS === \"web\") {\n      const last = { x: 0, y: 0 };\n      window.addEventListener(\"mousemove\", ({ pageX: x, pageY: y }) => {\n        const _index = -0.1;\n\n        const { width, height } = Dimensions.get(\"window\");\n        this.offset = {\n          x: (width / 2 - x) * _index,\n          z: (height / 2 - y) * _index,\n        };\n      });\n    } else {\n      const _index = -4;\n\n      this._subscription = DeviceMotion.addListener(\n        ({ accelerationIncludingGravity = {} }) => {\n          this.offset = {\n            x: accelerationIncludingGravity.x * _index,\n            z: accelerationIncludingGravity.z * _index,\n          };\n        }\n      );\n    }\n  };\n\n  _unsubscribe = () => {\n    this._subscription && this._subscription.remove();\n    this._subscription = null;\n  };\n\n  createScene = () => {\n    const scene = new THREE.Scene();\n    const color = this.color;\n    scene.background = color;\n    scene.fog = new THREE.Fog(color, 100, 950);\n\n    scene.add(this);\n    return scene;\n  };\n\n  createCameraAsync = async (width, height) => {\n    const camera = new THREE.PerspectiveCamera(70, width / height, 1, 10000);\n    camera.position.set(20, 260, 100);\n    camera.lookAt(new THREE.Vector3());\n    camera.ogPosition = camera.position.clone();\n\n    return camera;\n  };\n\n  generateDirection = () => {\n    this.direction = Math.round(randomRange(0, 1)) * 2 - 1;\n  };\n\n  async reset() {\n    super.reset();\n\n    if (this.gameGroup) {\n      this.gameGroup.z = 0;\n      this.gameGroup.x = 0;\n    }\n    this.cachedRotationVelocity = Settings.rotationSpeed;\n    this.steps = 0;\n    this.generateDirection();\n\n    this.rotationAngle = 0;\n    this.mainBall = 1;\n\n    if (this.balls[0]) {\n      this.balls[0].x = 0;\n      this.balls[0].z = Settings.ballDistance;\n    }\n    if (this.balls[1]) {\n      this.balls[1].x = 0;\n      this.balls[1].z = 0;\n    }\n    this.alpha = 1;\n    this.balls[1 - this.mainBall].scale.set(1, 1, 1);\n    this.balls[this.mainBall].scale.set(1, 1, 1);\n\n    for (const target of this.targets) {\n      target.destroy();\n    }\n    this.targets = [];\n    const target = await this.targetGroup.add(new Platform());\n    if (target) {\n      target.x = 0;\n      target.z = this.balls[0].z;\n      this.targets.push(target);\n    }\n    for (let i = 0; i < this.getVisibleTargetsCount(); i++) {\n      await this.addTarget();\n    }\n\n    this.targets[0].becomeCurrent();\n    this.targets[1].becomeTarget();\n  }\n\n  get color() {\n    return new THREE.Color(`hsl(${this.hue}, 88%, 66%)`);\n  }\n\n  async loadAsync() {\n    this.scene = this.createScene();\n\n    this.camera = await this.createCameraAsync(this._width, this._height);\n\n    const types = [\n      new Lighting(),\n      //  new Particles()\n    ];\n    const promises = types.map((type) => this.add(type));\n    const [lighting, particles] = await Promise.all(promises);\n    this.particles = particles;\n    if (this.state === GameStates.Menu) {\n      await this.loadMenu();\n      dispatch.game.menu();\n    } else {\n      dispatch.game.play();\n      await this.loadGame();\n    }\n\n    await super.loadAsync(this.scene);\n  }\n\n  get currentTarget() {\n    return this.targets[0];\n  }\n\n  loadMenu = async () => {\n    this.observeMotion();\n\n    const topMaterial = async (res, color) => {\n      const image = new THREE.MeshBasicMaterial({\n        map: await loadTextureAsync({ asset: res }),\n      });\n\n      const material = new FlatMaterial({ color });\n\n      return [material, material, image, material, material, material];\n    };\n\n    const makePillar = async (res, color = 0xdb7048) => {\n      const radius = 33.3333333;\n\n      const materials = await topMaterial(res, color);\n\n      const mesh = new THREE.Mesh(\n        new THREE.CubeGeometry(radius * 3, 1000, radius, 1, 1, 1),\n        materials\n      );\n      mesh.position.y = -500;\n      return mesh;\n    };\n\n    const titleGroup = new THREE.Object3D();\n    const offset = -30;\n    titleGroup.position.x = offset;\n    titleGroup.position.z = -200;\n\n    const pillar = await makePillar(require(\"../assets/images/PILLAR.png\"));\n    titleGroup.add(pillar);\n\n    pillar.position.y = -1100;\n    TweenMax.to(pillar.position, 1.1, {\n      y: -500,\n      ease: Back.easeOut,\n      delay: 0,\n    });\n\n    const pillarB = await makePillar(require(\"../assets/images/VALLEY.png\"));\n    titleGroup.add(pillarB);\n\n    if (pillarB.position) {\n      pillarB.position.y = -1100;\n      pillarB.position.x = 55;\n      pillarB.position.z = 55;\n      TweenMax.to(pillarB.position, 1.0, {\n        y: -530,\n        ease: Back.easeOut,\n        delay: 0.1,\n      });\n    }\n    const pillarC = await makePillar(\n      require(\"../assets/images/BEGIN.png\"),\n      0xedcbbf\n    );\n    titleGroup.add(pillarC);\n\n    pillarC.position.y = -1100;\n    pillarC.position.x = 30;\n    pillarC.position.z = 105;\n    TweenMax.to(pillarC.position, 1.0, {\n      y: -540,\n      ease: ExpoEase.easeOut,\n      delay: 0.2,\n    });\n\n    const normalizer = new THREE.Object3D();\n    normalizer.add(titleGroup);\n    this.scene.add(normalizer);\n\n    this.pillars = [pillar, pillarB, pillarC];\n    this.titleGroup = normalizer;\n  };\n\n  loadGame = async () => {\n    this.cachedRotationVelocity = Settings.rotationSpeed;\n    this.steps = 0;\n    this.generateDirection();\n    this.gameGroup = await this.add(new GameObject());\n    this.targetGroup = await this.gameGroup.add(new GameObject());\n    this.ballGroup = await this.gameGroup.add(new GameObject());\n    const ballA = await this.ballGroup.add(new PlayerBall());\n    ballA.x = 0;\n    ballA.z = Settings.ballDistance;\n    const ballB = await this.ballGroup.add(new PlayerBall());\n    ballB.x = 0;\n    ballB.z = 0;\n    this.balls = [ballA, ballB];\n    this.alpha = 1;\n    this.rotationAngle = 0;\n    this.mainBall = 1;\n    this.balls[1 - this.mainBall].scale.set(1, 1, 1);\n    this.balls[this.mainBall].scale.set(1, 1, 1);\n    const target = await this.targetGroup.add(new Platform());\n    target.x = 0;\n    target.z = this.balls[0].z;\n    this.targets.push(target);\n    for (let i = 0; i < this.getVisibleTargetsCount(); i++) {\n      await this.addTarget();\n    }\n    this.targets[0].becomeCurrent();\n  };\n  score = 0;\n\n  startGame = () => {\n    if (this.state === GameStates.playing) {\n      return;\n    }\n    this._unsubscribe();\n    TweenMax.to(this.titleGroup.position, 1.0, {\n      y: -1100,\n      ease: ExpoEase.easeOut,\n      // delay: 0.2,\n      onComplete: async () => {\n        await this.loadGame();\n        this.setGameState(GameStates.playing);\n      },\n    });\n  };\n\n  setGameState = (state) => {\n    this.state = state;\n  };\n\n  onTouchesBegan = async ({ pageX: x, pageY: y }) => {\n    if (this.state === GameStates.Menu) {\n      this.startGame();\n    } else {\n      this.changeBall();\n\n      if (Math.round(randomRange(0, 3)) === 0) {\n        this.takeScreenshot();\n      }\n    }\n  };\n\n  animateBackgroundColor = (input) => {\n    TweenMax.to(this, 2, {\n      hue: (input * randomRange(3, 20)) % 50,\n      onUpdate: () => {\n        const color = this.color;\n        this.scene.background = color;\n        this.scene.fog = new THREE.Fog(color, 100, 950);\n      },\n    });\n    TweenMax.to(this.renderer, 1.0, {\n      y: -530,\n      ease: Back.easeOut,\n      delay: 0.1,\n    });\n  };\n\n  runHapticsWithValue = (perfection: number) => {\n    if (RNPlatform.OS === \"ios\") {\n      if (perfection < 0.3) {\n        Haptics.impact(Haptics.ImpactFeedbackStyle.Light);\n      } else if (perfection < 0.6) {\n        Haptics.impact(Haptics.ImpactFeedbackStyle.Medium);\n      } else {\n        Haptics.impact(Haptics.ImpactFeedbackStyle.Heavy);\n      }\n    }\n  };\n\n  valueForPerfection = (perfection) => {\n    return Math.floor(perfection * 6);\n  };\n\n  testCollisionWithGem = (gem) => {\n    const distanceFromTarget = distance(\n      this.balls[this.mainBall].position,\n      gem.position\n    );\n\n    return distanceFromTarget < 20;\n  };\n\n  changeBall = async () => {\n    this.taps += 1;\n    if (this.taps % 3 === 0) {\n      this.animateBackgroundColor(this.taps);\n    }\n    if (!this.loaded) {\n      return;\n    }\n\n    const distanceFromTarget = distance(\n      this.balls[this.mainBall].position,\n      this.targets[1].position\n    );\n\n    if (distanceFromTarget < Settings.epsilon) {\n      const perfection = 1 - distanceFromTarget / Settings.epsilon;\n      dispatch.game.play();\n      dispatch.score.increment();\n      this.score += 1;\n      this.runHapticsWithValue(perfection);\n\n      if (this.particles) {\n        this.particles.impulse();\n      }\n\n      this.balls[this.mainBall].x = this.targets[1].x;\n      this.balls[this.mainBall].z = this.targets[1].z;\n\n      this.generateDirection();\n\n      const target = this.targets.shift();\n      if (this.currentTarget)\n        this.currentTarget.updateDirection(this.direction);\n\n      target.animateOut();\n      this.targets[0].becomeCurrent();\n\n      if (this.score > 3) {\n        this.targets[0].showGems(this.valueForPerfection(perfection));\n      }\n      this.targets[1].becomeTarget();\n\n      this.balls[this.mainBall].landed(perfection);\n\n      this.mainBall = 1 - this.mainBall;\n\n      this.balls[1 - this.mainBall].scale.set(1, 1, 1);\n      this.balls[this.mainBall].scale.set(1, 1, 1);\n      this.rotationAngle -= 180;\n\n      while (this.targets.length < this.getVisibleTargetsCount()) {\n        await this.addTarget();\n      }\n\n      this.syncTargetsAlpha();\n    } else {\n      this.gameOver();\n    }\n  };\n\n  getVisibleTargetsCount = () => {\n    const level = Math.floor(this.score / 10);\n    if (level < 4) {\n      return Math.max(4, Settings.visibleTargets - level);\n    }\n    return Math.max(3, Settings.visibleTargets - (this.score % 5));\n  };\n\n  alphaForTarget = (i) => {\n    const inverse = i - 1;\n    const alpha = inverse / this.getVisibleTargetsCount();\n    return 1 - alpha;\n  };\n\n  syncTargetsAlpha = () => {\n    for (let i = 0; i < this.targets.length; i++) {\n      this.targets[i].alpha = this.alphaForTarget(i);\n    }\n  };\n\n  takeScreenshot = async () => {\n    if (this.screenShotTaken || !Settings.isScreenshotEnabled) {\n      return;\n    }\n    this.screenShotTaken = true;\n\n    await dispatch.screenshot.updateAsync({\n      ref: global.gameRef,\n      width: this._width,\n      height: this._height,\n    });\n  };\n\n  gameOver = (animate = true) => {\n    this.takeScreenshot();\n    this.screenShotTaken = false;\n    dispatch.score.reset();\n    this.score = 0;\n    dispatch.game.menu();\n\n    this.cachedRotationVelocity = 0;\n\n    if (animate) {\n      this.balls[this.mainBall].hide({ onComplete: () => this.reset() });\n      this.balls[1 - this.mainBall].hide({ duration: 0.4 });\n\n      for (const target of this.targets) {\n        target.animateOut();\n      }\n    } else {\n      this.reset();\n    }\n  };\n\n  addTarget = async () => {\n    this.steps++;\n    const startX = this.targets[this.targets.length - 1].x;\n    const startZ = this.targets[this.targets.length - 1].z;\n    const target = await this.targetGroup.add(new Platform());\n    const randomAngle = randomRange(\n      Settings.angleRange[0] + 90,\n      Settings.angleRange[1] + 90\n    );\n\n    const radians = THREE.Math.degToRad(randomAngle);\n    target.x = startX + Settings.ballDistance * Math.sin(radians);\n    target.z = startZ + Settings.ballDistance * Math.cos(radians);\n\n    const last = this.targets[this.targets.length - 1];\n    this.targets.push(target);\n    target.lastAngle = Math.atan2(last.z - target.z, last.x - target.x);\n    target.alpha = this.alphaForTarget(this.targets.length);\n    target.animateIn();\n  };\n\n  update(delta, time) {\n    const easing = 0.03;\n\n    if (this.state === GameStates.Menu) {\n      this.camera.position.z -=\n        (this.offset.z + this.camera.position.z) * easing;\n      this.camera.position.x -=\n        (this.offset.x + this.camera.position.x) * easing;\n    } else {\n      this.camera.position.z = this.camera.ogPosition.z;\n      this.camera.position.x = this.camera.ogPosition.x;\n      if (!this.loaded) {\n        return;\n      }\n      super.update(delta, time);\n\n      const ballPosition = this.balls[this.mainBall].position;\n      const targetPosition = this.targets[1].position;\n      const distanceFromTarget = distance(ballPosition, targetPosition);\n\n      const isFirst = this.steps <= this.getVisibleTargetsCount();\n      const minScale = this.balls[this.mainBall].scale.x <= 0.01;\n\n      if (!isFirst) {\n        if (minScale) {\n          this.balls[this.mainBall].scale.set(1, 1, 1);\n          this.gameOver(false);\n        } else {\n          const scale = Math.max(\n            0.01,\n            this.balls[this.mainBall].scale.x - 0.3 * delta\n          );\n          this.balls[this.mainBall].scale.set(scale, 1, scale);\n        }\n      }\n\n      const speed = Math.min(\n        this.cachedRotationVelocity + this.score * 0.05,\n        6\n      );\n      this.rotationAngle = (this.rotationAngle + speed * this.direction) % 360;\n\n      const radians = THREE.Math.degToRad(this.rotationAngle);\n\n      this.balls[this.mainBall].x =\n        this.balls[1 - this.mainBall].x -\n        Settings.ballDistance * Math.sin(radians);\n      this.balls[this.mainBall].z =\n        this.balls[1 - this.mainBall].z +\n        Settings.ballDistance * Math.cos(radians);\n\n      const distanceX = this.balls[1 - this.mainBall].position.x;\n      const distanceZ = this.balls[1 - this.mainBall].position.z;\n\n      const easing = 0.03;\n      this.gameGroup.z -= (distanceZ - 0 + this.gameGroup.z) * easing;\n      this.gameGroup.x -= (distanceX - 0 + this.gameGroup.x) * easing;\n\n      if (\n        this.currentTarget &&\n        this.currentTarget.gems &&\n        this.currentTarget.gems.length\n      ) {\n        const collideGems = this.currentTarget.gems.filter(\n          (gem) => gem.canBeCollected && gem._driftAngle !== undefined\n        );\n        if (collideGems.length) {\n          let _ballPosition = new THREE.Vector3();\n          this.balls[this.mainBall].getWorldPosition(_ballPosition);\n          for (const gem of collideGems) {\n            let position = new THREE.Vector3();\n            gem.getWorldPosition(position);\n            const angleDist = distance(_ballPosition, position);\n            if (angleDist < 15) {\n              gem.pickup();\n              dispatch.currency.change(gem.getValue());\n            }\n          }\n        }\n      }\n    }\n  }\n\n  onResize = ({ width, height }) => {\n    this.camera.aspect = width / height;\n    this.camera.updateProjectionMatrix();\n  };\n}\n\nexport default Game;\n","import { HemisphereLight, DirectionalLight } from 'three';\n\nimport GameObject from '../core/GameObject';\n\nclass Lighting extends GameObject {\n  get hemisphere() {\n    return new HemisphereLight(0xaaaaaa, 0x000000, 0.9);\n  }\n\n  get shadow() {\n    const light = new DirectionalLight(0xffffff, 0.9);\n    light.position.set(0, 350, 350);\n    return light;\n  }\n\n  async loadAsync(scene) {\n    this.add(this.hemisphere);\n    this.add(this.shadow);\n    // return await super.loadAsync(scene);\n  }\n}\n\nexport default Lighting;\n","import * as Haptics from \"expo-haptics\";\nimport { Platform } from \"react-native\";\nimport * as THREE from \"three\";\n\nimport Colors from \"../../../constants/Colors\";\nimport Gem from \"./Gem\";\n\nexport default class DoubleGem extends Gem {\n  pickup() {\n    super.pickup();\n    if (Platform.OS !== \"ios\") return;\n    try {\n      Haptics.selection();\n    } catch (error) {\n      /* not supported */\n    }\n  }\n  getValue() {\n    return 2;\n  }\n  getMaterial() {\n    global.DoubleGemMaterial =\n      global.DoubleGemMaterial ||\n      new THREE.MeshPhongMaterial({\n        color: Colors.red,\n      });\n    return global.DoubleGemMaterial.clone();\n  }\n}\n","import {\n  Shape,\n  Mesh,\n  DoubleSide,\n  ShapeBufferGeometry,\n  MeshPhongMaterial,\n} from \"three\";\n\nclass Circle extends Shape {\n  constructor(radius) {\n    super();\n    this.moveTo(0, radius);\n    this.quadraticCurveTo(radius, radius, radius, 0);\n    this.quadraticCurveTo(radius, -radius, 0, -radius);\n    this.quadraticCurveTo(-radius, -radius, -radius, 0);\n    this.quadraticCurveTo(-radius, radius, 0, radius);\n  }\n}\n\nclass CircleMesh extends Mesh {\n  constructor({ radius, color }) {\n    const shape = new Circle(radius);\n    const geometry = new ShapeBufferGeometry(shape);\n    const mat = new MeshPhongMaterial({\n      color,\n      transparent: true,\n      // side: DoubleSide,\n    });\n    super(geometry, mat);\n    this.mat = mat;\n  }\n  _alpha = 1;\n  set alpha(value) {\n    this._alpha = value;\n    const transparent = value !== 1;\n    if (this.materials) {\n      this.materials.map((material) => {\n        material.transparent = transparent;\n        material.opacity = value;\n      });\n    } else if (this.material) {\n      this.material.transparent = transparent;\n      this.material.opacity = value;\n    }\n  }\n\n  get alpha() {\n    return this._alpha;\n  }\n\n  explode = () => {\n    // todo tween disapate animation\n  };\n\n  update = () => {};\n}\n\nexport default CircleMesh;\n","import invariant from \"invariant\";\nimport React from \"react\";\nimport { AppState, PixelRatio, StyleSheet, Text, View } from \"react-native\";\nimport uuidv4 from \"uuid/v4\";\n\nimport { GLView } from \"expo-gl\";\n\nexport default class GraphicsView extends React.Component {\n  nativeRef;\n  gl;\n\n  static defaultProps = {\n    arRunningProps: {},\n    arCameraProps: {},\n    isShadowsEnabled: false,\n  };\n\n  state = {\n    appState: AppState.currentState,\n    id: uuidv4(),\n  };\n\n  componentDidMount() {\n    AppState.addEventListener(\"change\", this.handleAppStateChangeAsync);\n  }\n\n  componentWillUnmount() {\n    this.destroy();\n    AppState.removeEventListener(\"change\", this.handleAppStateChangeAsync);\n  }\n\n  destroy = () => {\n    this.gl = null;\n    this.nativeRef = null;\n    cancelAnimationFrame(this.rafID);\n  };\n\n  handleAppStateChangeAsync = (nextAppState) => {\n    if (\n      this.state.appState.match(/inactive|background/) &&\n      nextAppState === \"active\"\n    ) {\n      // console.log('App has come to the foreground!')\n      const { onShouldReloadContext } = this.props;\n      if (onShouldReloadContext && onShouldReloadContext()) {\n        this.destroy();\n        this.setState({ appState: nextAppState, id: uuidv4() });\n        return;\n      }\n    }\n    this.setState({ appState: nextAppState });\n  };\n\n  render() {\n    const {\n      isArEnabled,\n      shouldIgnoreSafeGuards,\n      style,\n      glviewStyle,\n    } = this.props;\n\n    return (\n      <GLView\n        key={this.state.id}\n        onLayout={this._onLayout}\n        style={[styles.container, glviewStyle]}\n        onContextCreate={this._onContextCreate}\n      />\n    );\n  }\n\n  _saveNativeRef = (ref) => {\n    this.nativeRef = ref;\n  };\n\n  _onLayout = ({\n    nativeEvent: {\n      layout: { x, y, width, height },\n    },\n  }) => {\n    if (!this.gl) {\n      return;\n    }\n    if (this.props.onResize) {\n      const scale = PixelRatio.get();\n      this.props.onResize({ x, y, width, height, scale, pixelRatio: scale });\n    }\n  };\n\n  _onContextCreate = async (gl) => {\n    this.gl = gl;\n\n    const { onContextCreate, onRender } = this.props;\n\n    invariant(\n      onRender,\n      \"expo-graphics: GraphicsView.onContextCreate(): `onRender` must be defined.\"\n    );\n    invariant(\n      onContextCreate,\n      \"expo-graphics: GraphicsView.onContextCreate(): `onContextCreate` must be defined.\"\n    );\n\n    await onContextCreate({\n      gl,\n      width: gl.drawingBufferWidth,\n      height: gl.drawingBufferHeight,\n      scale: PixelRatio.get(),\n      // ...props,\n    });\n    let lastFrameTime;\n    const render = () => {\n      if (this.gl) {\n        const now = 0.001 * getNow();\n        const delta =\n          typeof lastFrameTime !== \"undefined\" ? now - lastFrameTime : 0.16666;\n        this.rafID = requestAnimationFrame(render);\n\n        onRender(delta);\n        // NOTE: At the end of each frame, notify `Expo.GLView` with the below\n        gl.endFrameEXP();\n\n        lastFrameTime = now;\n      }\n    };\n    render();\n  };\n}\n\nconst getNow = global.nativePerformanceNow || Date.now;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  errorContainer: {\n    backgroundColor: \"red\",\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n});\n","import FontAwesome from \"@expo/vector-icons/FontAwesome\";\nimport React from \"react\";\nimport { StyleSheet, Text, View } from \"react-native\";\nimport { useSafeArea } from \"react-native-safe-area-context\";\nimport { connect } from \"react-redux\";\n\nfunction ScoreMeta({ current, best, currency }) {\n  const { top } = useSafeArea();\n  return (\n    <View style={[styles.container, { top }]}>\n      <View style={{ flexDirection: \"row\" }}>\n        <Text style={[styles.text, styles.highScore]}>{best}</Text>\n        <Text style={[styles.text, styles.score]}>{current}</Text>\n      </View>\n      {!currency && (\n        <View style={{ flexDirection: \"row\", alignItems: \"center\" }}>\n          <Text style={[styles.text, styles.currency]}>{currency}</Text>\n          <FontAwesome\n            name=\"diamond\"\n            size={20}\n            color=\"lime\"\n            style={{ marginHorizontal: 6, userSelect: \"none\" }}\n          />\n        </View>\n      )}\n    </View>\n  );\n}\n\nexport default connect(\n  ({ score: { current, best }, currency: { current: currency } }) => ({\n    current,\n    best,\n    currency,\n  })\n)(ScoreMeta);\n\nconst styles = StyleSheet.create({\n  container: {\n    position: \"absolute\",\n    left: 0,\n    right: 0,\n    paddingLeft: 12,\n    paddingRight: 12,\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  text: {\n    fontFamily: \"GothamNarrow-Book\",\n    opacity: 0.8,\n    fontSize: 48,\n    backgroundColor: \"transparent\",\n    userSelect: \"none\",\n  },\n  score: {\n    color: \"white\",\n  },\n  highScore: {\n    color: \"yellow\",\n    textAlign: \"right\",\n    fontSize: 24,\n    marginRight: 6,\n  },\n  currency: {\n    fontSize: 24,\n    color: \"white\",\n  },\n});\n","import React from \"react\";\nimport { View, StyleSheet } from \"react-native\";\n\nexport default function TouchableView({\n  onTouchesBegan,\n  style = {},\n  ...props\n}) {\n  return (\n    <View\n      style={StyleSheet.flatten([{ flex: 1, cursor: \"pointer\" }, style])}\n      tabIndex=\"0\"\n      onKeyDown={(e) => {\n        if (e.keyCode === 13 || e.keyCode === 32) {\n          onTouchesBegan(e);\n        }\n      }}\n      onMouseDown={onTouchesBegan}\n      onTouchStart={onTouchesBegan}\n      onTouchEnd={(e) => e.preventDefault()}\n      {...props}\n    />\n  );\n}\n","import * as React from \"react\";\nimport {\n  Image,\n  Linking,\n  StyleSheet,\n  Text,\n  TouchableOpacity,\n  View,\n} from \"react-native\";\nimport FontAwesome from \"@expo/vector-icons/FontAwesome\";\n\n// import { A } from '@expo/html-elements';\n\nexport default function LicensesListItem({\n  image,\n  userUrl,\n  username,\n  name,\n  version,\n  licenses,\n  repository,\n  licenseUrl,\n  parents,\n}) {\n  let title = name;\n  if (username) {\n    if (title.toLowerCase() != username.toLowerCase()) {\n      title += ` by ${username}`;\n    }\n  }\n\n  return (\n    <View>\n      <View style={styles.cardShadow}>\n        <View style={styles.card}>\n          {image && (\n            <TouchableOpacity onPress={() => Linking.openURL(userUrl)}>\n              <Image source={{ uri: image }} style={styles.image} />\n            </TouchableOpacity>\n          )}\n          <TouchableOpacity\n            underlayColor=\"#eeeeee\"\n            onPress={() => Linking.openURL(repository)}\n            style={styles.item}\n          >\n            <View style={{ maxWidth: \"90%\" }}>\n              <Text style={styles.name}>{title}</Text>\n              <Link style={styles.text} url={licenseUrl}>\n                {licenses}\n              </Link>\n              <Link style={styles.text}>{version}</Link>\n            </View>\n            <FontAwesome\n              style={{ alignSelf: \"center\" }}\n              color=\"#34495e\"\n              size={16}\n              name=\"chevron-right\"\n            />\n          </TouchableOpacity>\n        </View>\n      </View>\n    </View>\n  );\n}\n\nconst Link = ({ url, style, children }) => (\n  <Text\n    style={style}\n    numberOfLines={1}\n    onPress={() => url && Linking.openURL(url)}\n  >\n    {children}\n  </Text>\n);\n\nconst styles = StyleSheet.create({\n  card: {\n    borderRadius: 4,\n    overflow: \"hidden\",\n    flexDirection: \"row\",\n    backgroundColor: \"white\",\n    alignItems: \"center\",\n  },\n  cardShadow: {\n    marginHorizontal: 12,\n    marginVertical: 6,\n    shadowColor: \"black\",\n    shadowOpacity: 0.4,\n    shadowOffset: { width: 0, height: 0 },\n    shadowRadius: 2,\n  },\n  item: {\n    paddingVertical: 16,\n    paddingHorizontal: 12,\n    flex: 1,\n    justifyContent: \"space-between\",\n    flexDirection: \"row\",\n    backgroundColor: \"transparent\",\n    maxWidth: \"100%\",\n    flexWrap: \"wrap\",\n  },\n  name: {\n    fontWeight: \"bold\",\n    fontSize: 16,\n  },\n  image: {\n    width: 96,\n    height: 96,\n    borderRadius: 0,\n  },\n\n  text: {\n    color: \"#34495e\",\n    marginTop: 3,\n  },\n});\n","import * as React from \"react\";\nimport { FlatList } from \"react-native\";\nimport { useSafeArea } from \"react-native-safe-area-context\";\n\nimport Data from \"../constants/Licenses\";\nimport LicensesListItem from \"./LicensesListItem\";\n\nfunction extractNameFromGithubUrl(url) {\n  if (!url) {\n    return null;\n  }\n\n  const reg = /((https?:\\/\\/)?(www\\.)?github\\.com\\/)?(@|#!\\/)?([A-Za-z0-9_]{1,15})(\\/([-a-z]{1,20}))?/i;\n  const components = reg.exec(url);\n\n  const { length, [length - 1]: last } = components;\n  return last;\n  // if (components && components.length > 5) {\n  //   return components[5];\n  // }\n  // return null;\n}\n\nfunction sortDataByKey(data, key) {\n  data.sort((a, b) => (a[key] > b[key] ? 1 : b[key] > a[key] ? -1 : 0));\n  return data;\n}\n\nfunction capitalizeFirstLetter(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nconst licenses = Object.keys(Data).map((key) => {\n  const { licenses, ...license } = Data[key];\n\n  let [name, version] = key.split(\"@\");\n  if (key.startsWith(\"@\")) {\n    const components = key.split(\"@\");\n    name = `@${components[1]}`;\n    version = components[2];\n  }\n\n  const reg = /((https?:\\/\\/)?(www\\.)?github\\.com\\/)?(@|#!\\/)?([A-Za-z0-9_]{1,15})(\\/([-a-z]{1,20}))?/i;\n\n  let username = (license.repository || license.licenseUrl)\n    .split(\"https://github.com/\")\n    .pop()\n    .split(\"/\")\n    .shift();\n  // extractNameFromGithubUrl(license.repository) ||\n  // extractNameFromGithubUrl(license.licenseUrl);\n\n  let userUrl;\n  let image;\n  if (username) {\n    username = capitalizeFirstLetter(username);\n    image = `https://github.com/${username}.png`;\n    userUrl = `https://github.com/${username}`;\n  }\n\n  return {\n    key,\n    name,\n    image,\n    userUrl,\n    username,\n    licenses: licenses.slice(0, 405),\n    version,\n    ...license,\n  };\n});\n\nsortDataByKey(licenses, \"username\");\n\nexport default function Licenses() {\n  const { bottom } = useSafeArea();\n  return (\n    <FlatList\n      style={{ flex: 1 }}\n      keyExtractor={({ key }) => key}\n      data={licenses}\n      contentContainerStyle={{ paddingBottom: bottom }}\n      renderItem={({ item }) => <LicensesListItem {...item} />}\n    />\n  );\n}\n","import * as React from \"react\";\nimport { View } from \"react-native\";\nimport { connect } from \"react-redux\";\n\nimport AudioManager from \"../AudioManager\";\n\nfunction Song({ muted }) {\n  React.useEffect(() => {\n    if (muted) {\n      AudioManager.shared.pauseAsync(\"song\");\n    } else {\n      AudioManager.shared.playAsync(\"song\", true, false);\n    }\n    return () => AudioManager.shared.stopAsync(\"song\");\n  }, [muted]);\n\n  return null;\n}\n\nexport default connect(({ muted }) => ({ muted }))(Song);\n","import React from \"react\";\nimport { Image, StyleSheet, View } from \"react-native\";\n\nimport Game from \"../components/Game\";\nimport Song from \"../components/Song\";\n\nfunction GameScreen({ navigation }) {\n  const [loading, setLoading] = React.useState(true);\n\n  return (\n    <View style={styles.container}>\n      <Song />\n\n      <Game navigation={navigation} onLoad={() => setLoading(false)} />\n      {loading && (\n        <Image\n          style={styles.image}\n          source={require(\"../assets/icons/splash.png\")}\n        />\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    width: \"100%\",\n    height: \"100%\",\n    flex: 1,\n  },\n  image: {\n    ...StyleSheet.absoluteFillObject,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundColor: \"#FFC266\",\n  },\n});\n\nexport default GameScreen;\n","import React from \"react\";\nimport { StyleSheet, Text, TouchableHighlight } from \"react-native\";\n\nexport default function Footer({ style, ...props }) {\n  return (\n    <TouchableHighlight\n      underlayColor=\"#eeeeee\"\n      {...props}\n      style={[styles.touchable, style]}\n    >\n      <Text style={styles.text}>Load More...</Text>\n    </TouchableHighlight>\n  );\n}\n\nconst styles = StyleSheet.create({\n  touchable: {\n    paddingVertical: 16,\n    paddingHorizontal: 16,\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    borderTopWidth: StyleSheet.hairlineWidth,\n    borderTopColor: \"rgba(0,0,0,0.3)\",\n  },\n  text: { fontWeight: \"bold\", fontSize: 16 },\n});\n","// https://stackoverflow.com/a/39466341/4047926\nfunction nth(n) {\n  return ['st', 'nd', 'rd'][(((((n < 0 ? -n : n) + 90) % 100) - 10) % 10) - 1] || 'th';\n}\nexport default nth;\n","import React from \"react\";\nimport { Image, Text, StyleSheet, TouchableOpacity, View } from \"react-native\";\n\n// https://github.com/FaridSafi/react-native-gifted-chat/blob/master/src/GiftedAvatar.js\nconst Color = {\n  white: \"white\",\n  carrot: \"#e67e22\",\n  emerald: \"#2ecc71\",\n  peterRiver: \"#3498db\",\n  wisteria: \"#8e44ad\",\n  alizarin: \"#e74c3c\",\n  turquoise: \"#1abc9c\",\n  midnightBlue: \"#2c3e50\",\n};\n\nconst {\n  carrot,\n  emerald,\n  peterRiver,\n  wisteria,\n  alizarin,\n  turquoise,\n  midnightBlue,\n} = Color;\n// TODO\n// 3 words name initials\n// handle only alpha numeric chars\n\nexport default class Avatar extends React.PureComponent {\n  setAvatarColor() {\n    const userName = this.props.name || \"\";\n    const name = userName.toUpperCase().split(\" \");\n    if (name.length === 1) {\n      this.avatarName = `${name[0].charAt(0)}`;\n    } else if (name.length > 1) {\n      this.avatarName = `${name[0].charAt(0)}${name[1].charAt(0)}`;\n    } else {\n      this.avatarName = \"\";\n    }\n\n    let sumChars = 0;\n    for (let i = 0; i < userName.length; i += 1) {\n      sumChars += userName.charCodeAt(i);\n    }\n\n    // inspired by https://github.com/wbinnssmith/react-user-avatar\n    // colors from https://flatuicolors.com/\n    const colors = [\n      carrot,\n      emerald,\n      peterRiver,\n      wisteria,\n      alizarin,\n      turquoise,\n      midnightBlue,\n    ];\n\n    this.avatarColor = colors[sumChars % colors.length];\n  }\n\n  renderAvatar() {\n    if (typeof this.props.avatar === \"function\") {\n      return this.props.avatar();\n    } else if (typeof this.props.avatar === \"string\") {\n      return (\n        <Image\n          source={{ uri: this.props.avatar }}\n          style={StyleSheet.flatten([\n            styles.avatarStyle,\n            this.props.avatarStyle,\n          ])}\n        />\n      );\n    } else if (typeof this.props.avatar === \"number\") {\n      return (\n        <Image\n          source={this.props.avatar}\n          style={StyleSheet.flatten([\n            styles.avatarStyle,\n            this.props.avatarStyle,\n          ])}\n        />\n      );\n    }\n    return null;\n  }\n\n  renderInitials() {\n    return (\n      <Text\n        style={StyleSheet.flatten([styles.textStyle, this.props.textStyle])}\n      >\n        {this.avatarName}\n      </Text>\n    );\n  }\n\n  render() {\n    if (!this.props.name && !this.props.avatar) {\n      // render placeholder\n      return (\n        <View\n          style={StyleSheet.flatten([\n            styles.avatarStyle,\n            styles.avatarTransparent,\n            this.props.avatarStyle,\n          ])}\n          accessibilityTraits=\"image\"\n        />\n      );\n    }\n    if (this.props.avatar) {\n      return (\n        <TouchableOpacity\n          disabled={!this.props.onPress}\n          style={{ flex: 1 }}\n          onPress={() => {\n            const { onPress, ...other } = this.props;\n            if (this.props.onPress) {\n              this.props.onPress(other);\n            }\n          }}\n          accessibilityTraits=\"image\"\n        >\n          {this.renderAvatar()}\n        </TouchableOpacity>\n      );\n    }\n\n    this.setAvatarColor();\n\n    return (\n      <TouchableOpacity\n        disabled={!this.props.onPress}\n        onPress={() => {\n          const { onPress, ...other } = this.props;\n          if (this.props.onPress) {\n            this.props.onPress(other);\n          }\n        }}\n        style={StyleSheet.flatten([\n          styles.avatarStyle,\n          { backgroundColor: this.avatarColor },\n          this.props.avatarStyle,\n        ])}\n        accessibilityTraits=\"image\"\n      >\n        {this.renderInitials()}\n      </TouchableOpacity>\n    );\n  }\n}\n\nconst styles = {\n  avatarStyle: {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    width: 40,\n    height: 40,\n    flex: 1,\n    borderRadius: 20,\n  },\n  avatarTransparent: {\n    backgroundColor: \"#B8B8B8\",\n  },\n  textStyle: {\n    color: Color.white,\n    fontSize: 16,\n    backgroundColor: Color.backgroundTransparent,\n    fontWeight: \"100\",\n  },\n};\n\nAvatar.defaultProps = {\n  name: null,\n  avatar: null,\n  onPress: null,\n  avatarStyle: {},\n  textStyle: {},\n};\n","// import moment from 'moment';\nimport React from 'react';\n\nclass TimeAgo extends React.Component {\n  render() {\n    const {\n      children, style, subtext, simple,\n    } = this.props;\n    // if (!children) {\n    return null;\n    // }\n    // return (\n    //   <Text style={[{ opacity: 0.8, fontSize: 14, color: 'black' }, style]}>\n    //     {subtext}\n    //     {moment(parseInt(children)).fromNow(simple)}\n    //   </Text>\n    // );\n  }\n}\n\nexport default TimeAgo;\n","import Ionicons from \"@expo/vector-icons/Ionicons\";\nimport React from \"react\";\nimport { StyleSheet, Text, TouchableHighlight, View } from \"react-native\";\n\nimport addNth from \"../../utils/addNth\";\nimport Avatar from \"../Avatar\";\nimport TimeAgo from \"../TimeAgo\";\n\nexport default class Item extends React.Component {\n  onPress = () => {\n    const { item, index, onPress } = this.props;\n    onPress(item, index);\n  };\n  render() {\n    const { index, onPress, style, ...props } = this.props;\n    const item = this.props.item || {};\n\n    const {\n      displayName,\n      score,\n      photoURL,\n      // rank: brokenRank,\n      timestamp,\n    } = item;\n\n    const _rankValue = index + 1;\n    const rank = _rankValue + addNth(_rankValue);\n    return (\n      <TouchableHighlight\n        underlayColor=\"#eeeeee\"\n        {...props}\n        onPress={this.onPress}\n        style={[styles.touchable, style]}\n      >\n        <View style={styles.container}>\n          <View style={{ flexDirection: \"row\" }}>\n            <Text style={styles.rank}>{rank}</Text>\n            <Avatar\n              textStyle={{ fontWeight: \"bold\" }}\n              avatarStyle={{ marginRight: 16 }}\n              name={displayName}\n              avatar={photoURL}\n            />\n            <View>\n              <Text style={styles.text}>{displayName}</Text>\n              <Text style={styles.subtitle}>{score} Points</Text>\n              {score && <TimeAgo>{timestamp}</TimeAgo>}\n            </View>\n          </View>\n          <Ionicons size={24} color=\"#CCCCCC\" name=\"ios-arrow-forward\" />\n        </View>\n      </TouchableHighlight>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  touchable: {},\n  container: {\n    paddingVertical: 16,\n    paddingHorizontal: 16,\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  rank: {\n    alignSelf: \"center\",\n    fontSize: 24,\n    minWidth: 24,\n    marginRight: 8,\n  },\n  text: { fontWeight: \"bold\" },\n  subtitle: {\n    opacity: 0.7,\n  },\n});\n","import React from \"react\";\nimport { StyleSheet, View } from \"react-native\";\n\nexport default function Separator(props) {\n  return <View {...props} style={[styles.container, props.style]} />;\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    height: StyleSheet.hairlineWidth,\n    width: \"auto\",\n    marginLeft: 16,\n    backgroundColor: \"#CED0CE\",\n  },\n});\n","import Ionicons from \"@expo/vector-icons/Ionicons\";\nimport React from \"react\";\nimport { StyleSheet, Text, TouchableHighlight, View } from \"react-native\";\n\nimport Avatar from \"../Avatar\";\n\nexport default class UserCell extends React.Component {\n  static defaultProps = {\n    item: {},\n    index: 0,\n    onPress: () => {\n      alert(\"must override UserCell.onPress\"); // eslint-disable-line\n    },\n  };\n  onPress = () => {\n    const { item, index, onPress } = this.props;\n    onPress(item, index);\n  };\n  render() {\n    const { index, onPress, style, item, ...props } = this.props;\n    if (!item) {\n      return <View />;\n    }\n\n    const {\n      displayName: name,\n      score,\n      // rank,\n      photoURL: image,\n    } = item;\n    // const _rank = rank || index + 1;\n    return (\n      <TouchableHighlight\n        underlayColor=\"#eeeeee\"\n        {...props}\n        onPress={this.onPress}\n        style={StyleSheet.flatten([styles.touchable, style])}\n      >\n        <View style={styles.container}>\n          <View style={{ flexDirection: \"row\" }}>\n            <Text\n              style={StyleSheet.flatten([styles.rank, { alignSelf: \"center\" }])}\n            >\n              ME\n            </Text>\n            <Avatar\n              textStyle={{ fontWeight: \"bold\" }}\n              avatarStyle={{ marginRight: 16 }}\n              name={name}\n              avatar={image}\n            />\n            <View styles={{ alignItems: \"flex-start\" }}>\n              <Text style={styles.rank}>{name}</Text>\n              <Text style={styles.text}>\n                <Text style={styles.subtitle}>{score} Points</Text>\n              </Text>\n            </View>\n          </View>\n          {onPress && (\n            <Ionicons size={24} color=\"#CCCCCC\" name=\"ios-arrow-forward\" />\n          )}\n        </View>\n      </TouchableHighlight>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  touchable: {},\n  container: {\n    paddingVertical: 16,\n    paddingHorizontal: 16,\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    borderTopWidth: StyleSheet.hairlineWidth,\n    borderTopColor: \"rgba(0,0,0,0.3)\",\n  },\n  rank: {\n    fontSize: 24,\n    minWidth: 36,\n    marginRight: 8,\n  },\n  text: { fontWeight: \"bold\", fontSize: 16 },\n  subtitle: {\n    fontSize: 12,\n    opacity: 0.7,\n  },\n});\n","import React from 'react';\nimport { FlatList, StyleSheet, View } from 'react-native';\n\nimport Footer from './Footer';\nimport Item from './Item';\nimport Separator from './Separator';\nimport UserCell from './UserCell';\n\nclass List extends React.Component {\n  get userItem() {\n    if (this.props.renderUserItem) {\n      return this.props.renderUserItem();\n    }\n    return <UserCell style={{ backgroundColor: 'white' }} item={this.props.userItem} onPress={this.props.onPress} />;\n  }\n\n  get footer() {\n    if (this.props.noMore) {\n      return null;\n    }\n\n    return footerProps => <Footer {...footerProps} item={this.props.userItem} onPress={this.props.onPressFooter} />;\n  }\n\n  keyExtractor = (item, index) => `item-${index}`;\n\n  renderItem = (props) => {\n    if (this.props.renderItem) {\n      return this.props.renderItem(props);\n    }\n\n    return <Item {...props} onPress={this.props.onPress} />;\n  };\n\n  render() {\n    const {\n      style,\n      title,\n      userItem,\n      onPressHeader,\n      onPressFooter,\n      onPress,\n      headerButtonTitle,\n      noMore,\n      ...props\n    } = this.props;\n    return (\n      <View style={{ flex: 1 }}>\n        <FlatList\n          style={[style, styles.container]}\n          keyExtractor={this.keyExtractor}\n          ListFooterComponent={this.footer}\n          ItemSeparatorComponent={Separator}\n          renderItem={this.renderItem}\n          {...props}\n        />\n        {this.userItem}\n      </View>\n    );\n  }\n}\n\n// ListEmptyComponent={\n//   <View\n//     style={{\n//       justifyContent: 'center',\n//       flex: 1,\n//       height: Dimensions.get('window').height / 2,\n//       alignItems: 'center',\n//     }}\n//   >\n//     <Text style={{ fontSize: 24 }}>Coming Soon</Text>\n//   </View>\n// }\n\n// ListHeaderComponent={headerProps => (\n//             <Header\n//               {...headerProps}\n//               buttonTitle={headerButtonTitle}\n//               onPress={onPressHeader}\n//               title={title}\n//             />\n//           )}\n\nconst styles = StyleSheet.create({\n  container: {},\n});\n\nexport default List;\n","import { dispatch } from \"@rematch/core\";\nimport firebase from \"firebase/app\";\nimport React, { Component } from \"react\";\nimport { RefreshControl, StyleSheet, View } from \"react-native\";\nimport { connect } from \"react-redux\";\n\nimport List from \"../components/List\";\nimport Item from \"../components/List/Item\";\nimport Settings from \"../constants/Settings\";\nimport Fire from \"../ExpoParty/Fire\";\nimport { connectActionSheet } from \"@expo/react-native-action-sheet\";\nimport Constants from \"expo-constants\";\n\nfunction useCurrentUser() {\n  const [user, setUser] = React.useState(firebase.auth().currentUser);\n  React.useEffect(() => {\n    const unsub = firebase.auth().onAuthStateChanged((user) => {\n      setUser(user);\n    });\n    return () => unsub();\n  }, []);\n  return user;\n}\n\nfunction LeaderboardScreen({\n  showActionSheetWithOptions,\n  user,\n  leaders,\n  navigation,\n}) {\n  const [filter, setFilter] = React.useState(\"Forever\");\n  const [refreshing, setRefreshing] = React.useState(false);\n  const [data, setData] = React.useState({});\n  const [hasMore, setHasMore] = React.useState(true);\n  const [lastKnownKey, setLast] = React.useState(null);\n\n  React.useEffect(() => {\n    if (user) {\n      makeRemoteRequest();\n    }\n\n    // this._onPressItem({\n    //   key: 'gUdfd7VmKyWHR84G3tvB9NkYH0b2',\n    //   appOwnership: 'expo',\n    //   dailyVisits: 0,\n    //   deviceId: 'F56CB29A-581A-4517-B3C8-3BDA0D2A5E3B',\n    //   deviceName: 'Bingo Boi',\n    //   deviceYearClass: 2016,\n    //   expoVersion: '2.5.0.1014340',\n    //   isDevice: true,\n    //   lastRewardTimestamp: 1524166289798,\n    //   platform: {\n    //     ios: {\n    //       buildNumber: '2.5.0.1014340',\n    //       model: 'iPhone 7 Plus',\n    //       platform: 'iPhone9,4',\n    //       systemVersion: '11.2.6',\n    //       userInterfaceIdiom: 'handset',\n    //     },\n    //   },\n    //   score: 3,\n    //   slug: 'crossy-road',\n    //   uid: 'gUdfd7VmKyWHR84G3tvB9NkYH0b2',\n    //   title: 'Bingo Boi',\n    //   name: 'Bingo Boi',\n    //   rank: 2,\n    // });\n  }, [(user || {}).uid]);\n\n  const addChild = (items) => {\n    setData({\n      ...data,\n      ...items,\n    });\n  };\n\n  const makeRemoteRequest = async () => {\n    // console.log('makeRemoteRequest', Object.keys(Fire.shared));\n    if (!Fire.shared.uid) {\n      return;\n    }\n\n    if (refreshing) {\n      return;\n    }\n\n    // Create a timer\n    const timeout = setTimeout(() => {\n      setRefreshing(false);\n    }, 5000);\n    setRefreshing(true);\n\n    dispatch.leaders.getPagedAsync({\n      start: lastKnownKey,\n      size: Settings.leaderPageSize,\n      callback: ({ cursor, noMore }) => {\n        clearTimeout(timeout);\n\n        setRefreshing(false);\n        setHasMore(!noMore);\n        setLast(cursor);\n      },\n    });\n  };\n\n  const _onOpenActionSheet = () => {\n    // Same interface as https://facebook.github.io/react-native/docs/actionsheetios.html\n    const options = [\"Today\", \"This Week\", \"Forever\", \"Cancel\"];\n    const cancelButtonIndex = options.length - 1;\n\n    showActionSheetWithOptions(\n      {\n        options,\n        icons: [\"md-show-chart\"],\n        cancelButtonIndex,\n      },\n      (buttonIndex) => {\n        if (buttonIndex !== cancelButtonIndex) {\n          setFilter(options[buttonIndex]);\n        }\n        // Do something here depending on the button index selected\n      }\n    );\n  };\n\n  const _onPressItem = (item) => {\n    // console.log(item);\n    navigation.navigate(\"Profile\", {\n      title: item.name,\n      ...item,\n    });\n  };\n\n  return (\n    <View style={styles.container}>\n      <List\n        noMore={!hasMore}\n        renderItem={(props) => <Item onPress={_onPressItem} {...props} />}\n        title=\"Players\"\n        headerButtonTitle={filter}\n        data={leaders}\n        userItem={user}\n        onPress={_onPressItem}\n        onPressHeader={_onOpenActionSheet}\n        renderUserItem={() => null}\n        onPressFooter={makeRemoteRequest}\n        refreshControl={\n          <RefreshControl\n            tintColor={Constants.manifest.primaryColor}\n            refreshing={refreshing}\n            onRefresh={makeRemoteRequest}\n          />\n        }\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    // alignItems: 'center',\n    // justifyContent: 'center',\n    // paddingTop: Constants.statusBarHeight,\n    // backgroundColor: '#ecf0f1',\n  },\n});\n\nconst ConnectedProfile = connect(({ user, leaders }) => {\n  const _leadersSorted = Object.values(leaders).sort(\n    (a, b) => a.score < b.score\n  );\n  return { user, leaders: _leadersSorted };\n})(LeaderboardScreen);\n\nexport default connectActionSheet(ConnectedProfile);\n","import MaterialIcons from \"@expo/vector-icons/MaterialIcons\";\nimport React from \"react\";\nimport { TouchableOpacity, View } from \"react-native\";\n\nexport default function EditPhoto({ onPress, style, ...props }) {\n  return (\n    <TouchableOpacity style={style} onPress={onPress}>\n      <View\n        style={{\n          width: 36,\n          height: 36,\n          borderRadius: 36 / 2,\n          backgroundColor: \"orange\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n        }}\n      >\n        <MaterialIcons\n          style={{ backgroundColor: \"transparent\" }}\n          name=\"add\"\n          color=\"white\"\n          size={24}\n        />\n      </View>\n    </TouchableOpacity>\n  );\n}\n","// @flow\nimport React from \"react\";\nimport { Linking, TouchableOpacity, View } from \"react-native\";\n\nimport Settings from \"../constants/Settings\";\nimport * as ImagePicker from \"expo-image-picker\";\nimport * as Permissions from \"expo-permissions\";\nimport Avatar from \"./Avatar\";\nimport EditPhotoButton from \"./Button/EditPhoto\";\n\nexport default class ProfileImage extends React.Component {\n  _getPermission = async (permission) => {\n    const { status } = await Permissions.askAsync(permission);\n    if (status !== \"granted\") {\n      Linking.openURL(\"app-settings:\");\n      return false;\n    }\n    return true;\n  };\n\n  _takePhoto = async () => {\n    const permission = await this._getPermission(Permissions.CAMERA);\n    if (!permission) {\n      return;\n    }\n    const result = await ImagePicker.launchCameraAsync({\n      allowsEditing: true,\n      aspect: [4, 3],\n    });\n\n    if (!result.cancelled) {\n      this._setNewPhoto(result.uri);\n    }\n  };\n\n  _setNewPhoto = async (uri) => {\n    alert(\"TODO: Evan: Add photo upload\", uri);\n  };\n\n  _selectPhoto = async () => {\n    const permission = await this._getPermission(Permissions.CAMERA_ROLL);\n    if (!permission) {\n      return;\n    }\n    const result = await ImagePicker.launchImageLibraryAsync({\n      allowsEditing: true,\n      aspect: [4, 3],\n    });\n\n    if (!result.cancelled) {\n      this._setNewPhoto(result.uri);\n    }\n  };\n\n  _viewProfilePicture = () => {\n    // TODO: Evan: Lightbox\n  };\n\n  onPress = async () => {\n    if (!Settings.canEditPhoto) {\n      return;\n    }\n    if (!this.props.isUser) {\n      this._viewProfilePicture();\n      return;\n    }\n    // Same interface as https://facebook.github.io/react-native/docs/actionsheetios.html\n    const sheetOptions = [\n      {\n        name: \"View Profile Picture\",\n        action: this._viewProfilePicture,\n      },\n      {\n        name: \"Take New Photo\",\n        action: this._takePhoto,\n      },\n      {\n        name: \"Select New Photo\",\n        action: this._selectPhoto,\n      },\n      { name: \"Cancel\" },\n    ];\n    const destructiveButtonIndex = 0;\n    const cancelButtonIndex = sheetOptions.length - 1;\n\n    this.props.showActionSheetWithOptions(\n      {\n        options: sheetOptions.map(({ name }) => name),\n        cancelButtonIndex,\n      },\n      (buttonIndex) => {\n        if (buttonIndex !== cancelButtonIndex) {\n          const { action } = sheetOptions[buttonIndex];\n          console.log(buttonIndex, sheetOptions[buttonIndex]);\n          if (action) {\n            action(buttonIndex);\n          }\n        }\n        // Do something here depending on the button index selected\n      }\n    );\n  };\n\n  render() {\n    const { image, isUser, name } = this.props;\n    const avatarSize = 128;\n\n    return (\n      <View\n        style={{\n          marginRight: 16,\n          height: avatarSize,\n          width: avatarSize,\n          minWidth: avatarSize,\n          minHeight: avatarSize,\n        }}\n      >\n        <TouchableOpacity onPress={this.onPress}>\n          <Avatar\n            textStyle={{ fontWeight: \"bold\", fontSize: 48 }}\n            avatarStyle={{\n              width: \"100%\",\n              height: \"100%\",\n              borderRadius: avatarSize / 2,\n            }}\n            name={name}\n            avatar={image}\n          />\n          {isUser && Settings.canEditPhoto && (\n            <EditPhotoButton\n              style={{ position: \"absolute\", bottom: 0, right: 0 }}\n            />\n          )}\n        </TouchableOpacity>\n      </View>\n    );\n  }\n}\n","import React from \"react\";\nimport { StyleSheet, Text, View } from \"react-native\";\n\nimport TimeAgo from \"../components/TimeAgo\";\n\nexport default function ProfileMetaDataView({ name, createdAt }) {\n  let _name = name || \"\";\n  if (typeof name === \"string\") {\n    _name = _name.trim();\n  }\n  return (\n    <View style={styles.container}>\n      <Text style={styles.paragraph}>{_name}</Text>\n      <TimeAgo subtext=\"Created \">{createdAt}</TimeAgo>\n      {false && (\n        <Text style={styles.subtitle}>\n          Plays Nitro Roll, Sunset Cyberspace, and Pillar Valley\n        </Text>\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    alignItems: \"flex-start\",\n    justifyContent: \"center\",\n  },\n  subtitle: {\n    fontSize: 14,\n    marginTop: 2,\n    maxWidth: \"80%\",\n  },\n  paragraph: {\n    fontSize: 18,\n    fontWeight: \"bold\",\n    textAlign: \"center\",\n    color: \"#34495e\",\n  },\n});\n","import FontAwesome from \"@expo/vector-icons/FontAwesome\";\nimport { dispatch } from \"@rematch/core\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport React from \"react\";\nimport { StyleSheet, Text, View } from \"react-native\";\n\nconst LogoutButton = React.forwardRef((props, ref) => {\n  return (\n    <FontAwesome.Button\n      ref={ref}\n      name=\"sign-out\"\n      backgroundColor=\"#CA5D6B\"\n      children=\"Log Out\"\n      onPress={() => firebase.auth().signOut()}\n      {...props}\n    />\n  );\n});\n\nconst FacebookButton = React.forwardRef((props, ref) => {\n  return (\n    <FontAwesome.Button\n      ref={ref}\n      name=\"facebook\"\n      backgroundColor=\"#3b5998\"\n      children=\"Link with Facebook\"\n      onPress={() => dispatch.facebook.upgradeAccount()}\n      {...props}\n    />\n  );\n});\n\nexport default function UpgradeAccountView({ canLogout }) {\n  return (\n    <View style={styles.container}>\n      {!canLogout && (\n        <Text style={styles.text}>\n          Link your account to access your score and achievements across games\n          and devices.\n        </Text>\n      )}\n      {canLogout && <LogoutButton />}\n      {!canLogout && <FacebookButton />}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    alignItems: \"flex-start\",\n    borderTopWidth: StyleSheet.hairlineWidth,\n    borderTopColor: \"gray\",\n    paddingTop: 8,\n    marginTop: 24,\n  },\n  text: {\n    fontSize: 14,\n    marginBottom: 8,\n  },\n});\n","import { dispatch } from \"@rematch/core\";\nimport React from \"react\";\nimport { StyleSheet, View } from \"react-native\";\nimport { connect } from \"react-redux\";\n\nimport ProfileImage from \"../components/ProfileImage\";\nimport ProfileMetaDataView from \"../components/ProfileMetaDataView\";\nimport UpgradeAccountView from \"../components/UpgradeAccountView\";\nimport Fire from \"../ExpoParty/Fire\";\nimport { connectActionSheet } from \"@expo/react-native-action-sheet\";\n\nfunction ProfileScreen({ user = {} }) {\n  const isSignedInWithFB = !!user.fbuid;\n\n  // const canUpgrade = this.isUser && !isSignedInWithFB;\n  const canLogout = isSignedInWithFB;\n  const name = user.displayName || user.deviceName;\n  const createdAt = user.createdAt || user.lastRewardTimestamp;\n  const isUser = Fire.shared.uid === user.uid;\n\n  const image = isSignedInWithFB\n    ? `https://graph.facebook.com/${user.fbuid}/picture?type=large`\n    : user.photoURL;\n\n  React.useEffect(() => {\n    dispatch.players.getAsync({ uid: user.uid });\n  }, []);\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.row}>\n        <ProfileImage isUser={isUser} name={name} image={image} />\n        <ProfileMetaDataView name={name} createdAt={createdAt} />\n      </View>\n\n      {isUser && <UpgradeAccountView canLogout={canLogout} />}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 24,\n  },\n  row: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  reportButton: {\n    fontWeight: \"bold\",\n    marginRight: 12,\n    color: \"white\",\n  },\n});\n\nconst ASProfile = connectActionSheet(ProfileScreen);\n\nexport default connect(\n  ({ players }) => ({ players }),\n  {},\n  ({ players = {}, ...stateProps }, dispatchProps, ownProps) => {\n    const uid = ownProps.route.uid || Fire.shared.uid;\n    const user = players[uid];\n\n    return {\n      ...ownProps,\n      ...dispatchProps,\n      ...stateProps,\n      uid,\n      user,\n    };\n  }\n)(ASProfile);\n","import Constants from \"expo-constants\";\nimport React from \"react\";\nimport { StyleSheet, Text, TouchableHighlight, View } from \"react-native\";\n\nexport default function Header({\n  title,\n  buttonTitle,\n  index,\n  onPress,\n  ...props\n}) {\n  return (\n    <TouchableHighlight\n      underlayColor=\"#eeeeee\"\n      {...props}\n      onPress={() => onPress(item, index)}\n    >\n      <View style={styles.container}>\n        <View>\n          <Text style={styles.text}>{title}</Text>\n        </View>\n        <Text style={styles.link}>{buttonTitle}</Text>\n      </View>\n    </TouchableHighlight>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    paddingVertical: 6,\n    marginTop: 8,\n    paddingHorizontal: 16,\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    borderBottomColor: \"rgba(0,0,0,0.3)\",\n    borderBottomWidth: StyleSheet.hairlineWidth,\n  },\n  text: { fontWeight: \"bold\", opacity: 0.7 },\n  link: {\n    color: Constants.manifest.primaryColor,\n  },\n});\n","import Ionicons from \"@expo/vector-icons/Ionicons\";\nimport * as React from \"react\";\nimport { StyleSheet, Text, TouchableHighlight, View } from \"react-native\";\n\nexport default function Item({ item, index, onPress, ...props }) {\n  return (\n    <TouchableHighlight\n      {...props}\n      underlayColor=\"#eeeeee\"\n      onPress={() => {\n        onPress(item, index);\n      }}\n    >\n      <View style={styles.container}>\n        <Text style={styles.text}>{item.name}</Text>\n        <Ionicons size={24} color=\"#CCCCCC\" name=\"ios-arrow-forward\" />\n      </View>\n    </TouchableHighlight>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    paddingVertical: 16,\n    paddingHorizontal: 16,\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  text: { fontWeight: \"bold\" },\n});\n","import React from \"react\";\nimport { FlatList, StyleSheet } from \"react-native\";\nimport { useSafeArea } from \"react-native-safe-area-context\";\n\nimport Separator from \"../List/Separator\";\nimport Header from \"./Header\";\nimport Item from \"./Item\";\n\nfunction List({\n  style,\n  title,\n  onPress,\n  onPressHeader,\n  headerButtonTitle,\n  ...props\n}) {\n  const keyExtractor = (item, index) => `item-${index}`;\n  const renderItem = (props) => <Item {...props} onPress={onPress} />;\n\n  const { bottom } = useSafeArea();\n  return (\n    <FlatList\n      style={[style, styles.container]}\n      keyExtractor={keyExtractor}\n      ListHeaderComponent={(headerProps) => (\n        <Header\n          {...headerProps}\n          buttonTitle={headerButtonTitle}\n          onPress={onPressHeader}\n          title={title}\n        />\n      )}\n      ItemSeparatorComponent={Separator}\n      contentContainerStyle={{ paddingBottom: bottom }}\n      renderItem={renderItem}\n      {...props}\n    />\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: \"transparent\",\n  },\n});\n\nexport default List;\n","// @flow\nconst offenses = ['Cheating', 'Naughty Photo', 'Risqué Name', 'Terrorist', 'Annoying', 'Something Else...'].map(offense => ({ name: offense }));\n\nexport default offenses;\n","import MaterialIcons from \"@expo/vector-icons/MaterialIcons\";\nimport React from \"react\";\nimport { StyleSheet, Text, View } from \"react-native\";\n\nimport ReportList from \"../components/ReportList\";\nimport Offenses from \"../constants/Offenses\";\nimport Fire from \"../ExpoParty/Fire\";\n\nexport default function ReportScreen({ navigation, route }) {\n  const { username, uid } = route;\n\n  const onPressItem = ({ name }) => {\n    Fire.shared.submitComplaint(uid, name);\n    navigation.goBack();\n    alert(\"This user will be investigated with surgical precision.\");\n  };\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.row}>\n        <MaterialIcons size={36} color=\"#34495e\" name=\"security\" />\n        <Text style={styles.header}>Report {username}</Text>\n      </View>\n      <ReportList\n        data={Offenses}\n        onPress={onPressItem}\n        title={`What did ${username} do to you?`}\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  row: {\n    flexDirection: \"row\",\n    margin: 24,\n    marginLeft: 16,\n  },\n  header: {\n    marginLeft: 12,\n    marginTop: 4,\n    fontSize: 24,\n    fontWeight: \"bold\",\n    textAlign: \"center\",\n    color: \"#34495e\",\n  },\n});\n","import Ionicons from \"@expo/vector-icons/Ionicons\";\nimport { createMaterialTopTabNavigator } from \"@react-navigation/material-top-tabs\";\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport { createStackNavigator } from \"@react-navigation/stack\";\nimport Constants from \"expo-constants\";\nimport * as Linking from \"expo-linking\";\nimport * as React from \"react\";\n\nimport Licenses from \"./components/Licenses\";\nimport Fire from \"./ExpoParty/Fire\";\nimport GameScreen from \"./screens/GameScreen\";\nimport LeaderboardScreen from \"./screens/LeaderboardScreen\";\nimport ProfileScreen from \"./screens/ProfileScreen\";\nimport ReportScreen from \"./screens/ReportScreen\";\n\nconst AppTab = createMaterialTopTabNavigator();\n\nconst tabBarIcon = (name) => ({ tintColor }) => (\n  <Ionicons\n    style={{ backgroundColor: \"transparent\" }}\n    name={`md-${name}`}\n    color={tintColor}\n    size={24}\n  />\n);\n\nconst AppStack = createStackNavigator();\nconst linking = {\n  prefixes: [Linking.makeUrl()],\n  config: {\n    Game: \"/\",\n    Licenses: \"/credit\",\n    Report: \"/report\",\n    Social: {\n      screens: {\n        Leaderboard: \"/rank\",\n        Profile: \"/u\",\n      },\n    },\n  },\n};\n\nexport default () => (\n  <NavigationContainer linking={linking}>\n    <AppStack.Navigator\n      screenOptions={{\n        headerTintColor: \"white\",\n        headerStyle: {\n          backgroundColor: Constants.manifest.primaryColor,\n        },\n        headerTitleStyle: { color: \"white\" },\n\n        headerTintColor: \"#fff\",\n        cardStyle: {\n          backgroundColor: \"white\",\n        },\n      }}\n      initialRouteName=\"Game\"\n    >\n      <AppStack.Screen\n        name=\"Game\"\n        component={GameScreen}\n        options={{ header: () => null }}\n      />\n      <AppStack.Screen name=\"Licenses\" component={Licenses} />\n      <AppStack.Screen\n        name=\"Social\"\n        component={TabNavigation}\n        options={{\n          title: `Expo ${Constants.manifest.name}`,\n        }}\n      />\n      <AppStack.Screen\n        name=\"Report\"\n        component={ReportScreen}\n        options={{ title: \"Report\" }}\n      />\n      <AppStack.Screen\n        name=\"Profile\"\n        component={ProfileScreen}\n        options={({ navigation, route }) => {\n          const uid = route.uid || Fire.shared.uid;\n\n          let headerRight;\n          if (uid !== Fire.shared.uid) {\n            headerRight = (\n              <Text\n                onPress={() => {\n                  navigation.navigate(\"Report\", route);\n                }}\n                style={styles.reportButton}\n              >\n                Report\n              </Text>\n            );\n          }\n\n          return {\n            title: \"Player Profile\",\n            headerRight,\n          };\n        }}\n      />\n    </AppStack.Navigator>\n  </NavigationContainer>\n);\n\nconst TabNavigation = () => {\n  return (\n    <AppTab.Navigator\n      initialRouteName=\"Leaderboard\"\n      tabBarOptions={{\n        shifting: true,\n        activeTintColor: \"#f0edf6\",\n        inactiveTintColor: \"#3e2465\",\n        barStyle: {\n          backgroundColor: \"#694fad\",\n          alignItems: \"stretch\",\n        },\n        mode: \"modal\",\n        title: Constants.manifest.name,\n        cardStyle: {\n          backgroundColor: \"transparent\",\n        },\n      }}\n    >\n      <AppTab.Screen\n        name=\"Leaderboard\"\n        component={LeaderboardScreen}\n        options={{\n          tabBarColor: \"#2962ff\",\n          title: tabBarIcon(\"podium\"), // 'show-chart'),\n        }}\n      />\n      <AppTab.Screen\n        name=\"Profile\"\n        component={ProfileScreen}\n        options={{\n          title: \"Profile\",\n          tabBarColor: \"#40D8FF\",\n          tabBarIcon: tabBarIcon(\"person\"),\n        }}\n      />\n    </AppTab.Navigator>\n  );\n};\n","import { AppLoading } from \"expo\";\nimport * as Font from \"expo-font\";\nimport React from \"react\";\n\nimport AudioManager from \"./AudioManager\";\nimport Fire from \"./ExpoParty/Fire\";\nimport Navigation from \"./Navigation\";\nimport Gate from \"./rematch/Gate\";\n\nexport default function App() {\n  const [loading, setLoading] = React.useState(true);\n\n  React.useEffect(() => {\n    Fire.shared.init();\n    (async () => {\n      console.time(\"Setup\");\n      try {\n        await Promise.all([\n          Font.loadAsync({\n            \"GothamNarrow-Book\": require(\"./assets/fonts/GothamNarrow-Book.ttf\"),\n          }),\n          AudioManager.shared.setupAsync(),\n        ]);\n      } catch (error) {\n        console.log(\"Error loading fonts and audio!\");\n        console.error(error);\n      } finally {\n        console.timeEnd(\"Setup\");\n      }\n      setLoading(false);\n    })();\n  }, []);\n\n  if (loading) return <AppLoading />;\n\n  return (\n    <Gate>\n      <Navigation />\n    </Gate>\n  );\n}\n\n// <AchievementToastProvider>\n//   <Navigation />\n// </AchievementToastProvider>\n","import * as StoreReview from \"expo-store-review\";\nimport React from \"react\";\n\nexport default function useStoreReview() {\n  const [supportsStoreReview, setStoreReview] = React.useState(false);\n  React.useEffect(() => {\n    StoreReview.isAvailableAsync().then((isAvailable) => {\n      setStoreReview(isAvailable);\n    });\n  }, []);\n  return supportsStoreReview;\n}\n","import { TouchableOpacity } from 'react-native';\n\nexport default TouchableOpacity;\n","import FontAwesome from \"@expo/vector-icons/FontAwesome\";\nimport React, { Component } from \"react\";\nimport { Platform, StyleSheet } from \"react-native\";\n\nimport AudioManager from \"../../AudioManager\";\nimport TouchableBounce from \"../TouchableBounce\"; // eslint-disable-line\n\nexport default class Icon extends Component {\n  static defaultProps = {\n    soundIn: \"button_in\",\n    soundOut: \"button_out\",\n    size: 24,\n    color: \"#ffffff\",\n    onPress: () => {},\n  };\n\n  render() {\n    const {\n      onPress,\n      size,\n      color,\n      name,\n      soundOut,\n      soundIn,\n      source,\n      style,\n      iconStyle,\n    } = this.props;\n    return (\n      <TouchableBounce\n        onPress={onPress}\n        onPressIn={() => AudioManager.shared.playAsync(soundIn)}\n        onPressOut={() => AudioManager.shared.playAsync(soundOut)}\n        style={[styles.container, style]}\n      >\n        <FontAwesome\n          size={size}\n          color={color}\n          name={name}\n          style={[styles.icon, iconStyle]}\n        />\n      </TouchableBounce>\n    );\n  }\n}\n\nconst size = 56;\n\nconst styles = StyleSheet.create({\n  container: {\n    width: size,\n    minWidth: size,\n    height: size,\n    minHeight: size,\n    maxHeight: size,\n    backgroundColor: \"transparent\",\n    borderBottomWidth: 3,\n    borderColor: \"white\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginHorizontal: 4,\n  },\n  icon: {\n    backgroundColor: \"transparent\",\n    marginBottom: Platform.select({ web: \"1rem\", default: 0 }),\n  },\n});\n","import * as React from \"react\";\n\nimport Icon from \"./Icon\";\n\nconst LeaderboardButton = React.forwardRef((props, ref) => {\n  return <Icon {...props} ref={ref} name=\"trophy\" />;\n});\nexport default LeaderboardButton;\n","import * as React from \"react\";\n\nimport Icon from \"./Icon\";\n\nconst LicensesButton = React.forwardRef((props, ref) => {\n  return <Icon {...props} ref={ref} name=\"handshake-o\" />;\n});\nexport default LicensesButton;\n","import Constants from \"expo-constants\";\nimport * as StoreReview from \"expo-store-review\";\nimport React from \"react\";\nimport { Alert, Linking } from \"react-native\";\n\nimport useStoreReview from \"../../hooks/useStoreReview\";\nimport Icon from \"./Icon\";\n\nconst { name } = Constants.manifest;\n\nfunction alertToReview() {\n  Alert.alert(\n    `Do you like ${name}?`,\n    `Would you like to rate this app in the app store? It help's others discover ${name} too!`,\n    [\n      {\n        text: \"OK\",\n        onPress: () => Linking.openURL(StoreReview.storeUrl()),\n      },\n      { text: \"Cancel\", onPress: () => {}, style: \"cancel\" },\n    ],\n    { cancelable: true }\n  );\n}\n\nfunction Rate() {\n  const canReview = useStoreReview();\n\n  const onPress = React.useMemo(\n    () => () => {\n      if (canReview) {\n        StoreReview.requestReview();\n      } else {\n        alertToReview();\n      }\n    },\n    [canReview]\n  );\n\n  return <Icon onPress={onPress} name=\"star\" />;\n}\n\nexport default Rate;\n","import { Platform } from 'react-native';\nimport Constants from 'expo-constants'; \n\nfunction storeUrl() {\n  const { OS } = Platform;\n  const manifest = Constants.manifest[OS];\n\n  if (OS === 'ios') {\n    return manifest.appStoreUrl;\n  }\n  return manifest.playStoreUrl;\n}\n\nexport default storeUrl;\n","import Constants from 'expo-constants'; \nimport React from 'react';\nimport { Share } from 'react-native';\nimport { connect } from 'react-redux';\n\nimport storeUrl from '../../utils/storeUrl';\nimport Icon from './Icon';\n\nclass ShareButton extends React.Component {\n  onPress = async () => {\n    const { score, screenshot: url } = this.props;\n    // const url = await AssetUtils.uriAsync(image);\n    const appName = Constants.manifest.name;\n    const title = `${appName}`;\n    const message = `OMG! I got ${score} points in @baconbrix ${appName}. ${storeUrl() || ''}`;\n    Share.share(\n      {\n        message,\n        title,\n        url,\n      },\n      {\n        tintColor: Constants.manifest.tintColor,\n        excludedActivityTypes: [\n          'com.apple.UIKit.activity.Print',\n          'com.apple.UIKit.activity.AssignToContact',\n          'com.apple.UIKit.activity.AddToReadingList',\n          'com.apple.UIKit.activity.AirDrop',\n          'com.apple.UIKit.activity.OpenInIBooks',\n          'com.apple.UIKit.activity.MarkupAsPDF',\n          'com.apple.reminders.RemindersEditorExtension', // Reminders\n          'com.apple.mobilenotes.SharingExtension', // Notes\n          'com.apple.mobileslideshow.StreamShareService', // iCloud Photo Sharing - This also does nothing :{\n        ],\n      },\n    );\n    if (this.props.onPress) this.props.onPress();\n  };\n\n  render() {\n    const {\n      onPress, screenshot, name, ...props\n    } = this.props;\n    if (!screenshot) {\n      return null;\n    }\n    return <Icon onPress={this.onPress} name=\"share\" {...props} />;\n  }\n}\n\nexport default connect(({ score: { last: score }, screenshot }) => ({\n  score,\n  screenshot,\n}))(ShareButton);\n","import { dispatch } from \"@rematch/core\";\nimport * as React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport Icon from \"./Icon\";\n\nfunction SoundButton({ muted }) {\n  const onPress = React.useMemo(\n    () => () => {\n      dispatch.muted.toggle();\n    },\n    []\n  );\n\n  return <Icon onPress={onPress} name={muted ? \"volume-off\" : \"volume-up\"} />;\n}\n\nexport default connect(({ muted }) => ({ muted }))(SoundButton);\n","import React from \"react\";\nimport { StyleSheet, View } from \"react-native\";\nimport * as Animatable from \"react-native-animatable\";\nimport { useSafeArea } from \"react-native-safe-area-context\";\nimport { connect } from \"react-redux\";\n\nimport Settings from \"../constants/Settings\";\nimport GameStates from \"../Game/GameStates\";\nimport useStoreReview from \"../hooks/useStoreReview\";\nimport LeaderboardButton from \"./Button/Leaderboard\";\nimport LicensesButton from \"./Button/LicensesButton\";\nimport RateButton from \"./Button/Rate\";\nimport ShareButton from \"./Button/Share\";\nimport SoundButton from \"./Button/Sound\";\n\nconst delay = 100;\nconst initialDelay = 100;\nconst duration = 500;\nconst easing = \"ease-out\";\n\nfunction Footer({ game, screenshot, onLeaderboardPress, onLicensesPress }) {\n  const { bottom } = useSafeArea();\n  const supportsStoreReview = useStoreReview();\n  const animation = game === GameStates.Menu ? \"zoomIn\" : \"zoomOut\";\n  const views = [<SoundButton />, <LicensesButton onPress={onLicensesPress} />];\n\n  if (Settings.isFirebaseEnabled) {\n    views.unshift(<LeaderboardButton onPress={onLeaderboardPress} />);\n  }\n  if (screenshot) {\n    views.push(<ShareButton />);\n  }\n\n  if (supportsStoreReview) {\n    views.push(<RateButton />);\n  }\n  return (\n    <View style={[styles.container, { marginBottom: bottom }]}>\n      {views.map((view, index) => {\n        const _delay = index * delay;\n        return (\n          <Animatable.View\n            useNativeDriver\n            key={index}\n            duration={duration + _delay}\n            delay={initialDelay + _delay}\n            animation={animation}\n            easing={easing}\n            style={styles.button}\n          >\n            {view}\n          </Animatable.View>\n        );\n      })}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: \"row\",\n    position: \"absolute\",\n    bottom: 8,\n    left: 8,\n    right: 8,\n    height: 64,\n    alignItems: \"center\",\n    justifyContent: \"space-around\",\n  },\n  button: {\n    height: 64,\n  },\n});\n\nexport default connect(({ game, screenshot }) => ({ game, screenshot }))(\n  Footer\n);\n","// @flow\nimport * as THREE from 'three';\nimport {EffectComposer} from 'three/examples/jsm/postprocessing/EffectComposer';\nimport {RenderPass} from 'three/examples/jsm/postprocessing/RenderPass';\nimport {ShaderPass} from 'three/examples/jsm/postprocessing/ShaderPass';\nimport {VignetteShader} from 'three/examples/jsm/shaders/VignetteShader';\n\nexport default (gl, renderer, scene, camera) => {\n  require('three/examples/js/postprocessing/MaskPass');\n  require('three/examples/js/shaders/CopyShader');\n  require('three/examples/js/shaders/HorizontalBlurShader');\n  require('three/examples/js/shaders/VerticalBlurShader');\n  require('three/examples/js/shaders/DotScreenShader');\n  require('three/examples/js/shaders/RGBShiftShader');\n\n  require('three/examples/js/shaders/ColorifyShader');\n  require('three/examples/js/shaders/ConvolutionShader');\n  require('three/examples/js/shaders/FilmShader');\n\n  require('three/examples/js/postprocessing/DotScreenPass');\n  require('three/examples/js/postprocessing/BloomPass');\n  require('three/examples/js/postprocessing/FilmPass');\n\n  const effectVignette = new ShaderPass(VignetteShader);\n  effectVignette.renderToScreen = true;\n  const composer = new EffectComposer(renderer);\n  composer.addPass(new RenderPass(scene, camera));\n  composer.addPass(effectVignette);\n  return composer;\n};\n","import Settings from \"../constants/Settings\";\nimport { Renderer } from \"expo-three\";\nimport Composer from \"./Composer\";\nimport Game from \"./Game\";\n\nclass Machine {\n  time = 0;\n\n  onContextCreateAsync = async ({ gl, width, height, scale: pixelRatio }) => {\n    this.renderer = new Renderer({\n      gl,\n      width,\n      height,\n      pixelRatio,\n    });\n\n    this.game = new Game(width, height, this.renderer);\n    await this.game.loadAsync();\n\n    if (Settings.isComposerEnabled) {\n      this.composer = Composer(\n        gl,\n        this.renderer,\n        this.game.scene,\n        this.game.camera\n      );\n    }\n  };\n\n  onTouchesBegan = (state) => this.game.onTouchesBegan(state);\n\n  onResize = (layout) => {\n    const { scale } = layout;\n    const width = layout.width;\n    const height = layout.height;\n    if (this.renderer) {\n      this.renderer.setSize(width, height);\n    }\n    if (this.composer) {\n      this.composer.setSize(width, height);\n    }\n    if (this.game) {\n      this.game.onResize({ width, height });\n    }\n  };\n\n  onRender = (delta) => {\n    this.time += delta;\n\n    this.game.update(delta, this.time);\n    if (this.composer) {\n      this.composer.render(delta);\n    } else {\n      this.renderer.render(this.game.scene, this.game.camera);\n    }\n  };\n}\n\nexport default Machine;\n","/* eslint-env browser */\n\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', function () {\n    navigator.serviceWorker\n      .register('/expo-service-worker.js', { scope: '/' })\n      .then(function (info) {\n        // console.info('Registered service-worker', info);\n      })\n      .catch(function (error) {\n        console.info('Failed to register service-worker', error);\n      });\n  });\n}\n","module.exports = __webpack_public_path__ + \"static/media/button_in.96f6f788.wav\";","module.exports = __webpack_public_path__ + \"static/media/button_out.d14c1f4a.wav\";","module.exports = __webpack_public_path__ + \"static/media/song.670464f8.mp3\";","export default {\n  apiKey: 'AIzaSyAkOa9Hyx6aKaSItFWBbrw_zou6RlQYdck',\n  authDomain: 'game-f26ee.firebaseapp.com',\n  databaseURL: 'https://game-f26ee.firebaseio.com',\n  projectId: 'game-f26ee',\n  storageBucket: 'game-f26ee.appspot.com',\n  messagingSenderId: '997358977148',\n  googleAnalyticsTrackingId: \"UA-122220193-2\"\n  // googleAnalyticsTrackingId: \"UA-122220193-1\"\n};\n","// @flow\nimport { dispatch } from \"@rematch/core\";\nimport Constants from \"expo-constants\";\nimport Settings from \"../constants/Settings\";\nimport Secret from \"./Secret\";\n\nimport firebase from \"firebase/app\";\n// Required for side-effects\nimport \"firebase/firestore\";\n\nconst collectionName = Settings.slug;\n\nclass Fire {\n  constructor() {}\n\n  init = () => {\n    if (!Settings.isFirebaseEnabled) {\n      return;\n    }\n\n    firebase.initializeApp(Secret);\n    firebase.firestore().settings({ timestampsInSnapshots: true });\n    dispatch.user.observeAuth();\n\n    // DEBUG\n    if (!Settings.debug) {\n      dispatch.leaders.clear();\n    }\n\n    // dispatch.players.clear();\n    // dispatch.user.clear();\n  };\n\n  /*\n    negative values are also accepted... Use this for spending and for updating after a game.\n  */\n  addCurrency = (amount) =>\n    new Promise((res, rej) => {\n      this.db\n        .runTransaction((transaction) =>\n          transaction.get(this.doc).then((userDoc) => {\n            if (!userDoc.exists) {\n              throw \"Document does not exist!\";\n            }\n\n            const data = userDoc.data();\n            const currency = data.currency || 0;\n            const newCurrency = currency + amount;\n            transaction.update(this.doc, { currency: newCurrency });\n            this.user.currency = newCurrency;\n            return newCurrency;\n          })\n        )\n        .then(res)\n        .catch(rej);\n    });\n\n  upgradeAccount = async () => {\n    dispatch.facebook.upgradeAccount();\n  };\n\n  submitComplaint = (targetUid, complaint) => {\n    this.db.collection(\"complaints\").add({\n      slug: Constants.manifest.slug,\n      uid: this.uid,\n      targetUid,\n      complaint,\n      timestamp: this.timestamp,\n    });\n  };\n\n  get collection() {\n    return this.db.collection(collectionName);\n  }\n\n  get doc() {\n    return this.collection.doc(this.uid);\n  }\n\n  get db() {\n    return firebase.firestore();\n  }\n\n  get uid() {\n    return (firebase.auth().currentUser || {}).uid;\n  }\n\n  get timestamp() {\n    return Date.now();\n  }\n\n  get isAuthed() {\n    return !!this.uid;\n  }\n}\n\nFire.shared = new Fire();\nexport default Fire;\n","module.exports = __webpack_public_path__ + \"static/media/PILLAR.902be265.png\";","module.exports = __webpack_public_path__ + \"static/media/VALLEY.9d1d2eea.png\";","module.exports = __webpack_public_path__ + \"static/media/BEGIN.88d5f636.png\";","module.exports = __webpack_public_path__ + \"static/media/splash.41b11b34.png\";","module.exports = __webpack_public_path__ + \"./fonts/GothamNarrow-Book.ttf\";","const GameStates = {\n  Menu: \"menu\",\n  Playing: \"playing\",\n};\n\nexport default GameStates;\n","import * as THREE from \"three\";\n\nclass GameObject extends THREE.Object3D {\n  _loaded = false;\n  _size = { width: null, height: null, depth: null };\n  objects = [];\n\n  constructor(game) {\n    super();\n    this._game = game;\n  }\n\n  get size() {\n    const box = new THREE.Box3().setFromObject(this);\n\n    const size = new THREE.Vector3();\n    box.getSize(size);\n    const { x: width, y: height, z: depth } = size;\n    this._size = { width, height, depth };\n    return this._size;\n  }\n\n  set loaded(value) {\n    this._loaded = value;\n    this._size = this.size; // / Ugh\n  }\n  get loaded() {\n    return this._loaded;\n  }\n\n  _alpha = 1;\n  get alpha() {\n    return this._alpha;\n  }\n  set alpha(value) {\n    this._alpha = value;\n    const transparent = value !== 1;\n    if (this.materials) {\n      this.materials.map((material) => {\n        material.transparent = transparent;\n        material.opacity = value;\n      });\n    } else if (this.material) {\n      this.material.transparent = transparent;\n      this.material.opacity = value;\n    }\n\n    this.setAll(\"alpha\", value);\n\n    this.traverse((child) => {\n      if (child instanceof THREE.Mesh) {\n        if (child.materials) {\n          child.materials.map((material) => {\n            material.transparent = transparent;\n            material.opacity = value;\n          });\n        } else if (child.material) {\n          child.material.transparent = transparent;\n          child.material.opacity = value;\n        }\n      }\n    });\n  }\n\n  // get objects() {\n  //   const out = [];\n  //   this.traverse(function(child) {\n  //     if (child instanceof GameObject) {\n  //       //   out.push(child);\n  //     }\n  //   });\n  //   return out;\n  // }\n\n  setAll = (key, value) => {\n    for (const object of this.objects) {\n      object[key] = value;\n    }\n  };\n\n  reset() {\n    this.visible = true;\n  }\n\n  async loadAsync() {\n    this.loaded = true;\n  }\n\n  get position() {\n    return this.position;\n  }\n\n  set position(value) {\n    this.position.set(value);\n  }\n\n  get x() {\n    return this.position.x;\n  }\n  get y() {\n    return this.position.y;\n  }\n  get z() {\n    return this.position.z;\n  }\n  set x(value) {\n    this.position.x = value;\n  }\n  set y(value) {\n    this.position.y = value;\n  }\n  set z(value) {\n    this.position.z = value;\n  }\n\n  destroy = () => {\n    if (this.parent) {\n      if (this.parent instanceof GameObject) {\n        this.parent.destroyChild(this);\n      } else {\n        this.parent.remove(this);\n      }\n    }\n  };\n\n  destroyChild = (object) => {\n    if (object instanceof GameObject) {\n      const index = this.objects.indexOf(object);\n      if (index > -1) {\n        this.objects.splice(index, 1);\n      }\n      this.remove(object);\n    } else if (object instanceof THREE.Object3D) {\n      this.remove(object);\n    }\n  };\n\n  async add(...props) {\n    const object = props[0];\n    if (props.length > 1) {\n      for (let i = 0; i < props.length; i++) {\n        await this.add(props[i]);\n      }\n      return this;\n    }\n    if (object === this) {\n      console.error(\n        \"GameObject.add: object can't be added as a child of itself.\",\n        object\n      );\n      return this;\n    }\n    if (object && object.isObject3D) {\n      if (object.parent !== null) {\n        object.parent.remove(object);\n      }\n      object.parent = this;\n      object.dispatchEvent({ type: \"added\" });\n\n      this.children.push(object);\n\n      if (object instanceof GameObject) {\n        object.game = this.game;\n        await object.loadAsync(this);\n        this.objects.push(object);\n        return object;\n      }\n    } else {\n      console.error(\n        \"GameObject.add: object not an instance of THREE.Object3D.\",\n        object\n      );\n    }\n\n    return this;\n  }\n\n  remove = (...props) => {\n    const object = props[0];\n    if (props.length > 1) {\n      for (let i = 0; i < props.length; i++) {\n        this.remove(props[i]);\n      }\n      return this;\n    }\n\n    const index = this.children.indexOf(object);\n    if (index !== -1) {\n      object.parent = null;\n      object.dispatchEvent({ type: \"removed\" });\n      this.children.splice(index, 1);\n    }\n\n    const objectIndex = this.objects.indexOf(object);\n    if (objectIndex !== -1) {\n      object.parent = null;\n      // object.dispatchEvent( { type: 'removed' } );\n      this.objects.splice(objectIndex, 1);\n    }\n\n    return this;\n  };\n\n  get game() {\n    return this._game;\n  }\n  set game(value) {\n    this._game = value;\n    this.setAll(\"game\", value);\n  }\n\n  get box() {\n    return new THREE.Box3().setFromObject(this);\n  }\n  get min() {\n    return this.box.min;\n  }\n  get max() {\n    return this.box.min;\n  }\n  get size() {\n    const box = new THREE.Box3().setFromObject(this);\n    const size = new THREE.Vector3();\n    box.getSize(size);\n    return size;\n  }\n  get width() {\n    return this.size.x;\n  }\n  get height() {\n    return this.size.y;\n  }\n  get depth() {\n    return this.size.z;\n  }\n\n  get center() {\n    return this.box.center;\n  }\n\n  update(delta, time) {\n    if (!this.loaded) {\n      return false;\n    }\n    for (const object of this.objects) {\n      object.update(delta, time);\n    }\n  }\n}\n\nexport default GameObject;\n","export default (min, max) => min + Math.random() * (max - min);\n","import { store } from \"./rematch/Gate\";\nimport { Audio } from \"expo-av\";\n// eslint-disable-line\nclass AudioManager {\n  sounds = {};\n\n  playAsync = async (name, isLooping) => {\n    if (store.getState().muted) {\n      return;\n    }\n\n    if (name in this.sounds) {\n      const soundObject = this.sounds[name];\n      try {\n        await soundObject.setPositionAsync(0);\n        await soundObject.setIsLoopingAsync(isLooping);\n        await soundObject.playAsync();\n      } catch (error) {\n        console.warn(\"Error playing audio\", { error });\n      }\n    } else {\n      console.warn(\"Audio doesn't exist\", name);\n    }\n  };\n  stopAsync = async (name) => {\n    if (name in this.sounds) {\n      const soundObject = this.sounds[name];\n      try {\n        await soundObject.stopAsync();\n      } catch (error) {\n        console.warn(\"Error stopping audio\", { error });\n      }\n    } else {\n      console.warn(\"Audio doesn't exist\", name);\n    }\n  };\n  volumeAsync = async (name, volume) => {\n    if (name in this.sounds) {\n      const soundObject = this.sounds[name];\n      try {\n        await soundObject.setVolumeAsync(volume);\n      } catch (error) {\n        console.warn(\"Error setting volume of audio\", { error });\n      }\n    } else {\n      console.warn(\"Audio doesn't exist\", name);\n    }\n  };\n\n  pauseAsync = async (name) => {\n    if (name in this.sounds) {\n      const soundObject = this.sounds[name];\n      try {\n        await soundObject.pauseAsync();\n      } catch (error) {\n        console.warn(\"Error pausing audio\", { error });\n      }\n    } else {\n      console.warn(\"Audio doesn't exist\", name);\n    }\n  };\n\n  configureExperienceAudioAsync = async () =>\n    Audio.setAudioModeAsync({\n      playThroughEarpieceAndroid: false,\n      allowsRecordingIOS: false,\n      interruptionModeIOS: Audio.INTERRUPTION_MODE_IOS_DO_NOT_MIX,\n      playsInSilentModeIOS: false,\n      shouldDuckAndroid: true,\n      interruptionModeAndroid: Audio.INTERRUPTION_MODE_ANDROID_DO_NOT_MIX,\n    });\n\n  get assets() {\n    return {\n      \"button_in.wav\": require(\"./assets/audio/button_in.wav\"),\n      \"button_out.wav\": require(\"./assets/audio/button_out.wav\"),\n      \"song.mp3\": require(\"./assets/audio/song.mp3\"),\n    };\n  }\n\n  setupAudioAsync = async () => {\n    const keys = Object.keys(this.assets || {});\n    for (const key of keys) {\n      const item = this.assets[key];\n      const { sound } = await Audio.Sound.createAsync(item);\n      const soundName = key.substr(0, key.lastIndexOf(\".\"));\n      // console.log(\"Audio\", soundName, sound);\n      this.sounds[soundName] = sound;\n    }\n  };\n\n  setupAsync = async () => {\n    await this.configureExperienceAudioAsync();\n    await this.setupAudioAsync();\n  };\n}\n\nAudioManager.shared = new AudioManager();\n\nexport default AudioManager;\n"],"sourceRoot":""}