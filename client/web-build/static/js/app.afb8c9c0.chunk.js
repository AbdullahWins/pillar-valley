(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{125:function(e,t,a){"use strict";t.a={red:13632027,yellow:16312092,white:16180968,brown:9129785,pink:15707316,brownDark:6701086,blue:4886754,green:8311585,purple:9442302,lightgreen:12118406,beige:15783833,gold:12955019}},183:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(14),r=a.n(n),s=a(5),o=a.n(s),i=a(7),c=a.n(i),l=a(4),u=a.n(l),p=a(8),h=a.n(p),d=function(e){function t(e){return o()(this,t),c()(this,u()(t).call(this,r()({flatShading:!0},e)))}return h()(t,e),t}(a(1).MeshPhongMaterial)},184:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return k}));var n=a(2),r=a.n(n),s=a(5),o=a.n(s),i=a(6),c=a.n(i),l=a(7),u=a.n(l),p=a(13),h=a.n(p),d=a(8),f=a.n(d),m=a(4),g=a.n(m),y=a(28),v=a.n(y),b=a(42),x=a(1),w=a(125),k=function(t){function a(){var e,t;o()(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(t=u()(this,(e=g()(a)).call.apply(e,[this].concat(s)))).getGemGeometry=function(){var e=new x.CylinderGeometry(.6,1,.3,7,1);return e.vertices[e.vertices.length-1].y=-1,e.verticesNeedUpdate=!0,e},t.loadAsync=function(e){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t.add(t.gem),n.next=3,r.a.awrap(v()(g()(a.prototype),"loadAsync",h()(t)).call(h()(t),e));case 3:case"end":return n.stop()}}))},t.sat=0,t.hue=19,t._animateColorTo=function(e){b.d.to(h()(t),.5,{sat:e,onUpdate:function(){t._platformMaterial.color=t.color}})},t.getMaterial=t.getMaterial.bind(h()(t)),t.getValue=t.getValue.bind(h()(t)),t.pickup=t.pickup.bind(h()(t)),t}return f()(a,t),c()(a,[{key:"getValue",value:function(){return 1}},{key:"getMaterial",value:function(){return e.GemMaterial=e.GemMaterial||new x.MeshPhongMaterial({color:w.a.blue}),e.GemMaterial.clone()}},{key:"pickup",value:function(){this.destroy(),this.canBeCollected=!1}},{key:"update",value:function(e,t){this.rotation.y+=4*e,v()(g()(a.prototype),"update",this).call(this,e,t)}},{key:"_scale",set:function(e){this.scale.set(e,e,e)},get:function(){return this.scale.y}},{key:"gem",get:function(){var e=new x.Mesh(this.getGemGeometry(),this.getMaterial());return e.position.y=10,e.scale.multiplyScalar(10),e}},{key:"color",get:function(){return new x.Color("hsl("+this.hue+", "+Math.floor(this.sat)+"%, 66%)")}}]),a}(a(68).a)}).call(this,a(39))},195:function(e,t,a){"use strict";a.d(t,"b",(function(){return de}));var n={};a.r(n),a.d(n,"skins",(function(){return V})),a.d(n,"score",(function(){return H})),a.d(n,"currency",(function(){return q})),a.d(n,"game",(function(){return J})),a.d(n,"muted",(function(){return K})),a.d(n,"screenshot",(function(){return Y})),a.d(n,"dailyStreak",(function(){return Q})),a.d(n,"leaders",(function(){return ee})),a.d(n,"players",(function(){return te})),a.d(n,"user",(function(){return ne})),a.d(n,"facebook",(function(){return ie}));var r=a(5),s=a.n(r),o=a(6),i=a.n(o),c=a(7),l=a.n(c),u=a(4),p=a.n(u),h=a(8),d=a.n(h),f=a(23),m=a(227),g=a.n(m),y=a(0),v=a.n(y),b=a(135),x=a(55),w=a(297),k=a(298),E=a.n(k),C=a(20),S=a.n(C),P=a(2),A=a.n(P),T=a(21),I=a.n(T),M=a(14),B=a.n(M),z=a(38),O=a.n(z),R=a(96),U=a(51),L=a(26),D=a(40),j=a(63),_=a(32),N=a(354),G=a(578);var W=function(){var e=_.a.appOwnership,t=_.a.expoVersion,a=_.a.deviceId,n=_.a.deviceName,r=_.a.deviceYearClass,s=_.a.isDevice;return _.a.platform,{appOwnership:e,expoVersion:t,deviceId:a,deviceName:n,deviceYearClass:r,isDevice:s}};function F(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e["function"===typeof Symbol?Symbol.toPrimitive:"@@toPrimitive"];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var V={state:{},reducers:{setBest:function(e,t){return B()({},e,{best:t})},increment:function(e){e.current,e.best,e.isBest,I()(e,["current","best","isBest"])}},effects:{sync:function(){},unlock:function(e,t){e.key,t.skins}}},H={state:{current:0,best:0,last:null,isBest:!1},reducers:{setBest:function(e,t){return B()({},e,{best:t})},increment:function(e){var t=e.current,a=e.best,n=(e.isBest,I()(e,["current","best","isBest"])),r=t+1;return B()({current:r,best:Math.max(r,a),isBest:r>a},n)},_reset:function(e){return B()({},e,{current:0,last:e.current,isBest:!1})}},effects:{reset:function(e,t){var a=t.score;L.a.isFirebaseEnabled&&(L.a.isEveryScoreBest?f.dispatch.score.setHighScore(a.current):a.isBest&&f.dispatch.score.setHighScore(a.best)),f.dispatch.score._reset()},setHighScore:function(e,t){var a,n,r,s,o,i;return A.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return a=t.user,n=a.displayName,r=a.photoURL,console.log("set High score",e),s=$(n),o=D.a.shared.doc,c.prev=4,c.next=7,A.a.awrap(D.a.shared.db.runTransaction((function(t){return t.get(o).then((function(a){if(!a.exists)throw new Error("Document does not exist!");var n=a.data(),i=n.score||0;console.log("cloud score",i),L.a.isEveryScoreBest||e>i?t.update(o,{score:e,timestamp:Date.now(),displayName:s,photoURL:r||""}):(t.update(o,B()({},n,{displayName:s,photoURL:r||""})),f.dispatch.score.setBest(i))}))})));case 7:console.log("Successfully wrote score"),c.next=15;break;case 10:c.prev=10,c.t0=c.catch(4),i=c.t0.message,console.log("Failed to write score",i),R.a.alert(i);case 15:case"end":return c.stop()}}),null,null,[[4,10]])}}},q={state:{current:0},reducers:{change:function(e,t){var a=e.current,n=I()(e,["current"]);return B()({current:a+t},n)},_reset:function(e){return B()({},e,{current:0})}},effects:{}},J={state:j.a.Menu,reducers:{play:function(){return j.a.Playing},menu:function(){return j.a.Menu}},effects:{}},K={state:!1,reducers:{toggle:function(e){return!e}},effects:{}},Y={state:null,reducers:{update:function(e,t){return t}},effects:{updateAsync:function(e){var t,a,n,r,s,o;return A.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.ref,a=U.a.get("window"),n=a.width,r=a.height,s={format:"jpg",quality:.3,result:"file",height:r,width:n},i.next=5,A.a.awrap(Object(G.a)(t,s));case 5:o=i.sent,f.dispatch.screenshot.update(o);case 7:case"end":return i.stop()}}))}}};function X(){var e;return A.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Date.now(),t.abrupt("return",new Promise((function(t,a){D.a.shared.db.runTransaction((function(t){return t.get(D.a.shared.doc).then((function(a){if(console.log("Fire.shared.doc",D.a.shared.doc),!a.exists)throw new Error("Document does not exist!");var n=a.data(),r=n.lastRewardTimestamp,s=Math.abs(r-e)/36e5;if(s>=24){if(s>=48){return t.update(D.a.shared.doc,{dailyVisits:0,lastRewardTimestamp:e}),0}var o=(n.dailyVisits||0)+1;return t.update(D.a.shared.doc,{dailyVisits:o,lastRewardTimestamp:e}),o}return t.update(D.a.shared.doc,{dailyVisits:n.dailyVisits||0,lastRewardTimestamp:n.lastRewardTimestamp||Date.now()}),n.dailyVisits||0}))})).then(t).catch(a)})));case 2:case"end":return t.stop()}}))}var Q={state:0,reducers:{increment:function(e){return e+1},set:function(e,t){return t},reset:function(){return 0}},effects:{rewardUser:function(e){return A.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("award",e);case 1:case"end":return t.stop()}}))},compareDaily:function(e,t){var a,n;return A.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.user,e.next=3,A.a.awrap(X());case 3:(n=e.sent)!==a.dailyVisits&&(f.dispatch.dailyStreak.set(n),n>a.dailyVisits&&f.dispatch.dailyStreak.rewardUser(n),f.dispatch.user.update({dailyVisits:n}));case 5:case"end":return e.stop()}}))}}};function Z(e,t){var a=t.uid,n=t.user,r=e[a],s=I()(e,[a].map(F));return B()({},s,S()({},a,B()({},r||{},n)))}function $(e,t){var a=e||t||"Markipillar";return"string"===typeof a&&(a=a.trim()),a}var ee={state:{},reducers:{batchUpdate:function(e,t){var a=e,n=t,r=Array.isArray(n),s=0;for(n=r?n:n["function"===typeof Symbol?Symbol.iterator:"@@iterator"]();;){var o;if(r){if(s>=n.length)break;o=n[s++]}else{if((s=n.next()).done)break;o=s.value}a=Z(a,o)}return a},update:function(e,t){return Z(e,{uid:t.uid,user:t.user})},set:function(e,t){var a=t.uid,n=t.user,r=(e[a],I()(e,[a].map(F)));return B()({},r,S()({},a,n))},clear:function(){return{}}},effects:{getPagedAsync:function(e){var t,a,n,r,s,o,i,c;return A.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:t=e.start,a=e.size,n=e.callback,l.next=4;break;case 4:return r=O.a.firestore().collection(L.a.slug).where("score",">",0),s=r.orderBy("score","desc").limit(a),l.prev=6,t&&(s=s.startAfter(t)),l.next=10,A.a.awrap(s.get());case 10:return o=l.sent,i=[],o.forEach((function(e){if(e.exists){var n=e.data(),r=e.id;i.push({uid:r,user:B()({key:r,uid:r,displayName:$(n.displayName,n.deviceName)},n)})}else console.log("leaders.getPagedAsync(): Error: data doesn't exist",{size:a,start:t})})),console.log("Batch update",i.length,JSON.stringify(i)),f.dispatch.leaders.batchUpdate(i),c=o.docs[o.docs.length-1],n&&n({data:i,cursor:c,noMore:i.length<a}),l.abrupt("return");case 20:l.prev=20,l.t0=l.catch(6),console.error("Error getting documents: ",l.t0);case 23:n&&n({});case 24:case"end":return l.stop()}}),null,null,[[6,20]])},getAsync:function(e){var t,a,n,r,s,o,i,c,l;return A.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.uid,a=e.callback,u.prev=1,n=O.a.firestore().collection(L.a.slug).doc(t),u.next=5,A.a.awrap(n.get());case 5:if((r=u.sent).exists){u.next=17;break}if(t!==D.a.shared.uid){u.next=14;break}return s=O.a.auth().currentUser||{},o=$(s.displayName,_.a.deviceName),i={rank:999999,displayName:o,photoURL:s.photoURL||"",score:0,timestamp:Date.now()},n.set(i),a&&a(i),u.abrupt("return");case 14:console.log("No document: leaders/"+t),u.next=22;break;case 17:return c=r.data(),console.log("got leader",c),f.dispatch.leaders.update({uid:t,user:c}),a&&a(c),u.abrupt("return");case 22:u.next=29;break;case 24:u.prev=24,u.t0=u.catch(1),l=u.t0.message,console.log("Error: leaders.get",l),alert(l);case 29:a&&a(null);case 30:case"end":return u.stop()}}),null,null,[[1,24]])}}},te={state:{},reducers:{update:function(e,t){var a=t.uid,n=t.user,r=e[a],s=I()(e,[a].map(F));return B()({},s,S()({},a,B()({},r||{},n)))},set:function(e,t){var a=t.uid,n=t.user,r=(e[a],I()(e,[a].map(F)));return B()({},r,S()({},a,n))},clear:function(){return{}}},effects:{getAsync:function(e){var t,a,n,r,s,o,i,c;return A.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.uid,a=e.callback,l.abrupt("return");case 6:(n=l.sent).exists?(i=n.data(),console.log("got player",i),f.dispatch.players.update({uid:t,user:i}),a&&a(i)):(console.log("No document: players/"+t),t===D.a.shared.uid?(r=O.a.auth().currentUser||{},s=$(r.displayName,_.a.deviceName),o={rank:999999,displayName:s,score:0,timestamp:Date.now()},r.photoURL&&(o.photoURL=r.photoURL),(void 0).add(o),f.dispatch.players.update({uid:t,user:o}),a&&a(o)):f.dispatch.leaders.getAsync({uid:t,callback:function(e){e&&f.dispatch.players.update({uid:t,user:e}),a&&a(e)}})),l.next=15;break;case 10:l.prev=10,l.t0=l.catch(2),c=l.t0.message,console.log("Error: players.get",c),R.a.alert(c);case 15:case"end":return l.stop()}}),null,null,[[2,10]])}}};function ae(e){var t=e,a={};if(e.providerData&&e.providerData.length>0){var n=e.providerData[0];t.fbuid=n.uid;for(var r=["displayName","photoURL"],s=0;s<r.length;s++){var o=r[s];!t[o]&&n[o]&&(a[o]=n[o])}if(Object.keys(a).length>0){O.a.auth().currentUser;console.log({possibleUpdates:a}),O.a.auth().currentUser.updateProfile(a)}}var i=t.uid,c=t.photoURL,l=t.phoneNumber,u=t.lastLoginAt,p=t.isAnonymous,h=t.fbuid,d=t.displayName,f=t.emailVerified,m=t.email,g=t.createdAt;return B()({uid:i,photoURL:c||"",phoneNumber:l,lastLoginAt:u,isAnonymous:p,fbuid:h,displayName:d||_.a.deviceName,emailVerified:f,email:m,createdAt:g},a)}var ne={state:null,reducers:{update:function(e,t){return B()({},e,t)},set:function(e,t){return t},clear:function(){return null}},effects:{logoutAsync:function(e,t){var a;return A.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return t.players,e.prev=1,O.a.auth().currentUser.uid,e.next=5,A.a.awrap(O.a.auth().signOut());case 5:e.next=12;break;case 7:e.prev=7,e.t0=e.catch(1),a=e.t0.message,console.log("ERROR: user.logoutAsync: ",a),R.a.alert(a);case 12:case"end":return e.stop()}}),null,null,[[1,7]])},signInAnonymously:function(){try{O.a.auth().signInAnonymously()}catch(t){var e=t.message;console.log("Error: signInAnonymously",e),R.a.alert(e)}},observeAuth:function(e){O.a.auth().onAuthStateChanged((function(e){e?f.dispatch.user.getAsync():(f.dispatch.user.clear(),f.dispatch.user.signInAnonymously())}))},getAsync:function(e,t){var a,n,r,s,o,i,c,l,u,p;return A.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.user,n=a||{},r={},null!=(s=O.a.auth().currentUser.toJSON())){e.next=7;break}return console.warn("models: Shouldn't call user.getAsync until the user is authed"),e.abrupt("return");case 7:for(o=ae(s),i=W(),r=B()({},i,o),c={},l=Object.keys(r),u=0;u<l.length;u++)p=l[u],void 0!=r[p]&&r[p]!==n[p]&&(c[p]=r[p]);return Object.keys(c).length>0&&f.dispatch.user.update(c),f.dispatch.players.update({uid:r.uid,user:r}),e.abrupt("return");case 20:if(e.sent){e.next=28;break}return e.next=24,A.a.awrap(ue(void 0,{update:!0},L.a.shouldDelayFirebaseProfileSyncInMinutes));case 24:e.sent,f.dispatch.user.syncLocalToFirebase(),e.next=29;break;case 28:console.log("Prevent: syncLocalToFirebase");case 29:e.next=32;break;case 31:f.dispatch.user.syncLocalToFirebase();case 32:case"end":return e.stop()}}))},mergeDataWithFirebase:function(e){var t;return A.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,A.a.awrap(O.a.firestore().collection("players").doc(D.a.shared.uid));case 2:t=a.sent,t.set(e,{merge:!0});case 4:case"end":return a.stop()}}))},syncLocalToFirebase:function(e,t){var a,n,r;return A.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.user,a.additionalUserInfo,a.credential,a.user,n=I()(a,["additionalUserInfo","credential","user"]),console.log("syncLocalToFirebase",n),e.next=4,A.a.awrap(O.a.firestore().collection("players").doc(D.a.shared.uid));case 4:r=e.sent,r.set(n,{merge:!0});case 6:case"end":return e.stop()}}))},setGameData:function(e){var t=D.a.shared,a=t.uid,n=t.doc;if(a)n.set(e,{merge:!0})}}},re="success",se="cancel";function oe(e){var t=O.a.firestore();return Promise.all([t.collection(L.a.slug).doc(e).delete(),t.collection("players").doc(e).delete()])}var ie={state:null,reducers:{set:function(e,t){return t},setAuth:function(e,t){return B()({},e||{},{auth:t})},setGraphResults:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=e.graph,n=void 0===a?{}:a,r=I()(e,["graph"]);return B()({},r,{graph:B()({},n,t)})}},effects:{upgradeAccount:function(){f.dispatch.facebook.getToken(f.dispatch.facebook.upgradeAccountWithToken)},login:function(){f.dispatch.facebook.getToken(f.dispatch.facebook.loginToFirebaseWithToken)},getToken:function(e){var t,a,n,r,s,o;return A.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,A.a.awrap(N.a(_.a.manifest.facebookAppId,L.a.facebookLoginProps));case 3:t=i.sent,i.next=10;break;case 6:i.prev=6,i.t0=i.catch(0),a=i.t0.message,alert("Facebook Login Error:",a);case 10:t&&(r=(n=t).type,s=n.expires,o=n.token,r===re?f.dispatch.facebook.set({expires:s,token:o}):r===se||alert("Failed to authenticate",r),e&&e(o));case 11:case"end":return i.stop()}}),null,null,[[0,6]])},upgradeAccountWithToken:function(e,t){var a,n,r,s,o,i,c;return A.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(a=t.facebook,e||a&&a.token){l.next=4;break}return console.warn("upgradeAccountWithToken: Can't upgrade account without a token"),l.abrupt("return");case 4:return n=e||a.token,l.prev=5,l.next=8,A.a.awrap(ce(n));case 8:r=l.sent,console.log("upgradeAccountWithToken: Upgraded Successful"),f.dispatch.facebook.authorized(r),l.next=35;break;case 13:if(l.prev=13,l.t0=l.catch(5),s=l.t0.message,o=l.t0.code,i=I()(l.t0,["message","code"]),"auth/credential-already-in-use"!==o){l.next=32;break}if(!(c=D.a.shared.uid)){l.next=27;break}return console.log("Should delete:",c),l.next=24,A.a.awrap(oe(c));case 24:console.log("All deleted"),l.next=28;break;case 27:console.log("??? do something:",c);case 28:return l.next=30,A.a.awrap(f.dispatch.facebook.loginToFirebaseWithToken(n));case 30:l.next=35;break;case 32:console.log("Error: upgradeAccountWithToken",s),console.log("error",o,i),R.a.alert(s);case 35:case"end":return l.stop()}}),null,null,[[5,13]])},loginToFirebaseWithToken:function(e,t){var a,n,r,s;return A.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(a=t.facebook,e||a&&a.token){o.next=4;break}return console.warn("loginToFirebaseWithToken: Can't login to firebase without a token"),o.abrupt("return");case 4:return n=e||a.token,o.prev=5,o.next=8,A.a.awrap(le(n));case 8:r=o.sent,f.dispatch.facebook.authorized(r),o.next=17;break;case 12:o.prev=12,o.t0=o.catch(5),s=o.t0.message,console.log("Error: loginToFirebase"),R.a.alert(s);case 17:case"end":return o.stop()}}),null,null,[[5,12]])},callGraphWithToken:function(e,t){var a,n,r,s,o,i,c,l;return A.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(a=e.token,n=e.params,r=e.callback,s=t.facebook,a||s&&s.token){u.next=5;break}return console.warn("callGraphWithToken: Can't call the Facebook graph API without a Facebook Auth token"),u.abrupt("return");case 5:return o=a||s.token,(n||["id","name","email","picture"]).join(","),u.prev=7,u.next=10,A.a.awrap(fetch("https://graph.facebook.com/me?access_token="+o+"&fields="+n.join(",")));case 10:return c=u.sent,u.next=13,A.a.awrap(c.json());case 13:i=u.sent,f.dispatch.facebook.setGraphResults(i),u.next=22;break;case 17:u.prev=17,u.t0=u.catch(7),l=u.t0.message,console.log("Error: callGraphWithToken",l),alert(l);case 22:r&&r(i);case 23:case"end":return u.stop()}}),null,null,[[7,17]])},authorized:function(e,t){E()(t),console.log("Authorized Facebook",e);var a=e;a.toJSON&&(a=e.toJSON()),f.dispatch.user.update(a)}}};function ce(e){var t=O.a.auth.FacebookAuthProvider.credential(e);return O.a.auth().currentUser.linkAndRetrieveDataWithCredential(t)}function le(e){var t=O.a.auth.FacebookAuthProvider.credential(e);return O.a.auth().signInAndRetrieveDataWithCredential(t)}function ue(e,t,a){var n;return A.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t={value:t,expireAt:pe(a)},n=JSON.stringify(t),r.abrupt("return",b.a.setItem(e,n));case 3:case"end":return r.stop()}}))}function pe(e){var t=new Date,a=new Date(t);return a.setMinutes(t.getMinutes()+e),a}var he=g()({whiteList:["score","user","currency"],version:2,storage:b.a}),de=Object(f.init)({models:n,plugins:[he]}),fe=function(e){function t(){return s()(this,t),l()(this,p()(t).apply(this,arguments))}return d()(t,e),i()(t,[{key:"render",value:function(){return v.a.createElement(x.a,{store:de},v.a.createElement(w.a,{persistor:Object(m.getPersistor)()},this.props.children))}}]),t}(v.a.Component);t.a=fe},200:function(e,t,a){"use strict";(function(e){var n=a(2),r=a.n(n),s=a(13),o=a.n(s),i=a(28),c=a.n(i),l=a(5),u=a.n(l),p=a(6),h=a.n(p),d=a(7),f=a.n(d),m=a(4),g=a.n(m),y=a(8),v=a.n(y),b=a(42),x=a(1),w=a(68),k=a(183),E=a(86),C=a(184),S=a(26),P=a(327),A=33.3333333,T=function(e,t){return{x:e*Math.cos(t),y:e*Math.sin(t)}},I=function(t){function a(t){var n;return u()(this,a),e.PlatformGeom=e.PlatformGeom||new x.BoxBufferGeometry(A,1e3,A),(n=f()(this,g()(a).call(this,e.PlatformGeom.clone(),t)))._alpha=1,n}return v()(a,t),h()(a,[{key:"y",set:function(e){this.position.y=e},get:function(){return this.position.y}},{key:"alpha",get:function(){return this._alpha},set:function(e){this._alpha=e;var t=1!==e;this.materials?this.materials.map((function(a){a.transparent=t,a.opacity=e})):this.material&&(this.material.transparent=t,this.material.opacity=e),this.traverse((function(a){a instanceof x.Mesh&&(a.materials?a.materials.map((function(a){a.transparent=t,a.opacity=e})):a.material&&(a.material.transparent=t,a.material.opacity=e))}))}}]),a}(x.Mesh),M=function(t){function a(){var t,n;u()(this,a);for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];return(n=f()(this,(t=g()(a)).call.apply(t,[this].concat(i)))).loadAsync=function(t){var s;return r.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return s=n.color,e.PlatformGeom=e.PlatformGeom||new x.BoxBufferGeometry(A,1e3,A),n._platformMaterial=new k.a({color:s}),n.mesh=new I(n._platformMaterial),n.mesh.y=-500,n.add(n.mesh),i.next=8,r.a.awrap(c()(g()(a.prototype),"loadAsync",o()(n)).call(o()(n),t));case 8:case"end":return i.stop()}}))},n.lastAngle=0,n.updateDirection=function(e){if(n.playerDirection=e,void 0!==n.playerDirection&&n.gems&&n.gems.length){var t=n.gems.length,a=.75*Math.PI;n.playerDirection&&(a*=n.playerDirection);for(var r=a/t,s=0;s<t;s+=1){var o=n.gems[s],i=n.lastAngle+r*s,c=T(S.a.ballDistance,i),l=c.x,u=c.y;o.position.x=l,o.position.z=u,o.position.y=0,o._driftAngle=i}}},n.ensureGems=function(e){var t;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:n.gems||(n.gems=[]);case 1:if(!(n.gems.length<e)){a.next=10;break}return t=void 0,(t=e>3&&n.gems.length===e-1?new P.a:new C.a).scale.set(.001,.001,.001),n.gems.push(t),a.next=8,r.a.awrap(n.add(t));case 8:a.next=1;break;case 10:n.updateDirection(n.playerDirection);case 11:case"end":return a.stop()}}))},n.showGems=function(e){var t,a;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(!(e>2)){s.next=5;break}return s.next=3,r.a.awrap(n.ensureGems(e));case 3:for(t=function(e){var t=n.gems[e];b.d.to(t,.3,{alpha:1,delay:.1*(e+1),_scale:1,y:0,onComplete:function(){return t.canBeCollected=!0}})},a=0;a<n.gems.length;a+=1)t(a);case 5:case"end":return s.stop()}}))},n.animateGemsOut=function(){if(n.gems)for(var e=0;e<n.gems.length;e+=1){var t=n.gems[e],a=T(1.5*S.a.ballDistance,t._driftAngle),r=a.x,s=a.y;b.d.to(t,.4,{alpha:0,x:r,z:s})}},n.sat=0,n.hue=19,n._animateColorTo=function(e){b.d.to(o()(n),.5,{sat:e,onUpdate:function(){n._platformMaterial.color=n.color}})},n.becomeCurrent=function(){n._animateColorTo(66)},n.becomeTarget=function(){},n.getEndPosition=function(){return Object(E.a)(-1500,-1e3)},n.animateOut=function(){n.animateGemsOut(),b.d.to(n.mesh,Object(E.a)(.5,.7),{alpha:0,delay:Object(E.a)(0,.2),y:n.getEndPosition(),onComplete:function(){return n.destroy()}})},n.animateIn=function(){n.mesh.alpha=0,n.mesh.y=n.getEndPosition(),b.d.to(n.mesh,Object(E.a)(.5,.7),{alpha:1,y:-500})},n}return v()(a,t),h()(a,[{key:"color",get:function(){return new x.Color("hsl("+this.hue+", "+Math.floor(this.sat)+"%, 66%)")}}]),a}(w.a);t.a=M}).call(this,a(39))},232:function(e){e.exports=JSON.parse('{"@expo/react-native-action-sheet@3.5.0":{"licenses":"MIT","repository":"https://github.com/expo/react-native-action-sheet","licenseUrl":"https://github.com/expo/react-native-action-sheet/raw/master/LICENSE","parents":"pillar-valley"},"@expo/vector-icons@10.0.6":{"licenses":"MIT","repository":"https://github.com/expo/vector-icons","licenseUrl":"https://github.com/expo/vector-icons","parents":"pillar-valley"},"@react-native-community/masked-view@0.1.6":{"licenses":"MIT","repository":"https://github.com/react-native-community/react-native-masked-view","licenseUrl":"https://github.com/react-native-community/react-native-masked-view","parents":"pillar-valley"},"@react-navigation/bottom-tabs@5.5.2":{"licenses":"MIT","repository":"https://github.com/react-navigation/react-navigation/tree/master/packages/bottom-tabs","licenseUrl":"https://github.com/react-navigation/react-navigation/tree/master/packages/bottom-tabs/raw/master/LICENSE","parents":"pillar-valley"},"@react-navigation/drawer@5.8.2":{"licenses":"MIT","repository":"https://github.com/react-navigation/react-navigation/tree/master/packages/drawer","licenseUrl":"https://github.com/react-navigation/react-navigation/tree/master/packages/drawer/raw/master/LICENSE","parents":"pillar-valley"},"@react-navigation/material-top-tabs@5.2.10":{"licenses":"MIT","repository":"https://github.com/react-navigation/react-navigation/tree/master/packages/material-top-tabs","licenseUrl":"https://github.com/react-navigation/react-navigation/tree/master/packages/material-top-tabs/raw/master/LICENSE","parents":"pillar-valley"},"@react-navigation/native@5.5.1":{"licenses":"MIT","repository":"https://github.com/react-navigation/react-navigation/tree/master/packages/native","licenseUrl":"https://github.com/react-navigation/react-navigation/tree/master/packages/native/raw/master/LICENSE","parents":"pillar-valley"},"@react-navigation/stack@5.5.1":{"licenses":"MIT","repository":"https://github.com/react-navigation/react-navigation/tree/master/packages/stack","licenseUrl":"https://github.com/react-navigation/react-navigation/tree/master/packages/stack/raw/master/LICENSE","parents":"pillar-valley"},"@rematch/core@0.6.0":{"licenses":"ISC","repository":"https://github.com/rematch/rematch","licenseUrl":"https://github.com/rematch/rematch/raw/master/LICENSE","parents":"pillar-valley"},"@rematch/persist@0.2.1":{"licenses":"ISC","licenseUrl":"https://github.com/rematch/rematch/tree/master/plugins/persist#readme","parents":"pillar-valley"},"expo-av@8.1.0":{"licenses":"MIT","repository":"https://github.com/expo/expo","licenseUrl":"https://github.com/expo/expo","parents":"pillar-valley"},"expo-constants@9.0.0":{"licenses":"MIT","repository":"https://github.com/expo/expo","licenseUrl":"https://github.com/expo/expo","parents":"pillar-valley"},"expo-facebook@8.1.0":{"licenses":"MIT","repository":"https://github.com/expo/expo","licenseUrl":"https://github.com/expo/expo","parents":"pillar-valley"},"expo-gl@8.1.0":{"licenses":"MIT","repository":"https://github.com/expo/expo","licenseUrl":"https://github.com/expo/expo","parents":"pillar-valley"},"expo-graphics@1.1.0":{"licenses":"MIT","repository":"https://github.com/expo/expo-graphics","licenseUrl":"https://github.com/expo/expo-graphics/raw/master/LICENSE","parents":"pillar-valley"},"expo-haptics@8.1.0":{"licenses":"MIT","repository":"https://github.com/expo/expo","licenseUrl":"https://github.com/expo/expo","parents":"pillar-valley"},"expo-image-picker@8.1.0":{"licenses":"MIT","repository":"https://github.com/expo/expo","licenseUrl":"https://github.com/expo/expo","parents":"pillar-valley"},"expo-sensors@8.1.0":{"licenses":"MIT","repository":"https://github.com/expo/expo","licenseUrl":"https://github.com/expo/expo","parents":"pillar-valley"},"expo-store-review@2.0.1":{"licenses":"MIT","repository":"https://github.com/expo/expo","licenseUrl":"https://github.com/expo/expo","parents":"pillar-valley"},"expo-three@5.4.0":{"licenses":"MIT","repository":"https://github.com/expo/expo-three","licenseUrl":"https://github.com/expo/expo-three/raw/master/LICENSE","parents":"pillar-valley"},"expo@37.0.12":{"licenses":"MIT","repository":"https://github.com/expo/expo","licenseUrl":"https://github.com/expo/expo","parents":"pillar-valley"},"firebase@5.2.0":{"licenses":"Apache-2.0","repository":"https://github.com/firebase/firebase-js-sdk","licenseUrl":"https://github.com/firebase/firebase-js-sdk","parents":"pillar-valley"},"gsap@2.0.1":{"licenses":"Standard \'no charge\' license: https://greensock.com/standard-license. Club GreenSock members get more: https://greensock.com/licensing/. Why GreenSock doesn\'t employ an MIT license: https://greensock.com/why-license/","repository":"https://github.com/greensock/GreenSock-JS","licenseUrl":"https://github.com/greensock/GreenSock-JS","parents":"pillar-valley"},"react-dom@16.12.0":{"licenses":"MIT","repository":"https://github.com/facebook/react","licenseUrl":"https://github.com/facebook/react/raw/master/LICENSE","parents":"pillar-valley"},"react-native-animatable@1.3.3":{"licenses":"MIT","repository":"https://github.com/oblador/react-native-animatable","licenseUrl":"https://github.com/oblador/react-native-animatable/raw/master/LICENSE","parents":"pillar-valley"},"react-native-gesture-handler@1.6.1":{"licenses":"MIT","repository":"https://github.com/software-mansion/react-native-gesture-handler","licenseUrl":"https://github.com/software-mansion/react-native-gesture-handler/raw/master/LICENSE","parents":"pillar-valley"},"react-native-reanimated@1.7.1":{"licenses":"MIT","repository":"https://github.com/software-mansion/react-native-reanimated","licenseUrl":"https://github.com/software-mansion/react-native-reanimated/raw/master/LICENSE","parents":"pillar-valley"},"react-native-safe-area-context@0.7.3":{"licenses":"MIT","repository":"https://github.com/th3rdwave/react-native-safe-area-context","licenseUrl":"https://github.com/th3rdwave/react-native-safe-area-context/raw/master/LICENSE","parents":"pillar-valley"},"react-native-screens@2.2.0":{"licenses":"MIT","repository":"https://github.com/kmagiera/react-native-screens","licenseUrl":"https://github.com/kmagiera/react-native-screens/raw/master/LICENSE","parents":"pillar-valley"},"react-native-web@0.11.7":{"licenses":"MIT","repository":"https://github.com/necolas/react-native-web","licenseUrl":"https://github.com/necolas/react-native-web","parents":"pillar-valley"},"react-native@0.61.4":{"licenses":"MIT","repository":"https://github.com/facebook/react-native","licenseUrl":"https://github.com/facebook/react-native/raw/master/LICENSE","parents":"pillar-valley"},"react-redux@5.0.7":{"licenses":"MIT","repository":"https://github.com/reactjs/react-redux","licenseUrl":"https://github.com/reactjs/react-redux/raw/master/LICENSE.md","parents":"pillar-valley"},"react@16.12.0":{"licenses":"MIT","repository":"https://github.com/facebook/react","licenseUrl":"https://github.com/facebook/react/raw/master/LICENSE","parents":"pillar-valley"},"redux-persist@5.10.0":{"licenses":"MIT","repository":"https://github.com/rt2zz/redux-persist","licenseUrl":"https://github.com/rt2zz/redux-persist/raw/master/LICENSE","parents":"pillar-valley"},"three.proton.js@0.1.5":{"licenses":"MIT","repository":"https://github.com/a-jie/three.proton","licenseUrl":"https://github.com/a-jie/three.proton","parents":"pillar-valley"},"three@0.113.2":{"licenses":"MIT","repository":"https://github.com/mrdoob/three.js","licenseUrl":"https://github.com/mrdoob/three.js/raw/master/LICENSE","parents":"pillar-valley"}}')},234:function(e,t,a){"use strict";(function(e){var n=a(14),r=a.n(n),s=a(2),o=a.n(s),i=a(5),c=a.n(i),l=a(7),u=a.n(l),p=a(13),h=a.n(p),d=a(8),f=a.n(d),m=a(4),g=a.n(m),y=a(28),v=a.n(y),b=a(1),x=a(42),w=a(125),k=a(328),E=a(68),C=a(26),S=function(t){function a(){var t,n;c()(this,a);for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];return(n=u()(this,(t=g()(a)).call.apply(t,[this].concat(i)))).loadAsync=function(t){var r,s;return o.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return 13.33333335,e.PlayerBallGeom=e.PlayerBallGeom||new b.CylinderBufferGeometry(13.33333335,13.33333335,9,24),e.PlayerBallMaterial=e.PlayerBallMaterial=new b.MeshPhongMaterial({color:w.a.gold}),(r=new b.Mesh(e.PlayerBallGeom.clone(),e.PlayerBallMaterial.clone())).position.y=4.5,n.add(r),(s=new k.a({radius:5,color:16777215})).rotation.x=-Math.PI/2,s.position.y=10,n.circle=s,n.resetCircle(),n.add(s),i.next=14,o.a.awrap(v()(g()(a.prototype),"loadAsync",h()(n)).call(h()(n),t));case 14:case"end":return i.stop()}}))},n.resetCircle=function(){n.circle.visible=!1,n.circle.scale.x=.001,n.circle.scale.y=.001,n.circle.alpha=.5},n.hide=function(e){e=e||{},n.resetCircle(),x.d.to(h()(n),e.duration||.7,r()({alpha:0},e))},n.landed=function(e){if(C.a.circleEnabled){n.circle.visible=!0;var t=5+15*e;x.d.to(n.circle.scale,.7,{x:t,y:t,ease:x.c.easeOut}),x.d.to(n.circle,.7,{alpha:0,ease:x.c.easeOut,onComplete:n.resetCircle})}},n}return f()(a,t),a}(E.a);t.a=S}).call(this,a(39))},26:function(e,t,a){"use strict";var n={facebookLoginProps:{permissions:["public_profile","email"]},circleEnabled:!1,isSimulator:!a(32).a.isDevice,isFirebaseEnabled:!1,isAutoStartEnabled:!1,isScreenshotEnabled:!1,isMotionMenuEnabled:!0,isComposerEnabled:!1,debug:!1,ballDistance:60,rotationSpeed:4,epsilon:15,angleRange:[25,155],visibleTargets:5,slug:"users",isEveryScoreBest:!1,isCacheProfileUpdateActive:!0,shouldDelayFirebaseProfileSyncInMinutes:60,canEditPhoto:!1,leaderPageSize:25};t.a=n},320:function(e,t,a){"use strict";(function(e){var n=a(2),r=a.n(n),s=a(5),o=a.n(s),i=a(6),c=a.n(i),l=a(7),u=a.n(l),p=a(4),h=a.n(p),d=a(8),f=a.n(d),m=a(0),g=a.n(m),y=a(9),v=a(10),b=a(26),x=a(355),w=a(329),k=a(351),E=a(335),C=a(336),S=function(t){function a(){var e,t;o()(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(t=u()(this,(e=h()(a)).call.apply(e,[this].concat(s)))).onContextCreate=function(e){return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(t.machine.onContextCreateAsync(e));case 2:t.props.onLoad();case 3:case"end":return a.stop()}}))},t.onLicensesPress=function(){t.props.navigation.navigate("Licenses")},t.onLeaderboardPress=function(){b.a.isFirebaseEnabled?t.props.navigation.navigate("Social"):alert("Expo Online is disabled")},t}return f()(a,t),c()(a,[{key:"componentWillMount",value:function(){b.a.isSimulator||(this.machine=new x.a)}},{key:"componentWillUnmount",value:function(){this.machine=null}},{key:"render",value:function(){return g.a.createElement(v.a,{style:P.container,pointerEvents:"box-none"},this.gameScreen,g.a.createElement(E.a,null),g.a.createElement(k.a,{onLeaderboardPress:this.onLeaderboardPress,onLicensesPress:this.onLicensesPress}))}},{key:"gameScreen",get:function(){var t=this;return b.a.isSimulator?g.a.createElement(v.a,{style:{flex:1,backgroundColor:"red"}}):g.a.createElement(C.a,{style:P.touchable,onTouchesBegan:this.machine.onTouchesBegan},g.a.createElement(w.a,{ref:function(a){return e.gameRef=t.ref=a},key:"game",onContextCreate:this.onContextCreate,onRender:this.machine.onRender,onResize:this.machine.onResize}))}}]),a}(g.a.Component);t.a=S;var P=y.a.create({container:{flex:1},touchable:{flex:1,overflow:"hidden"}})}).call(this,a(39))},325:function(e,t,a){"use strict";(function(e){var n=a(22),r=a.n(n),s=a(2),o=a.n(s),i=a(5),c=a.n(i),l=a(6),u=a.n(l),p=a(7),h=a.n(p),d=a(13),f=a.n(d),m=a(4),g=a.n(m),y=a(28),v=a.n(y),b=a(8),x=a.n(b),w=a(23),k=a(137),E=a(83),C=a(357),S=a(194),P=a(42),A=a(51),T=a(16),I=a(1),M=a(26),B=a(68),z=a(326),O=a(200),R=a(234),U=a(183),L=a(86),D=a(63);function j(e,t){var a=e.x-t.x,n=e.z-t.z;return Math.sqrt(a*a+n*n)}var _=function(t){function n(t,r,s){var i;return c()(this,n),(i=h()(this,g()(n).call(this))).state=D.a.Menu,i.balls=[],i.targets=[],i.offset={x:0,z:0},i.taps=0,i.hue=19,i.observeMotion=function(){M.a.isMotionMenuEnabled&&("web"!==T.a.OS&&C.a.setUpdateInterval(30),i._subscribe())},i._subscribe=function(){if("web"===T.a.OS){window.addEventListener("mousemove",(function(e){var t=e.pageX,a=e.pageY,n=A.a.get("window"),r=n.width,s=n.height;i.offset={x:-.1*(r/2-t),z:-.1*(s/2-a)}}))}else{i._subscription=C.a.addListener((function(e){var t=e.accelerationIncludingGravity,a=void 0===t?{}:t;i.offset={x:-4*a.x,z:-4*a.z}}))}},i._unsubscribe=function(){i._subscription&&i._subscription.remove(),i._subscription=null},i.createScene=function(){var e=new I.Scene,t=i.color;return e.background=t,e.fog=new I.Fog(t,100,950),e.add(f()(i)),e},i.createCameraAsync=function(e,t){var a;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return(a=new I.PerspectiveCamera(70,e/t,1,1e4)).position.set(20,260,100),a.lookAt(new I.Vector3),a.ogPosition=a.position.clone(),n.abrupt("return",a);case 5:case"end":return n.stop()}}))},i.generateDirection=function(){i.direction=2*Math.round(Object(L.a)(0,1))-1},i.loadMenu=function(){var e,t,n,r,s,c,l;return o.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return i.observeMotion(),e=function(e,t){var a,n;return o.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=I.MeshBasicMaterial,r.next=3,o.a.awrap(Object(S.b)({asset:e}));case 3:return r.t1=r.sent,r.t2={map:r.t1},a=new r.t0(r.t2),n=new U.a({color:t}),r.abrupt("return",[n,n,a,n,n,n]);case 8:case"end":return r.stop()}}))},t=function(t){var a,n,r,s,i=arguments;return o.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:14381128,n=33.3333333,c.next=4,o.a.awrap(e(t,a));case 4:return r=c.sent,(s=new I.Mesh(new I.CubeGeometry(3*n,1e3,n,1,1,1),r)).position.y=-500,c.abrupt("return",s);case 8:case"end":return c.stop()}}))},n=new I.Object3D,-30,n.position.x=-30,n.position.z=-200,u.next=9,o.a.awrap(t(a(521)));case 9:return r=u.sent,n.add(r),r.position.y=-1100,P.d.to(r.position,1.1,{y:-500,ease:P.a.easeOut,delay:0}),u.next=15,o.a.awrap(t(a(522)));case 15:return s=u.sent,n.add(s),s.position&&(s.position.y=-1100,s.position.x=55,s.position.z=55,P.d.to(s.position,1,{y:-530,ease:P.a.easeOut,delay:.1})),u.next=20,o.a.awrap(t(a(523),15584191));case 20:c=u.sent,n.add(c),c.position.y=-1100,c.position.x=30,c.position.z=105,P.d.to(c.position,1,{y:-540,ease:P.b.easeOut,delay:.2}),(l=new I.Object3D).add(n),i.scene.add(l),i.pillars=[r,s,c],i.titleGroup=l;case 31:case"end":return u.stop()}}))},i.loadGame=function(){var e,t,a,n;return o.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return i.cachedRotationVelocity=M.a.rotationSpeed,i.steps=0,i.generateDirection(),r.next=5,o.a.awrap(i.add(new B.a));case 5:return i.gameGroup=r.sent,r.next=8,o.a.awrap(i.gameGroup.add(new B.a));case 8:return i.targetGroup=r.sent,r.next=11,o.a.awrap(i.gameGroup.add(new B.a));case 11:return i.ballGroup=r.sent,r.next=14,o.a.awrap(i.ballGroup.add(new R.a));case 14:return(e=r.sent).x=0,e.z=M.a.ballDistance,r.next=19,o.a.awrap(i.ballGroup.add(new R.a));case 19:return(t=r.sent).x=0,t.z=0,i.balls=[e,t],i.alpha=1,i.rotationAngle=0,i.mainBall=1,i.balls[1-i.mainBall].scale.set(1,1,1),i.balls[i.mainBall].scale.set(1,1,1),r.next=30,o.a.awrap(i.targetGroup.add(new O.a));case 30:(a=r.sent).x=0,a.z=i.balls[0].z,i.targets.push(a),n=0;case 35:if(!(n<i.getVisibleTargetsCount())){r.next=41;break}return r.next=38,o.a.awrap(i.addTarget());case 38:n++,r.next=35;break;case 41:i.targets[0].becomeCurrent();case 42:case"end":return r.stop()}}))},i.score=0,i.startGame=function(){i.state!==D.a.playing&&(i._unsubscribe(),P.d.to(i.titleGroup.position,1,{y:-1100,ease:P.b.easeOut,onComplete:function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.awrap(i.loadGame());case 2:i.setGameState(D.a.playing);case 3:case"end":return e.stop()}}))}}))},i.setGameState=function(e){i.state=e},i.onTouchesBegan=function(e){return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e.pageX,e.pageY,i.state===D.a.Menu?i.startGame():(i.changeBall(),0===Math.round(Object(L.a)(0,3))&&i.takeScreenshot());case 2:case"end":return t.stop()}}))},i.animateBackgroundColor=function(e){P.d.to(f()(i),2,{hue:e*Object(L.a)(3,20)%50,onUpdate:function(){var e=i.color;i.scene.background=e,i.scene.fog=new I.Fog(e,100,950)}}),P.d.to(i.renderer,1,{y:-530,ease:P.a.easeOut,delay:.1})},i.runHapticsWithValue=function(e){"ios"===T.a.OS&&(e<.3?k.a(E.a.Light):e<.6?k.a(E.a.Medium):k.a(E.a.Heavy))},i.valueForPerfection=function(e){return Math.floor(6*e)},i.testCollisionWithGem=function(e){return j(i.balls[i.mainBall].position,e.position)<20},i.changeBall=function(){var e,t,a;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(i.taps+=1,i.taps%3===0&&i.animateBackgroundColor(i.taps),i.loaded){n.next=4;break}return n.abrupt("return");case 4:if(!((e=j(i.balls[i.mainBall].position,i.targets[1].position))<M.a.epsilon)){n.next=34;break}t=1-e/M.a.epsilon,w.dispatch.game.play(),w.dispatch.score.increment(),i.score+=1,i.runHapticsWithValue(t),i.particles&&i.particles.impulse(),i.balls[i.mainBall].x=i.targets[1].x,i.balls[i.mainBall].z=i.targets[1].z,i.generateDirection(),a=i.targets.shift(),i.currentTarget&&i.currentTarget.updateDirection(i.direction),a.animateOut(),i.targets[0].becomeCurrent(),i.score>3&&i.targets[0].showGems(i.valueForPerfection(t)),i.targets[1].becomeTarget(),i.balls[i.mainBall].landed(t),i.mainBall=1-i.mainBall,i.balls[1-i.mainBall].scale.set(1,1,1),i.balls[i.mainBall].scale.set(1,1,1),i.rotationAngle-=180;case 26:if(!(i.targets.length<i.getVisibleTargetsCount())){n.next=31;break}return n.next=29,o.a.awrap(i.addTarget());case 29:n.next=26;break;case 31:i.syncTargetsAlpha(),n.next=35;break;case 34:i.gameOver();case 35:case"end":return n.stop()}}))},i.getVisibleTargetsCount=function(){var e=Math.floor(i.score/10);return e<4?Math.max(4,M.a.visibleTargets-e):Math.max(3,M.a.visibleTargets-i.score%5)},i.alphaForTarget=function(e){return 1-(e-1)/i.getVisibleTargetsCount()},i.syncTargetsAlpha=function(){for(var e=0;e<i.targets.length;e++)i.targets[e].alpha=i.alphaForTarget(e)},i.takeScreenshot=function(){return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.screenShotTaken&&M.a.isScreenshotEnabled){t.next=2;break}return t.abrupt("return");case 2:return i.screenShotTaken=!0,t.next=5,o.a.awrap(w.dispatch.screenshot.updateAsync({ref:e.gameRef,width:i._width,height:i._height}));case 5:case"end":return t.stop()}}))},i.gameOver=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(i.takeScreenshot(),i.screenShotTaken=!1,w.dispatch.score.reset(),i.score=0,w.dispatch.game.menu(),i.cachedRotationVelocity=0,e){i.balls[i.mainBall].hide({onComplete:function(){return i.reset()}}),i.balls[1-i.mainBall].hide({duration:.4});var t=i.targets,a=Array.isArray(t),n=0;for(t=a?t:t["function"===typeof Symbol&&"function"===typeof Symbol?Symbol.iterator:"@@iterator"]();;){var r;if(a){if(n>=t.length)break;r=t[n++]}else{if((n=t.next()).done)break;r=n.value}var s=r;s.animateOut()}}else i.reset()},i.addTarget=function(){var e,t,a,n,r,s;return o.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return i.steps++,e=i.targets[i.targets.length-1].x,t=i.targets[i.targets.length-1].z,c.next=5,o.a.awrap(i.targetGroup.add(new O.a));case 5:a=c.sent,n=Object(L.a)(M.a.angleRange[0]+90,M.a.angleRange[1]+90),r=I.Math.degToRad(n),a.x=e+M.a.ballDistance*Math.sin(r),a.z=t+M.a.ballDistance*Math.cos(r),s=i.targets[i.targets.length-1],i.targets.push(a),a.lastAngle=Math.atan2(s.z-a.z,s.x-a.x),a.alpha=i.alphaForTarget(i.targets.length),a.animateIn();case 15:case"end":return c.stop()}}))},i.onResize=function(e){var t=e.width,a=e.height;i.camera.aspect=t/a,i.camera.updateProjectionMatrix()},i._game=f()(i),i.renderer=s,i._width=t,i._height=r,M.a.isAutoStartEnabled&&i.setGameState(D.a.Playing),i.observeMotion(),i}return x()(n,t),u()(n,[{key:"reset",value:function(){var e,t,a,r,s,i;return o.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:v()(g()(n.prototype),"reset",this).call(this),this.gameGroup&&(this.gameGroup.z=0,this.gameGroup.x=0),this.cachedRotationVelocity=M.a.rotationSpeed,this.steps=0,this.generateDirection(),this.rotationAngle=0,this.mainBall=1,this.balls[0]&&(this.balls[0].x=0,this.balls[0].z=M.a.ballDistance),this.balls[1]&&(this.balls[1].x=0,this.balls[1].z=0),this.alpha=1,this.balls[1-this.mainBall].scale.set(1,1,1),this.balls[this.mainBall].scale.set(1,1,1),e=this.targets,t=Array.isArray(e),a=0,e=t?e:e["function"===typeof Symbol&&"function"===typeof Symbol?Symbol.iterator:"@@iterator"]();case 13:if(!t){c.next=19;break}if(!(a>=e.length)){c.next=16;break}return c.abrupt("break",27);case 16:r=e[a++],c.next=23;break;case 19:if(!(a=e.next()).done){c.next=22;break}return c.abrupt("break",27);case 22:r=a.value;case 23:r.destroy();case 25:c.next=13;break;case 27:return this.targets=[],c.next=30,o.a.awrap(this.targetGroup.add(new O.a));case 30:(s=c.sent)&&(s.x=0,s.z=this.balls[0].z,this.targets.push(s)),i=0;case 33:if(!(i<this.getVisibleTargetsCount())){c.next=39;break}return c.next=36,o.a.awrap(this.addTarget());case 36:i++,c.next=33;break;case 39:this.targets[0].becomeCurrent(),this.targets[1].becomeTarget();case 41:case"end":return c.stop()}}),null,this)}},{key:"loadAsync",value:function(){var e,t,a,s,i,c=this;return o.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return this.scene=this.createScene(),l.next=3,o.a.awrap(this.createCameraAsync(this._width,this._height));case 3:return this.camera=l.sent,e=[new z.a],t=e.map((function(e){return c.add(e)})),l.next=8,o.a.awrap(Promise.all(t));case 8:if(a=l.sent,s=r()(a,2),s[0],i=s[1],this.particles=i,this.state!==D.a.Menu){l.next=19;break}return l.next=16,o.a.awrap(this.loadMenu());case 16:w.dispatch.game.menu(),l.next=22;break;case 19:return w.dispatch.game.play(),l.next=22,o.a.awrap(this.loadGame());case 22:return l.next=24,o.a.awrap(v()(g()(n.prototype),"loadAsync",this).call(this,this.scene));case 24:case"end":return l.stop()}}),null,this)}},{key:"update",value:function(e,t){if(this.state===D.a.Menu)this.camera.position.z-=.03*(this.offset.z+this.camera.position.z),this.camera.position.x-=.03*(this.offset.x+this.camera.position.x);else{if(this.camera.position.z=this.camera.ogPosition.z,this.camera.position.x=this.camera.ogPosition.x,!this.loaded)return;v()(g()(n.prototype),"update",this).call(this,e,t);j(this.balls[this.mainBall].position,this.targets[1].position);var a=this.steps<=this.getVisibleTargetsCount(),r=this.balls[this.mainBall].scale.x<=.01;if(!a)if(r)this.balls[this.mainBall].scale.set(1,1,1),this.gameOver(!1);else{var s=Math.max(.01,this.balls[this.mainBall].scale.x-.3*e);this.balls[this.mainBall].scale.set(s,1,s)}var o=Math.min(this.cachedRotationVelocity+.05*this.score,6);this.rotationAngle=(this.rotationAngle+o*this.direction)%360;var i=I.Math.degToRad(this.rotationAngle);this.balls[this.mainBall].x=this.balls[1-this.mainBall].x-M.a.ballDistance*Math.sin(i),this.balls[this.mainBall].z=this.balls[1-this.mainBall].z+M.a.ballDistance*Math.cos(i);var c=this.balls[1-this.mainBall].position.x,l=this.balls[1-this.mainBall].position.z;if(this.gameGroup.z-=.03*(l-0+this.gameGroup.z),this.gameGroup.x-=.03*(c-0+this.gameGroup.x),this.currentTarget&&this.currentTarget.gems&&this.currentTarget.gems.length){var u=this.currentTarget.gems.filter((function(e){return e.canBeCollected&&void 0!==e._driftAngle}));if(u.length){var p=new I.Vector3;this.balls[this.mainBall].getWorldPosition(p);var h=u,d=Array.isArray(h),f=0;for(h=d?h:h["function"===typeof Symbol?Symbol.iterator:"@@iterator"]();;){var m;if(d){if(f>=h.length)break;m=h[f++]}else{if((f=h.next()).done)break;m=f.value}var y=m,b=new I.Vector3;y.getWorldPosition(b),j(p,b)<15&&(y.pickup(),w.dispatch.currency.change(y.getValue()))}}}}}},{key:"color",get:function(){return new I.Color("hsl("+this.hue+", 88%, 66%)")}},{key:"currentTarget",get:function(){return this.targets[0]}}]),n}(B.a);t.a=_}).call(this,a(39))},326:function(e,t,a){"use strict";var n=a(2),r=a.n(n),s=a(5),o=a.n(s),i=a(6),c=a.n(i),l=a(7),u=a.n(l),p=a(4),h=a.n(p),d=a(8),f=a.n(d),m=a(1),g=function(e){function t(){return o()(this,t),u()(this,h()(t).apply(this,arguments))}return f()(t,e),c()(t,[{key:"loadAsync",value:function(e){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:this.add(this.hemisphere),this.add(this.shadow);case 2:case"end":return e.stop()}}),null,this)}},{key:"hemisphere",get:function(){return new m.HemisphereLight(11184810,0,.9)}},{key:"shadow",get:function(){var e=new m.DirectionalLight(16777215,.9);return e.position.set(0,350,350),e}}]),t}(a(68).a);t.a=g},327:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return b}));var n=a(5),r=a.n(n),s=a(6),o=a.n(s),i=a(7),c=a.n(i),l=a(4),u=a.n(l),p=a(28),h=a.n(p),d=a(8),f=a.n(d),m=a(137),g=a(16),y=a(1),v=a(125),b=function(t){function a(){return r()(this,a),c()(this,u()(a).apply(this,arguments))}return f()(a,t),o()(a,[{key:"pickup",value:function(){if(h()(u()(a.prototype),"pickup",this).call(this),"ios"===g.a.OS)try{m.b()}catch(e){}}},{key:"getValue",value:function(){return 2}},{key:"getMaterial",value:function(){return e.DoubleGemMaterial=e.DoubleGemMaterial||new y.MeshPhongMaterial({color:v.a.red}),e.DoubleGemMaterial.clone()}}]),a}(a(184).a)}).call(this,a(39))},328:function(e,t,a){"use strict";var n=a(6),r=a.n(n),s=a(5),o=a.n(s),i=a(7),c=a.n(i),l=a(4),u=a.n(l),p=a(8),h=a.n(p),d=a(1),f=function(e){function t(e){var a;return o()(this,t),(a=c()(this,u()(t).call(this))).moveTo(0,e),a.quadraticCurveTo(e,e,e,0),a.quadraticCurveTo(e,-e,0,-e),a.quadraticCurveTo(-e,-e,-e,0),a.quadraticCurveTo(-e,e,0,e),a}return h()(t,e),t}(d.Shape),m=function(e){function t(e){var a,n=e.radius,r=e.color;o()(this,t);var s=new f(n),i=new d.ShapeBufferGeometry(s),l=new d.MeshPhongMaterial({color:r,transparent:!0});return(a=c()(this,u()(t).call(this,i,l)))._alpha=1,a.explode=function(){},a.update=function(){},a.mat=l,a}return h()(t,e),r()(t,[{key:"alpha",set:function(e){this._alpha=e;var t=1!==e;this.materials?this.materials.map((function(a){a.transparent=t,a.opacity=e})):this.material&&(this.material.transparent=t,this.material.opacity=e)},get:function(){return this._alpha}}]),t}(d.Mesh);t.a=m},329:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return S}));var n=a(2),r=a.n(n),s=a(5),o=a.n(s),i=a(6),c=a.n(i),l=a(7),u=a.n(l),p=a(4),h=a.n(p),d=a(8),f=a.n(d),m=a(54),g=a.n(m),y=a(0),v=a.n(y),b=a(201),x=a(74),w=a(9),k=a(82),E=a.n(k),C=a(563),S=function(e){function t(){var e,a;o()(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=u()(this,(e=h()(t)).call.apply(e,[this].concat(s)))).state={appState:b.a.currentState,id:E()()},a.destroy=function(){a.gl=null,a.nativeRef=null,cancelAnimationFrame(a.rafID)},a.handleAppStateChangeAsync=function(e){if(a.state.appState.match(/inactive|background/)&&"active"===e){var t=a.props.onShouldReloadContext;if(t&&t())return a.destroy(),void a.setState({appState:e,id:E()()})}a.setState({appState:e})},a._saveNativeRef=function(e){a.nativeRef=e},a._onLayout=function(e){var t=e.nativeEvent.layout,n=t.x,r=t.y,s=t.width,o=t.height;if(a.gl&&a.props.onResize){var i=x.a.get();a.props.onResize({x:n,y:r,width:s,height:o,scale:i,pixelRatio:i})}},a._onContextCreate=function(e){var t,n,s,o;return r.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return a.gl=e,t=a.props,n=t.onContextCreate,s=t.onRender,g()(s,"expo-graphics: GraphicsView.onContextCreate(): `onRender` must be defined."),g()(n,"expo-graphics: GraphicsView.onContextCreate(): `onContextCreate` must be defined."),i.next=6,r.a.awrap(n({gl:e,width:e.drawingBufferWidth,height:e.drawingBufferHeight,scale:x.a.get()}));case 6:(function t(){if(a.gl){var n=.001*P(),r="undefined"!==typeof o?n-o:.16666;a.rafID=requestAnimationFrame(t),s(r),e.endFrameEXP(),o=n}})();case 8:case"end":return i.stop()}}))},a}return f()(t,e),c()(t,[{key:"componentDidMount",value:function(){b.a.addEventListener("change",this.handleAppStateChangeAsync)}},{key:"componentWillUnmount",value:function(){this.destroy(),b.a.removeEventListener("change",this.handleAppStateChangeAsync)}},{key:"render",value:function(){var e=this.props,t=(e.isArEnabled,e.shouldIgnoreSafeGuards,e.style,e.glviewStyle);return v.a.createElement(C.a,{key:this.state.id,onLayout:this._onLayout,style:[A.container,t],onContextCreate:this._onContextCreate})}}]),t}(v.a.Component);S.defaultProps={arRunningProps:{},arCameraProps:{},isShadowsEnabled:!1};var P=e.nativePerformanceNow||Date.now,A=w.a.create({container:{flex:1},errorContainer:{backgroundColor:"red",flex:1,justifyContent:"center",alignItems:"center"}})}).call(this,a(39))},335:function(e,t,a){"use strict";var n=a(92),r=a(0),s=a.n(r),o=a(9),i=a(24),c=a(10),l=a(67),u=a(55);t.a=Object(u.b)((function(e){var t=e.score;return{current:t.current,best:t.best,currency:e.currency.current}}))((function(e){var t=e.current,a=e.best,r=e.currency,o=Object(l.c)().top;return s.a.createElement(c.a,{style:[p.container,{top:o}]},s.a.createElement(c.a,{style:{flexDirection:"row"}},s.a.createElement(i.a,{style:[p.text,p.highScore]},a),s.a.createElement(i.a,{style:[p.text,p.score]},t)),!r&&s.a.createElement(c.a,{style:{flexDirection:"row",alignItems:"center"}},s.a.createElement(i.a,{style:[p.text,p.currency]},r),s.a.createElement(n.a,{name:"diamond",size:20,color:"lime",style:{marginHorizontal:6,userSelect:"none"}})))}));var p=o.a.create({container:{position:"absolute",left:0,right:0,paddingLeft:12,paddingRight:12,flexDirection:"row",justifyContent:"space-between",alignItems:"center"},text:{fontFamily:"GothamNarrow-Book",opacity:.8,fontSize:48,backgroundColor:"transparent",userSelect:"none"},score:{color:"white"},highScore:{color:"yellow",textAlign:"right",fontSize:24,marginRight:6},currency:{fontSize:24,color:"white"}})},336:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(18),r=a.n(n),s=a(21),o=a.n(s),i=a(0),c=a.n(i),l=a(10),u=a(9);function p(e){var t=e.onTouchesBegan,a=e.style,n=void 0===a?{}:a,s=o()(e,["onTouchesBegan","style"]);return c.a.createElement(l.a,r()({style:u.a.flatten([{flex:1,cursor:"pointer"},n]),tabIndex:"0",onKeyDown:function(e){13!==e.keyCode&&32!==e.keyCode||t(e)},onMouseDown:t,onTouchStart:t,onTouchEnd:function(e){return e.preventDefault()}},s))}},349:function(e,t,a){"use strict";a.d(t,"a",(function(){return pt}));var n=a(2),r=a.n(n),s=a(22),o=a.n(s),i=a(581),c=a(110),l=a(0),u=a.n(l),p=a(93),h=a(40),d=a(108),f=a(582),m=a(294),g=a(583),y=a(32),v=a(353),b=a(14),x=a.n(b),w=a(21),k=a.n(w),E=a(107),C=a(67),S=a(232),P=a(46),A=a(76),T=a(9),I=a(24),M=a(52),B=a(10),z=a(92);function O(e){var t=e.image,a=e.userUrl,n=e.username,r=e.name,s=e.version,o=e.licenses,i=e.repository,c=e.licenseUrl,u=(e.parents,r);return n&&u.toLowerCase()!=n.toLowerCase()&&(u+=" by "+n),l.createElement(B.a,null,l.createElement(B.a,{style:U.cardShadow},l.createElement(B.a,{style:U.card},t&&l.createElement(M.a,{onPress:function(){return A.a.openURL(a)}},l.createElement(P.a,{source:{uri:t},style:U.image})),l.createElement(M.a,{underlayColor:"#eeeeee",onPress:function(){return A.a.openURL(i)},style:U.item},l.createElement(B.a,{style:{maxWidth:"90%"}},l.createElement(I.a,{style:U.name},u),l.createElement(R,{style:U.text,url:c},o),l.createElement(R,{style:U.text},s)),l.createElement(z.a,{style:{alignSelf:"center"},color:"#34495e",size:16,name:"chevron-right"})))))}var R=function(e){var t=e.url,a=e.style,n=e.children;return l.createElement(I.a,{style:a,numberOfLines:1,onPress:function(){return t&&A.a.openURL(t)}},n)},U=T.a.create({card:{borderRadius:4,overflow:"hidden",flexDirection:"row",backgroundColor:"white",alignItems:"center"},cardShadow:{marginHorizontal:12,marginVertical:6,shadowColor:"black",shadowOpacity:.4,shadowOffset:{width:0,height:0},shadowRadius:2},item:{paddingVertical:16,paddingHorizontal:12,flex:1,justifyContent:"space-between",flexDirection:"row",backgroundColor:"transparent",maxWidth:"100%",flexWrap:"wrap"},name:{fontWeight:"bold",fontSize:16},image:{width:96,height:96,borderRadius:0},text:{color:"#34495e",marginTop:3}});var L,D=Object.keys(S).map((function(e){var t=S[e],a=t.licenses,n=k()(t,["licenses"]),r=e.split("@"),s=o()(r,2),i=s[0],c=s[1];if(e.startsWith("@")){var l=e.split("@");i="@"+l[1],c=l[2]}var u,p,h,d=(n.repository||n.licenseUrl).split("https://github.com/").pop().split("/").shift();return d&&(p="https://github.com/"+(d=(h=d).charAt(0).toUpperCase()+h.slice(1))+".png",u="https://github.com/"+d),x()({key:e,name:i,image:p,userUrl:u,username:d,licenses:a.slice(0,405),version:c},n)}));function j(){var e=Object(C.c)().bottom;return l.createElement(E.a,{style:{flex:1},keyExtractor:function(e){return e.key},data:D,contentContainerStyle:{paddingBottom:e},renderItem:function(e){var t=e.item;return l.createElement(O,t)}})}L="username",D.sort((function(e,t){return e[L]>t[L]?1:t[L]>e[L]?-1:0}));var _=a(320),N=a(55);var G=Object(N.b)((function(e){return{muted:e.muted}}))((function(e){var t=e.muted;return l.useEffect((function(){return t?p.a.shared.pauseAsync("song"):p.a.shared.playAsync("song",!0,!1),function(){return p.a.shared.stopAsync("song")}}),[t]),null}));var W=T.a.create({container:{width:"100%",height:"100%",flex:1},image:x()({},T.a.absoluteFillObject,{justifyContent:"center",alignItems:"center",backgroundColor:"#FFC266"})}),F=function(e){var t=e.navigation,n=u.a.useState(!0),r=o()(n,2),s=r[0],i=r[1];return u.a.createElement(B.a,{style:W.container},u.a.createElement(G,null),u.a.createElement(_.a,{navigation:t,onLoad:function(){return i(!1)}}),s&&u.a.createElement(P.a,{style:W.image,source:a(528)}))},V=a(18),H=a.n(V),q=a(23),J=a(38),K=a.n(J),Y=a(182),X=a(5),Q=a.n(X),Z=a(6),$=a.n(Z),ee=a(7),te=a.n(ee),ae=a(4),ne=a.n(ae),re=a(8),se=a.n(re),oe=a(69);function ie(e){var t=e.style,a=k()(e,["style"]);return u.a.createElement(oe.a,H()({underlayColor:"#eeeeee"},a,{style:[ce.touchable,t]}),u.a.createElement(I.a,{style:ce.text},"Load More..."))}var ce=T.a.create({touchable:{paddingVertical:16,paddingHorizontal:16,flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderTopWidth:T.a.hairlineWidth,borderTopColor:"rgba(0,0,0,0.3)"},text:{fontWeight:"bold",fontSize:16}});var le=function(e){return["st","nd","rd"][(((e<0?-e:e)+90)%100-10)%10-1]||"th"},ue={white:"white",carrot:"#e67e22",emerald:"#2ecc71",peterRiver:"#3498db",wisteria:"#8e44ad",alizarin:"#e74c3c",turquoise:"#1abc9c",midnightBlue:"#2c3e50"},pe=ue.carrot,he=ue.emerald,de=ue.peterRiver,fe=ue.wisteria,me=ue.alizarin,ge=ue.turquoise,ye=ue.midnightBlue,ve=function(e){function t(){return Q()(this,t),te()(this,ne()(t).apply(this,arguments))}return se()(t,e),$()(t,[{key:"setAvatarColor",value:function(){var e=this.props.name||"",t=e.toUpperCase().split(" ");1===t.length?this.avatarName=""+t[0].charAt(0):t.length>1?this.avatarName=""+t[0].charAt(0)+t[1].charAt(0):this.avatarName="";for(var a=0,n=0;n<e.length;n+=1)a+=e.charCodeAt(n);var r=[pe,he,de,fe,me,ge,ye];this.avatarColor=r[a%r.length]}},{key:"renderAvatar",value:function(){return"function"===typeof this.props.avatar?this.props.avatar():"string"===typeof this.props.avatar?u.a.createElement(P.a,{source:{uri:this.props.avatar},style:T.a.flatten([be.avatarStyle,this.props.avatarStyle])}):"number"===typeof this.props.avatar?u.a.createElement(P.a,{source:this.props.avatar,style:T.a.flatten([be.avatarStyle,this.props.avatarStyle])}):null}},{key:"renderInitials",value:function(){return u.a.createElement(I.a,{style:T.a.flatten([be.textStyle,this.props.textStyle])},this.avatarName)}},{key:"render",value:function(){var e=this;return this.props.name||this.props.avatar?this.props.avatar?u.a.createElement(M.a,{disabled:!this.props.onPress,style:{flex:1},onPress:function(){var t=e.props,a=(t.onPress,k()(t,["onPress"]));e.props.onPress&&e.props.onPress(a)},accessibilityTraits:"image"},this.renderAvatar()):(this.setAvatarColor(),u.a.createElement(M.a,{disabled:!this.props.onPress,onPress:function(){var t=e.props,a=(t.onPress,k()(t,["onPress"]));e.props.onPress&&e.props.onPress(a)},style:T.a.flatten([be.avatarStyle,{backgroundColor:this.avatarColor},this.props.avatarStyle]),accessibilityTraits:"image"},this.renderInitials())):u.a.createElement(B.a,{style:T.a.flatten([be.avatarStyle,be.avatarTransparent,this.props.avatarStyle]),accessibilityTraits:"image"})}}]),t}(u.a.PureComponent),be={avatarStyle:{justifyContent:"center",alignItems:"center",width:40,height:40,flex:1,borderRadius:20},avatarTransparent:{backgroundColor:"#B8B8B8"},textStyle:{color:ue.white,fontSize:16,backgroundColor:ue.backgroundTransparent,fontWeight:"100"}};ve.defaultProps={name:null,avatar:null,onPress:null,avatarStyle:{},textStyle:{}};var xe=function(e){function t(){return Q()(this,t),te()(this,ne()(t).apply(this,arguments))}return se()(t,e),$()(t,[{key:"render",value:function(){var e=this.props;e.children,e.style,e.subtext,e.simple;return null}}]),t}(u.a.Component),we=function(e){function t(){var e,a;Q()(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=te()(this,(e=ne()(t)).call.apply(e,[this].concat(r)))).onPress=function(){var e=a.props,t=e.item,n=e.index;(0,e.onPress)(t,n)},a}return se()(t,e),$()(t,[{key:"render",value:function(){var e=this.props,t=e.index,a=(e.onPress,e.style),n=k()(e,["index","onPress","style"]),r=this.props.item||{},s=r.displayName,o=r.score,i=r.photoURL,c=r.timestamp,l=t+1,p=l+le(l);return u.a.createElement(oe.a,H()({underlayColor:"#eeeeee"},n,{onPress:this.onPress,style:[ke.touchable,a]}),u.a.createElement(B.a,{style:ke.container},u.a.createElement(B.a,{style:{flexDirection:"row"}},u.a.createElement(I.a,{style:ke.rank},p),u.a.createElement(ve,{textStyle:{fontWeight:"bold"},avatarStyle:{marginRight:16},name:s,avatar:i}),u.a.createElement(B.a,null,u.a.createElement(I.a,{style:ke.text},s),u.a.createElement(I.a,{style:ke.subtitle},o," Points"),o&&u.a.createElement(xe,null,c))),u.a.createElement(d.a,{size:24,color:"#CCCCCC",name:"ios-arrow-forward"})))}}]),t}(u.a.Component),ke=T.a.create({touchable:{},container:{paddingVertical:16,paddingHorizontal:16,flexDirection:"row",justifyContent:"space-between",alignItems:"center"},rank:{alignSelf:"center",fontSize:24,minWidth:24,marginRight:8},text:{fontWeight:"bold"},subtitle:{opacity:.7}});function Ee(e){return u.a.createElement(B.a,H()({},e,{style:[Ce.container,e.style]}))}var Ce=T.a.create({container:{height:T.a.hairlineWidth,width:"auto",marginLeft:16,backgroundColor:"#CED0CE"}}),Se=function(e){function t(){var e,a;Q()(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=te()(this,(e=ne()(t)).call.apply(e,[this].concat(r)))).onPress=function(){var e=a.props,t=e.item,n=e.index;(0,e.onPress)(t,n)},a}return se()(t,e),$()(t,[{key:"render",value:function(){var e=this.props,t=(e.index,e.onPress),a=e.style,n=e.item,r=k()(e,["index","onPress","style","item"]);if(!n)return u.a.createElement(B.a,null);var s=n.displayName,o=n.score,i=n.photoURL;return u.a.createElement(oe.a,H()({underlayColor:"#eeeeee"},r,{onPress:this.onPress,style:T.a.flatten([Pe.touchable,a])}),u.a.createElement(B.a,{style:Pe.container},u.a.createElement(B.a,{style:{flexDirection:"row"}},u.a.createElement(I.a,{style:T.a.flatten([Pe.rank,{alignSelf:"center"}])},"ME"),u.a.createElement(ve,{textStyle:{fontWeight:"bold"},avatarStyle:{marginRight:16},name:s,avatar:i}),u.a.createElement(B.a,{styles:{alignItems:"flex-start"}},u.a.createElement(I.a,{style:Pe.rank},s),u.a.createElement(I.a,{style:Pe.text},u.a.createElement(I.a,{style:Pe.subtitle},o," Points")))),t&&u.a.createElement(d.a,{size:24,color:"#CCCCCC",name:"ios-arrow-forward"})))}}]),t}(u.a.Component);Se.defaultProps={item:{},index:0,onPress:function(){alert("must override UserCell.onPress")}};var Pe=T.a.create({touchable:{},container:{paddingVertical:16,paddingHorizontal:16,flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderTopWidth:T.a.hairlineWidth,borderTopColor:"rgba(0,0,0,0.3)"},rank:{fontSize:24,minWidth:36,marginRight:8},text:{fontWeight:"bold",fontSize:16},subtitle:{fontSize:12,opacity:.7}}),Ae=function(e){function t(){var e,a;Q()(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=te()(this,(e=ne()(t)).call.apply(e,[this].concat(r)))).keyExtractor=function(e,t){return"item-"+t},a.renderItem=function(e){return a.props.renderItem?a.props.renderItem(e):u.a.createElement(we,H()({},e,{onPress:a.props.onPress}))},a}return se()(t,e),$()(t,[{key:"render",value:function(){var e=this.props,t=e.style,a=(e.title,e.userItem,e.onPressHeader,e.onPressFooter,e.onPress,e.headerButtonTitle,e.noMore,k()(e,["style","title","userItem","onPressHeader","onPressFooter","onPress","headerButtonTitle","noMore"]));return u.a.createElement(B.a,{style:{flex:1}},u.a.createElement(E.a,H()({style:[t,Te.container],keyExtractor:this.keyExtractor,ListFooterComponent:this.footer,ItemSeparatorComponent:Ee,renderItem:this.renderItem},a)),this.userItem)}},{key:"userItem",get:function(){return this.props.renderUserItem?this.props.renderUserItem():u.a.createElement(Se,{style:{backgroundColor:"white"},item:this.props.userItem,onPress:this.props.onPress})}},{key:"footer",get:function(){var e=this;return this.props.noMore?null:function(t){return u.a.createElement(ie,H()({},t,{item:e.props.userItem,onPress:e.props.onPressFooter}))}}}]),t}(u.a.Component),Te=T.a.create({container:{}}),Ie=Ae,Me=a(26),Be=a(185);var ze=T.a.create({container:{flex:1}}),Oe=Object(N.b)((function(e){var t=e.user,a=e.leaders;return{user:t,leaders:Object.values(a).sort((function(e,t){return e.score<t.score}))}}))((function(e){var t=e.showActionSheetWithOptions,a=e.user,n=e.leaders,s=e.navigation,i=u.a.useState("Forever"),c=o()(i,2),l=c[0],p=c[1],d=u.a.useState(!1),f=o()(d,2),m=f[0],g=f[1],v=u.a.useState({}),b=o()(v,2),w=(b[0],b[1],u.a.useState(!0)),k=o()(w,2),E=k[0],C=k[1],S=u.a.useState(null),P=o()(S,2),A=P[0],T=P[1];u.a.useEffect((function(){a&&I()}),[(a||{}).uid]);var I=function(){var e;return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(h.a.shared.uid){t.next=2;break}return t.abrupt("return");case 2:if(!m){t.next=4;break}return t.abrupt("return");case 4:e=setTimeout((function(){g(!1)}),5e3),g(!0),q.dispatch.leaders.getPagedAsync({start:A,size:Me.a.leaderPageSize,callback:function(t){var a=t.cursor,n=t.noMore;clearTimeout(e),g(!1),C(!n),T(a)}});case 7:case"end":return t.stop()}}))},M=function(e){s.navigate("Profile",x()({title:e.name},e))};return u.a.createElement(B.a,{style:ze.container},u.a.createElement(Ie,{noMore:!E,renderItem:function(e){return u.a.createElement(we,H()({onPress:M},e))},title:"Players",headerButtonTitle:l,data:n,userItem:a,onPress:M,onPressHeader:function(){var e=["Today","This Week","Forever","Cancel"],a=e.length-1;t({options:e,icons:["md-show-chart"],cancelButtonIndex:a},(function(t){t!==a&&p(e[t])}))},renderUserItem:function(){return null},onPressFooter:I,refreshControl:u.a.createElement(Y.a,{tintColor:y.a.manifest.primaryColor,refreshing:m,onRefresh:I})}))})),Re=Object(Be.connectActionSheet)(Oe),Ue=a(242),Le=a(98),De=a(196);function je(e){var t=e.onPress,a=e.style;k()(e,["onPress","style"]);return u.a.createElement(M.a,{style:a,onPress:t},u.a.createElement(B.a,{style:{width:36,height:36,borderRadius:18,backgroundColor:"orange",justifyContent:"center",alignItems:"center"}},u.a.createElement(De.a,{style:{backgroundColor:"transparent"},name:"add",color:"white",size:24})))}var _e=function(e){function t(){var e,a;Q()(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=te()(this,(e=ne()(t)).call.apply(e,[this].concat(s))))._getPermission=function(e){var t;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(Le.c(e));case 2:if(t=a.sent,"granted"===t.status){a.next=7;break}return A.a.openURL("app-settings:"),a.abrupt("return",!1);case 7:return a.abrupt("return",!0);case 8:case"end":return a.stop()}}))},a._takePhoto=function(){var e;return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.awrap(a._getPermission(Le.a));case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,r.a.awrap(Ue.a({allowsEditing:!0,aspect:[4,3]}));case 7:(e=t.sent).cancelled||a._setNewPhoto(e.uri);case 9:case"end":return t.stop()}}))},a._setNewPhoto=function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:alert("TODO: Evan: Add photo upload",e);case 1:case"end":return t.stop()}}))},a._selectPhoto=function(){var e;return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.awrap(a._getPermission(Le.b));case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,r.a.awrap(Ue.b({allowsEditing:!0,aspect:[4,3]}));case 7:(e=t.sent).cancelled||a._setNewPhoto(e.uri);case 9:case"end":return t.stop()}}))},a._viewProfilePicture=function(){},a.onPress=function(){var e,t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(Me.a.canEditPhoto){n.next=2;break}return n.abrupt("return");case 2:if(a.props.isUser){n.next=5;break}return a._viewProfilePicture(),n.abrupt("return");case 5:e=[{name:"View Profile Picture",action:a._viewProfilePicture},{name:"Take New Photo",action:a._takePhoto},{name:"Select New Photo",action:a._selectPhoto},{name:"Cancel"}],0,t=e.length-1,a.props.showActionSheetWithOptions({options:e.map((function(e){return e.name})),cancelButtonIndex:t},(function(a){if(a!==t){var n=e[a].action;console.log(a,e[a]),n&&n(a)}}));case 9:case"end":return n.stop()}}))},a}return se()(t,e),$()(t,[{key:"render",value:function(){var e=this.props,t=e.image,a=e.isUser,n=e.name;return u.a.createElement(B.a,{style:{marginRight:16,height:128,width:128,minWidth:128,minHeight:128}},u.a.createElement(M.a,{onPress:this.onPress},u.a.createElement(ve,{textStyle:{fontWeight:"bold",fontSize:48},avatarStyle:{width:"100%",height:"100%",borderRadius:64},name:n,avatar:t}),a&&Me.a.canEditPhoto&&u.a.createElement(je,{style:{position:"absolute",bottom:0,right:0}})))}}]),t}(u.a.Component);function Ne(e){var t=e.name,a=e.createdAt,n=t||"";return"string"===typeof t&&(n=n.trim()),u.a.createElement(B.a,{style:Ge.container},u.a.createElement(I.a,{style:Ge.paragraph},n),u.a.createElement(xe,{subtext:"Created "},a),!1)}var Ge=T.a.create({container:{alignItems:"flex-start",justifyContent:"center"},subtitle:{fontSize:14,marginTop:2,maxWidth:"80%"},paragraph:{fontSize:18,fontWeight:"bold",textAlign:"center",color:"#34495e"}}),We=(a(531),u.a.forwardRef((function(e,t){return u.a.createElement(z.a.Button,H()({ref:t,name:"sign-out",backgroundColor:"#CA5D6B",children:"Log Out",onPress:function(){return K.a.auth().signOut()}},e))}))),Fe=u.a.forwardRef((function(e,t){return u.a.createElement(z.a.Button,H()({ref:t,name:"facebook",backgroundColor:"#3b5998",children:"Link with Facebook",onPress:function(){return q.dispatch.facebook.upgradeAccount()}},e))}));function Ve(e){var t=e.canLogout;return u.a.createElement(B.a,{style:He.container},!t&&u.a.createElement(I.a,{style:He.text},"Link your account to access your score and achievements across games and devices."),t&&u.a.createElement(We,null),!t&&u.a.createElement(Fe,null))}var He=T.a.create({container:{alignItems:"flex-start",borderTopWidth:T.a.hairlineWidth,borderTopColor:"gray",paddingTop:8,marginTop:24},text:{fontSize:14,marginBottom:8}});var qe=T.a.create({container:{flex:1,padding:24},row:{flexDirection:"row",alignItems:"center"},reportButton:{fontWeight:"bold",marginRight:12,color:"white"}}),Je=Object(Be.connectActionSheet)((function(e){var t=e.user,a=void 0===t?{}:t,n=!!a.fbuid,r=n,s=a.displayName||a.deviceName,o=a.createdAt||a.lastRewardTimestamp,i=h.a.shared.uid===a.uid,c=n?"https://graph.facebook.com/"+a.fbuid+"/picture?type=large":a.photoURL;return u.a.useEffect((function(){q.dispatch.players.getAsync({uid:a.uid})}),[]),u.a.createElement(B.a,{style:qe.container},u.a.createElement(B.a,{style:qe.row},u.a.createElement(_e,{isUser:i,name:s,image:c}),u.a.createElement(Ne,{name:s,createdAt:o})),i&&u.a.createElement(Ve,{canLogout:r}))})),Ke=Object(N.b)((function(e){return{players:e.players}}),{},(function(e,t,a){var n=e.players,r=void 0===n?{}:n,s=k()(e,["players"]),o=a.route.uid||h.a.shared.uid,i=r[o];return x()({},a,t,s,{uid:o,user:i})}))(Je);function Ye(e){var t=e.title,a=e.buttonTitle,n=e.index,r=e.onPress,s=k()(e,["title","buttonTitle","index","onPress"]);return u.a.createElement(oe.a,H()({underlayColor:"#eeeeee"},s,{onPress:function(){return r(item,n)}}),u.a.createElement(B.a,{style:Xe.container},u.a.createElement(B.a,null,u.a.createElement(I.a,{style:Xe.text},t)),u.a.createElement(I.a,{style:Xe.link},a)))}var Xe=T.a.create({container:{paddingVertical:6,marginTop:8,paddingHorizontal:16,flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderBottomColor:"rgba(0,0,0,0.3)",borderBottomWidth:T.a.hairlineWidth},text:{fontWeight:"bold",opacity:.7},link:{color:y.a.manifest.primaryColor}});function Qe(e){var t=e.item,a=e.index,n=e.onPress,r=k()(e,["item","index","onPress"]);return l.createElement(oe.a,H()({},r,{underlayColor:"#eeeeee",onPress:function(){n(t,a)}}),l.createElement(B.a,{style:Ze.container},l.createElement(I.a,{style:Ze.text},t.name),l.createElement(d.a,{size:24,color:"#CCCCCC",name:"ios-arrow-forward"})))}var Ze=T.a.create({container:{paddingVertical:16,paddingHorizontal:16,flexDirection:"row",justifyContent:"space-between",alignItems:"center"},text:{fontWeight:"bold"}});var $e=T.a.create({container:{backgroundColor:"transparent"}}),et=function(e){var t=e.style,a=e.title,n=e.onPress,r=e.onPressHeader,s=e.headerButtonTitle,o=k()(e,["style","title","onPress","onPressHeader","headerButtonTitle"]),i=Object(C.c)().bottom;return u.a.createElement(E.a,H()({style:[t,$e.container],keyExtractor:function(e,t){return"item-"+t},ListHeaderComponent:function(e){return u.a.createElement(Ye,H()({},e,{buttonTitle:s,onPress:r,title:a}))},ItemSeparatorComponent:Ee,contentContainerStyle:{paddingBottom:i},renderItem:function(e){return u.a.createElement(Qe,H()({},e,{onPress:n}))}},o))},tt=["Cheating","Naughty Photo","Risqu\xe9 Name","Terrorist","Annoying","Something Else..."].map((function(e){return{name:e}}));function at(e){var t=e.navigation,a=e.route,n=a.username,r=a.uid;return u.a.createElement(B.a,{style:nt.container},u.a.createElement(B.a,{style:nt.row},u.a.createElement(De.a,{size:36,color:"#34495e",name:"security"}),u.a.createElement(I.a,{style:nt.header},"Report ",n)),u.a.createElement(et,{data:tt,onPress:function(e){var a=e.name;h.a.shared.submitComplaint(r,a),t.goBack(),alert("This user will be investigated with surgical precision.")},title:"What did "+n+" do to you?"}))}var nt=T.a.create({container:{flex:1},row:{flexDirection:"row",margin:24,marginLeft:16},header:{marginLeft:12,marginTop:4,fontSize:24,fontWeight:"bold",textAlign:"center",color:"#34495e"}}),rt=Object(f.a)(),st=function(e){return function(t){var a=t.tintColor;return l.createElement(d.a,{style:{backgroundColor:"transparent"},name:"md-"+e,color:a,size:24})}},ot=Object(g.a)(),it={prefixes:[v.a()],config:{Game:"/",Licenses:"/credit",Report:"/report",Social:{screens:{Leaderboard:"/rank",Profile:"/u"}}}},ct=function(){return l.createElement(m.a,{linking:it},l.createElement(ot.Navigator,{screenOptions:{headerTintColor:"white",headerStyle:{backgroundColor:y.a.manifest.primaryColor},headerTitleStyle:{color:"white"},headerTintColor:"#fff",cardStyle:{backgroundColor:"white"}},initialRouteName:"Game"},l.createElement(ot.Screen,{name:"Game",component:F,options:{header:function(){return null}}}),l.createElement(ot.Screen,{name:"Licenses",component:j}),l.createElement(ot.Screen,{name:"Social",component:lt,options:{title:"Expo "+y.a.manifest.name}}),l.createElement(ot.Screen,{name:"Report",component:at,options:{title:"Report"}}),l.createElement(ot.Screen,{name:"Profile",component:Ke,options:function(e){var t,a=e.navigation,n=e.route;return(n.uid||h.a.shared.uid)!==h.a.shared.uid&&(t=l.createElement(Text,{onPress:function(){a.navigate("Report",n)},style:styles.reportButton},"Report")),{title:"Player Profile",headerRight:t}}})))},lt=function(){return l.createElement(rt.Navigator,{initialRouteName:"Leaderboard",tabBarOptions:{shifting:!0,activeTintColor:"#f0edf6",inactiveTintColor:"#3e2465",barStyle:{backgroundColor:"#694fad",alignItems:"stretch"},mode:"modal",title:y.a.manifest.name,cardStyle:{backgroundColor:"transparent"}}},l.createElement(rt.Screen,{name:"Leaderboard",component:Re,options:{tabBarColor:"#2962ff",title:st("podium")}}),l.createElement(rt.Screen,{name:"Profile",component:Ke,options:{title:"Profile",tabBarColor:"#40D8FF",tabBarIcon:st("person")}}))},ut=a(195);function pt(){var e=u.a.useState(!0),t=o()(e,2),n=t[0],s=t[1];return u.a.useEffect((function(){h.a.shared.init(),r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return console.time("Setup"),e.prev=1,e.next=4,r.a.awrap(Promise.all([c.b({"GothamNarrow-Book":a(552)}),p.a.shared.setupAsync()]));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.log("Error loading fonts and audio!"),console.error(e.t0);case 10:return e.prev=10,console.timeEnd("Setup"),e.finish(10);case 13:s(!1);case 14:case"end":return e.stop()}}),null,null,[[1,6,10,13]])}),[]),n?u.a.createElement(i.a,null):u.a.createElement(ut.a,null,u.a.createElement(ct,null))}},351:function(e,t,a){"use strict";var n=a(0),r=a.n(n),s=a(9),o=a(10),i=a(350),c=a(67),l=a(55),u=a(26),p=a(63),h=a(22),d=a.n(h),f=a(158);function m(){var e=r.a.useState(!1),t=d()(e,2),a=t[0],n=t[1];return r.a.useEffect((function(){f.a().then((function(e){n(e)}))}),[]),a}var g=a(18),y=a.n(g),v=a(5),b=a.n(v),x=a(6),w=a.n(x),k=a(7),E=a.n(k),C=a(4),S=a.n(C),P=a(8),A=a.n(P),T=a(92),I=a(16),M=a(93),B=a(52).a,z=function(e){function t(){return b()(this,t),E()(this,S()(t).apply(this,arguments))}return A()(t,e),w()(t,[{key:"render",value:function(){var e=this.props,t=e.onPress,a=e.size,n=e.color,s=e.name,o=e.soundOut,i=e.soundIn,c=(e.source,e.style),l=e.iconStyle;return r.a.createElement(B,{onPress:t,onPressIn:function(){return M.a.shared.playAsync(i)},onPressOut:function(){return M.a.shared.playAsync(o)},style:[O.container,c]},r.a.createElement(T.a,{size:a,color:n,name:s,style:[O.icon,l]}))}}]),t}(n.Component);z.defaultProps={soundIn:"button_in",soundOut:"button_out",size:24,color:"#ffffff",onPress:function(){}};var O=s.a.create({container:{width:56,minWidth:56,height:56,minHeight:56,maxHeight:56,backgroundColor:"transparent",borderBottomWidth:3,borderColor:"white",justifyContent:"center",alignItems:"center",marginHorizontal:4},icon:{backgroundColor:"transparent",marginBottom:I.a.select({web:"1rem",default:0})}}),R=n.forwardRef((function(e,t){return n.createElement(z,y()({},e,{ref:t,name:"trophy"}))})),U=n.forwardRef((function(e,t){return n.createElement(z,y()({},e,{ref:t,name:"handshake-o"}))})),L=a(32),D=a(96),j=a(76),_=L.a.manifest.name;var N=function(){var e=m(),t=r.a.useMemo((function(){return function(){e?f.b():D.a.alert("Do you like "+_+"?","Would you like to rate this app in the app store? It help's others discover "+_+" too!",[{text:"OK",onPress:function(){return j.a.openURL(f.c())}},{text:"Cancel",onPress:function(){},style:"cancel"}],{cancelable:!0})}}),[e]);return r.a.createElement(z,{onPress:t,name:"star"})},G=a(21),W=a.n(G),F=a(2),V=a.n(F),H=a(334);var q=function(){var e=I.a.OS,t=L.a.manifest[e];return"ios"===e?t.appStoreUrl:t.playStoreUrl},J=function(e){function t(){var e,a;b()(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=E()(this,(e=S()(t)).call.apply(e,[this].concat(r)))).onPress=function(){var e,t,n,r,s,o;return V.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:e=a.props,t=e.score,n=e.screenshot,r=L.a.manifest.name,s=""+r,o="OMG! I got "+t+" points in @baconbrix "+r+". "+(q()||""),H.a.share({message:o,title:s,url:n},{tintColor:L.a.manifest.tintColor,excludedActivityTypes:["com.apple.UIKit.activity.Print","com.apple.UIKit.activity.AssignToContact","com.apple.UIKit.activity.AddToReadingList","com.apple.UIKit.activity.AirDrop","com.apple.UIKit.activity.OpenInIBooks","com.apple.UIKit.activity.MarkupAsPDF","com.apple.reminders.RemindersEditorExtension","com.apple.mobilenotes.SharingExtension","com.apple.mobileslideshow.StreamShareService"]}),a.props.onPress&&a.props.onPress();case 6:case"end":return i.stop()}}))},a}return A()(t,e),w()(t,[{key:"render",value:function(){var e=this.props,t=(e.onPress,e.screenshot),a=(e.name,W()(e,["onPress","screenshot","name"]));return t?r.a.createElement(z,y()({onPress:this.onPress,name:"share"},a)):null}}]),t}(r.a.Component),K=Object(l.b)((function(e){return{score:e.score.last,screenshot:e.screenshot}}))(J),Y=a(23);var X=Object(l.b)((function(e){return{muted:e.muted}}))((function(e){var t=e.muted,a=n.useMemo((function(){return function(){Y.dispatch.muted.toggle()}}),[]);return n.createElement(z,{onPress:a,name:t?"volume-off":"volume-up"})}));var Q=s.a.create({container:{flexDirection:"row",position:"absolute",bottom:8,left:8,right:8,height:64,alignItems:"center",justifyContent:"space-around"},button:{height:64}});t.a=Object(l.b)((function(e){return{game:e.game,screenshot:e.screenshot}}))((function(e){var t=e.game,a=e.screenshot,n=e.onLeaderboardPress,s=e.onLicensesPress,l=Object(c.c)().bottom,h=m(),d=t===p.a.Menu?"zoomIn":"zoomOut",f=[r.a.createElement(X,null),r.a.createElement(U,{onPress:s})];return u.a.isFirebaseEnabled&&f.unshift(r.a.createElement(R,{onPress:n})),a&&f.push(r.a.createElement(K,null)),h&&f.push(r.a.createElement(N,null)),r.a.createElement(o.a,{style:[Q.container,{marginBottom:l}]},f.map((function(e,t){var a=100*t;return r.a.createElement(i.a,{useNativeDriver:!0,key:t,duration:500+a,delay:100+a,animation:d,easing:"ease-out",style:Q.button},e)})))}))},355:function(e,t,a){"use strict";var n=a(2),r=a.n(n),s=a(5),o=a.n(s),i=a(26),c=a(194),l=(a(1),a(352)),u=a(323),p=a(152),h=a(324),d=function(e,t,n,r){a(508),a(509),a(510),a(511),a(512),a(513),a(514),a(515),a(516),a(517),a(518),a(519);var s=new p.a(h.a);s.renderToScreen=!0;var o=new l.a(t);return o.addPass(new u.a(n,r)),o.addPass(s),o},f=a(325);t.a=function e(){var t=this;o()(this,e),this.time=0,this.onContextCreateAsync=function(e){var a,n,s,o;return r.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return a=e.gl,n=e.width,s=e.height,o=e.scale,t.renderer=new c.a({gl:a,width:n,height:s,pixelRatio:o}),t.game=new f.a(n,s,t.renderer),l.next=5,r.a.awrap(t.game.loadAsync());case 5:i.a.isComposerEnabled&&(t.composer=d(0,t.renderer,t.game.scene,t.game.camera));case 6:case"end":return l.stop()}}))},this.onTouchesBegan=function(e){return t.game.onTouchesBegan(e)},this.onResize=function(e){e.scale;var a=e.width,n=e.height;t.renderer&&t.renderer.setSize(a,n),t.composer&&t.composer.setSize(a,n),t.game&&t.game.onResize({width:a,height:n})},this.onRender=function(e){t.time+=e,t.game.update(e,t.time),t.composer?t.composer.render(e):t.renderer.render(t.game.scene,t.game.camera)}}},369:function(e,t,a){a(370),e.exports=a(561)},370:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/expo-service-worker.js",{scope:"/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))},393:function(e,t,a){e.exports=a.p+"static/media/button_in.96f6f788.wav"},394:function(e,t,a){e.exports=a.p+"static/media/button_out.d14c1f4a.wav"},395:function(e,t,a){e.exports=a.p+"static/media/song.670464f8.mp3"},40:function(e,t,a){"use strict";var n=a(2),r=a.n(n),s=a(5),o=a.n(s),i=a(6),c=a.n(i),l=a(23),u=a(32),p=a(26),h={apiKey:"AIzaSyAkOa9Hyx6aKaSItFWBbrw_zou6RlQYdck",authDomain:"game-f26ee.firebaseapp.com",databaseURL:"https://game-f26ee.firebaseio.com",projectId:"game-f26ee",storageBucket:"game-f26ee.appspot.com",messagingSenderId:"997358977148",googleAnalyticsTrackingId:"UA-122220193-2"},d=a(38),f=a.n(d),m=(a(385),p.a.slug),g=function(){function e(){var t=this;o()(this,e),this.init=function(){p.a.isFirebaseEnabled&&(f.a.initializeApp(h),f.a.firestore().settings({timestampsInSnapshots:!0}),l.dispatch.user.observeAuth(),p.a.debug||l.dispatch.leaders.clear())},this.addCurrency=function(e){return new Promise((function(a,n){t.db.runTransaction((function(a){return a.get(t.doc).then((function(n){if(!n.exists)throw"Document does not exist!";var r=(n.data().currency||0)+e;return a.update(t.doc,{currency:r}),t.user.currency=r,r}))})).then(a).catch(n)}))},this.upgradeAccount=function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:l.dispatch.facebook.upgradeAccount();case 1:case"end":return e.stop()}}))},this.submitComplaint=function(e,a){t.db.collection("complaints").add({slug:u.a.manifest.slug,uid:t.uid,targetUid:e,complaint:a,timestamp:t.timestamp})}}return c()(e,[{key:"collection",get:function(){return this.db.collection(m)}},{key:"doc",get:function(){return this.collection.doc(this.uid)}},{key:"db",get:function(){return f.a.firestore()}},{key:"uid",get:function(){return(f.a.auth().currentUser||{}).uid}},{key:"timestamp",get:function(){return Date.now()}},{key:"isAuthed",get:function(){return!!this.uid}}]),e}();g.shared=new g;t.a=g},521:function(e,t,a){e.exports=a.p+"static/media/PILLAR.902be265.png"},522:function(e,t,a){e.exports=a.p+"static/media/VALLEY.9d1d2eea.png"},523:function(e,t,a){e.exports=a.p+"static/media/BEGIN.88d5f636.png"},528:function(e,t,a){e.exports=a.p+"static/media/splash.41b11b34.png"},552:function(e,t,a){e.exports=a.p+"./fonts/GothamNarrow-Book.ttf"},63:function(e,t,a){"use strict";t.a={Menu:"menu",Playing:"playing"}},68:function(e,t,a){"use strict";var n=a(2),r=a.n(n),s=a(5),o=a.n(s),i=a(6),c=a.n(i),l=a(7),u=a.n(l),p=a(4),h=a.n(p),d=a(13),f=a.n(d),m=a(8),g=a.n(m),y=a(1),v=function(e){function t(e){var a;return o()(this,t),(a=u()(this,h()(t).call(this)))._loaded=!1,a._size={width:null,height:null,depth:null},a.objects=[],a._alpha=1,a.setAll=function(e,t){var n=a.objects,r=Array.isArray(n),s=0;for(n=r?n:n["function"===typeof Symbol&&"function"===typeof Symbol?Symbol.iterator:"@@iterator"]();;){var o;if(r){if(s>=n.length)break;o=n[s++]}else{if((s=n.next()).done)break;o=s.value}o[e]=t}},a.destroy=function(){a.parent&&(a.parent instanceof t?a.parent.destroyChild(f()(a)):a.parent.remove(f()(a)))},a.destroyChild=function(e){if(e instanceof t){var n=a.objects.indexOf(e);n>-1&&a.objects.splice(n,1),a.remove(e)}else e instanceof y.Object3D&&a.remove(e)},a.remove=function(){var e=arguments.length<=0?void 0:arguments[0];if(arguments.length>1){for(var t=0;t<arguments.length;t++)a.remove(t<0||arguments.length<=t?void 0:arguments[t]);return f()(a)}var n=a.children.indexOf(e);-1!==n&&(e.parent=null,e.dispatchEvent({type:"removed"}),a.children.splice(n,1));var r=a.objects.indexOf(e);return-1!==r&&(e.parent=null,a.objects.splice(r,1)),f()(a)},a._game=e,a}return g()(t,e),c()(t,[{key:"reset",value:function(){this.visible=!0}},{key:"loadAsync",value:function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:this.loaded=!0;case 1:case"end":return e.stop()}}),null,this)}},{key:"add",value:function(){var e,a,n=arguments;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(e=n.length<=0?void 0:n[0],!(n.length>1)){s.next=10;break}a=0;case 3:if(!(a<n.length)){s.next=9;break}return s.next=6,r.a.awrap(this.add(a<0||n.length<=a?void 0:n[a]));case 6:a++,s.next=3;break;case 9:return s.abrupt("return",this);case 10:if(e!==this){s.next=13;break}return console.error("GameObject.add: object can't be added as a child of itself.",e),s.abrupt("return",this);case 13:if(!e||!e.isObject3D){s.next=26;break}if(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e),!(e instanceof t)){s.next=24;break}return e.game=this.game,s.next=22,r.a.awrap(e.loadAsync(this));case 22:return this.objects.push(e),s.abrupt("return",e);case 24:s.next=27;break;case 26:console.error("GameObject.add: object not an instance of THREE.Object3D.",e);case 27:return s.abrupt("return",this);case 28:case"end":return s.stop()}}),null,this)}},{key:"update",value:function(e,t){if(!this.loaded)return!1;var a=this.objects,n=Array.isArray(a),r=0;for(a=n?a:a["function"===typeof Symbol?Symbol.iterator:"@@iterator"]();;){var s;if(n){if(r>=a.length)break;s=a[r++]}else{if((r=a.next()).done)break;s=r.value}s.update(e,t)}}},{key:"size",get:function(){var e=(new y.Box3).setFromObject(this),t=new y.Vector3;return e.getSize(t),t}},{key:"loaded",set:function(e){this._loaded=e,this._size=this.size},get:function(){return this._loaded}},{key:"alpha",get:function(){return this._alpha},set:function(e){this._alpha=e;var t=1!==e;this.materials?this.materials.map((function(a){a.transparent=t,a.opacity=e})):this.material&&(this.material.transparent=t,this.material.opacity=e),this.setAll("alpha",e),this.traverse((function(a){a instanceof y.Mesh&&(a.materials?a.materials.map((function(a){a.transparent=t,a.opacity=e})):a.material&&(a.material.transparent=t,a.material.opacity=e))}))}},{key:"position",get:function(){return this.position},set:function(e){this.position.set(e)}},{key:"x",get:function(){return this.position.x},set:function(e){this.position.x=e}},{key:"y",get:function(){return this.position.y},set:function(e){this.position.y=e}},{key:"z",get:function(){return this.position.z},set:function(e){this.position.z=e}},{key:"game",get:function(){return this._game},set:function(e){this._game=e,this.setAll("game",e)}},{key:"box",get:function(){return(new y.Box3).setFromObject(this)}},{key:"min",get:function(){return this.box.min}},{key:"max",get:function(){return this.box.min}},{key:"width",get:function(){return this.size.x}},{key:"height",get:function(){return this.size.y}},{key:"depth",get:function(){return this.size.z}},{key:"center",get:function(){return this.box.center}}]),t}(y.Object3D);t.a=v},86:function(e,t,a){"use strict";t.a=function(e,t){return e+Math.random()*(t-e)}},93:function(e,t,a){"use strict";var n=a(2),r=a.n(n),s=a(5),o=a.n(s),i=a(6),c=a.n(i),l=a(195),u=a(160),p=function(){function e(){var t=this;o()(this,e),this.sounds={},this.playAsync=function(e,a){var n;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(!l.b.getState().muted){s.next=2;break}return s.abrupt("return");case 2:if(!(e in t.sounds)){s.next=18;break}return n=t.sounds[e],s.prev=4,s.next=7,r.a.awrap(n.setPositionAsync(0));case 7:return s.next=9,r.a.awrap(n.setIsLoopingAsync(a));case 9:return s.next=11,r.a.awrap(n.playAsync());case 11:s.next=16;break;case 13:s.prev=13,s.t0=s.catch(4),console.warn("Error playing audio",{error:s.t0});case 16:s.next=19;break;case 18:console.warn("Audio doesn't exist",e);case 19:case"end":return s.stop()}}),null,null,[[4,13]])},this.stopAsync=function(e){var a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e in t.sounds)){n.next=12;break}return a=t.sounds[e],n.prev=2,n.next=5,r.a.awrap(a.stopAsync());case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),console.warn("Error stopping audio",{error:n.t0});case 10:n.next=13;break;case 12:console.warn("Audio doesn't exist",e);case 13:case"end":return n.stop()}}),null,null,[[2,7]])},this.volumeAsync=function(e,a){var n;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(!(e in t.sounds)){s.next=12;break}return n=t.sounds[e],s.prev=2,s.next=5,r.a.awrap(n.setVolumeAsync(a));case 5:s.next=10;break;case 7:s.prev=7,s.t0=s.catch(2),console.warn("Error setting volume of audio",{error:s.t0});case 10:s.next=13;break;case 12:console.warn("Audio doesn't exist",e);case 13:case"end":return s.stop()}}),null,null,[[2,7]])},this.pauseAsync=function(e){var a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e in t.sounds)){n.next=12;break}return a=t.sounds[e],n.prev=2,n.next=5,r.a.awrap(a.pauseAsync());case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),console.warn("Error pausing audio",{error:n.t0});case 10:n.next=13;break;case 12:console.warn("Audio doesn't exist",e);case 13:case"end":return n.stop()}}),null,null,[[2,7]])},this.configureExperienceAudioAsync=function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.a.setAudioModeAsync({playThroughEarpieceAndroid:!1,allowsRecordingIOS:!1,interruptionModeIOS:u.a.INTERRUPTION_MODE_IOS_DO_NOT_MIX,playsInSilentModeIOS:!1,shouldDuckAndroid:!0,interruptionModeAndroid:u.a.INTERRUPTION_MODE_ANDROID_DO_NOT_MIX}));case 1:case"end":return e.stop()}}))},this.setupAudioAsync=function(){var e,a,n,s,o,i,c,l;return r.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:e=Object.keys(t.assets||{}),a=e,n=0;case 3:if(!(n<a.length)){p.next=15;break}return s=a[n],o=t.assets[s],p.next=8,r.a.awrap(u.a.Sound.createAsync(o));case 8:i=p.sent,c=i.sound,l=s.substr(0,s.lastIndexOf(".")),t.sounds[l]=c;case 12:n++,p.next=3;break;case 15:case"end":return p.stop()}}))},this.setupAsync=function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.awrap(t.configureExperienceAudioAsync());case 2:return e.next=4,r.a.awrap(t.setupAudioAsync());case 4:case"end":return e.stop()}}))}}return c()(e,[{key:"assets",get:function(){return{"button_in.wav":a(393),"button_out.wav":a(394),"song.mp3":a(395)}}}]),e}();p.shared=new p,t.a=p}},[[369,1,2]]]);
//# sourceMappingURL=app.afb8c9c0.chunk.js.map